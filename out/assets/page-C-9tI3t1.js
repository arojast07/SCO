import{r as o,j as e,s as h,b as L,R as V,a as J}from"./index-Xz42BvxI.js";import{S as Q,T as W}from"./TopBar-BLe2nnBZ.js";import{M as H}from"./MobileNav-CVw3BIlq.js";import{P as q}from"./PermissionButton-BMmIwIyf.js";import{N as $}from"./NotificationPopup-CexS2oSK.js";function K({children:a}){const[l,d]=o.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(Q,{isOpen:l,onClose:()=>d(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(W,{onMenuClick:()=>d(!0)}),e.jsx("main",{className:"flex-1 p-4 lg:p-6 pb-20 lg:pb-6 overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:a})})]}),e.jsx(H,{})]})}function X({usuario:a,onClose:l,onSave:d}){const[t,m]=o.useState({email:"",nombre_completo:"",rol:"Usuario",activo:!0,tienda_id:""}),[x,f]=o.useState([]),[n,p]=o.useState([]),[_,w]=o.useState(!1),[j,c]=o.useState("");o.useEffect(()=>{S(),u(),a&&N(a.id)},[a]);const S=async()=>{try{const{data:s,error:r}=await h.from("roles").select("nombre").order("nombre");if(r)throw r;const b=s?.map(E=>E.nombre)||["Admin","Usuario","Supervisor"];f(b)}catch(s){console.error("Error cargando roles:",s),f(["Admin","Usuario","Supervisor"])}},u=async()=>{try{const{data:s,error:r}=await h.from("tiendas").select("id, nombre").eq("activo",!0).order("nombre");if(r)throw r;p(s||[])}catch(s){console.error("Error cargando tiendas:",s)}},N=async s=>{try{const{data:r,error:b}=await h.from("usuario_tienda_actual").select("tienda_id").eq("usuario_id",s).single();if(b&&b.code!=="PGRST116")throw b;m(E=>({...E,email:a.email,nombre_completo:a.nombre_completo,rol:a.rol,activo:a.activo,tienda_id:r?.tienda_id||""}))}catch(r){console.error("Error cargando tienda actual:",r),m({email:a.email,nombre_completo:a.nombre_completo,rol:a.rol,activo:a.activo,tienda_id:""})}},g=async s=>{s.preventDefault(),c(""),w(!0);try{if(a){const{error:r}=await h.from("usuarios").update({nombre_completo:t.nombre_completo,rol:t.rol,activo:t.activo,updated_at:new Date().toISOString()}).eq("id",a.id);if(r)throw r;if(t.tienda_id){const{data:b,error:E}=await h.from("usuario_tiendas").select("tienda_id").eq("usuario_id",a.id).eq("tienda_id",t.tienda_id).maybeSingle();if(!b){const{error:P}=await h.from("usuario_tiendas").insert({usuario_id:a.id,tienda_id:t.tienda_id,activo:!0});if(P)throw console.error("Error agregando acceso a tienda:",P),new Error(`No se pudo agregar acceso a la tienda: ${P.message}`)}const{error:k}=await h.from("usuario_tienda_actual").upsert({usuario_id:a.id,tienda_id:t.tienda_id},{onConflict:"usuario_id"});if(k)throw console.error("Error actualizando tienda actual:",k),k.code==="42501"?new Error("No tienes permisos para asignar tiendas. Por favor, ejecuta el script SQL: sql_fix_rls_usuario_tienda_actual_admin.sql en Supabase Dashboard > SQL Editor"):new Error(`Error al asignar tienda: ${k.message}`)}else{const{error:b}=await h.from("usuario_tienda_actual").delete().eq("usuario_id",a.id);b&&b.code!=="PGRST116"&&console.error("Error eliminando tienda actual:",b)}}else{const{error:r}=await h.from("usuarios").insert([{email:t.email,nombre_completo:t.nombre_completo,rol:t.rol,activo:t.activo,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(r)throw r}d()}catch(r){console.error("Error guardando usuario:",r),c(r.message||"Error al guardar el usuario")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?"Editar Usuario":"Nuevo Usuario"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",required:!0,disabled:!!a,value:t.email,onChange:s=>m({...t,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 text-sm"}),a&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El email no se puede modificar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre Completo"}),e.jsx("input",{type:"text",required:!0,value:t.nombre_completo,onChange:s=>m({...t,nombre_completo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),e.jsx("select",{value:t.rol,onChange:s=>m({...t,rol:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",children:x.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx("i",{className:"ri-store-2-line mr-1 text-teal-600"}),"Tienda Asignada"]}),e.jsxs("select",{value:t.tienda_id,onChange:s=>m({...t,tienda_id:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"Sin tienda asignada"}),n.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona la tienda a la que pertenece este usuario"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"activo",checked:t.activo,onChange:s=>m({...t,activo:s.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"activo",className:"ml-2 block text-sm text-gray-900",children:"Usuario activo"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50 whitespace-nowrap",children:_?"Guardando...":"Guardar"})]})]})]})})}class Y{async obtenerUsuariosPendientes(){try{console.log("ðŸ” Obteniendo usuarios pendientes...");const{data:l,error:d}=await h.from("usuario_tiendas").select("usuario_id").eq("activo",!0);if(d)throw console.error("âŒ Error obteniendo usuarios con tienda:",d),d;const t=l?.map(p=>p.usuario_id)||[];console.log("ðŸ“‹ IDs con tienda asignada:",t);let m=h.from("usuarios").select(`
          id,
          nombre_completo,
          email,
          activo,
          created_at,
          roles(nombre)
        `).eq("activo",!0);if(t.length>0){const p=t.map(_=>`"${_}"`).join(",");m=m.not("id","in",`(${p})`)}const{data:x,error:f}=await m;if(f)throw console.error("âŒ Error obteniendo usuarios pendientes:",f),f;const n=x?.map(p=>({id:p.id,nombre_completo:p.nombre_completo,email:p.email,rol:p.roles?.nombre||"Sin rol",activo:p.activo,created_at:p.created_at}))||[];return console.log("âœ… Usuarios pendientes obtenidos:",n.length),n}catch(l){throw console.error("âŒ Error en obtenerUsuariosPendientes:",l),new Error(`Error cargando usuarios pendientes: ${JSON.stringify(l)}`)}}async obtenerTiendasDisponibles(){try{console.log("ðŸª Obteniendo tiendas disponibles...");const{data:l,error:d}=await h.from("tiendas").select("id, nombre, codigo, activo").eq("activo",!0).order("nombre");if(d)throw console.error("âŒ Error obteniendo tiendas:",d),d;return console.log("âœ… Tiendas disponibles:",l?.length||0),l||[]}catch(l){throw console.error("âŒ Error en obtenerTiendasDisponibles:",l),new Error(`Error cargando tiendas: ${JSON.stringify(l)}`)}}async asignarTienda(l){try{console.log("ðŸª Asignando tienda:",l);const{data:d,error:t}=await h.from("usuarios").select("id, nombre_completo").eq("id",l.usuario_id).eq("activo",!0).single();if(t||!d)throw new Error("Usuario no encontrado o inactivo");const{data:m,error:x}=await h.from("tiendas").select("id, nombre").eq("id",l.tienda_id).eq("activo",!0).single();if(x||!m)throw new Error("Tienda no encontrada o inactiva");console.log("âœ… Usuario y tienda vÃ¡lidos:",{usuario:d.nombre_completo,tienda:m.nombre});const{error:f}=await h.from("usuario_tiendas").insert({usuario_id:l.usuario_id,tienda_id:l.tienda_id,activo:!0});if(f)throw console.error("âŒ Error creando usuario_tiendas:",f),f;console.log("âœ… Registro usuario_tiendas creado");const{error:n}=await h.from("usuario_tienda_actual").upsert({usuario_id:l.usuario_id,tienda_id:l.tienda_id});if(n)throw console.error("âŒ Error estableciendo tienda actual:",n),await h.from("usuario_tiendas").delete().eq("usuario_id",l.usuario_id).eq("tienda_id",l.tienda_id),n;console.log("âœ… Tienda asignada exitosamente:",{usuario:d.nombre_completo,tienda:m.nombre})}catch(d){throw console.error("âŒ Error en asignarTienda:",d),new Error(`Error asignando tienda: ${JSON.stringify(d)}`)}}}const U=new Y;function M({usuario:a,onClose:l,onSuccess:d}){const[t,m]=o.useState([]),[x,f]=o.useState(""),[n,p]=o.useState(!1),[_,w]=o.useState(!0),{showNotification:j}=L();o.useEffect(()=>{c()},[]);const c=async()=>{try{w(!0);const N=await U.obtenerTiendasDisponibles();m(N),N.length===1&&f(N[0].id)}catch(N){console.error("Error cargando tiendas:",N),j("Error al cargar tiendas disponibles","error")}finally{w(!1)}},S=async()=>{if(!x){j("Por favor selecciona una tienda","error");return}try{p(!0),await U.asignarTienda({usuario_id:a.id,tienda_id:x}),d()}catch(N){console.error("Error asignando tienda:",N),j("Error al asignar la tienda","error")}finally{p(!1)}},u=t.find(N=>N.id===x);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Asignar Tienda a Usuario"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"InformaciÃ³n del Usuario"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-user-line text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Nombre:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 ml-2",children:a.nombre_completo})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-mail-line text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 ml-2",children:a.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-shield-user-line text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Rol:"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 ml-2",children:a.rol})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-calendar-line text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Registro:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 ml-2",children:new Date(a.created_at).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-time-line text-yellow-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Estado Actual: Pendiente de AsignaciÃ³n de Tienda"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Este usuario no puede acceder al sistema hasta que se le asigne una tienda."})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tienda",className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Tienda *"}),_?e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400 mr-2"}),"Cargando tiendas..."]})}):t.length===0?e.jsx("div",{className:"w-full px-3 py-2 border border-red-300 rounded-md bg-red-50 text-red-600 text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line mr-2"}),"No hay tiendas disponibles"]})}):e.jsxs("select",{id:"tienda",value:x,onChange:N=>f(N.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:n,children:[e.jsx("option",{value:"",children:"Selecciona una tienda"}),t.map(N=>e.jsxs("option",{value:N.id,children:[N.nombre," (",N.codigo,")"]},N.id))]}),u&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-store-line text-blue-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Tienda Seleccionada: ",u.nombre]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["CÃ³digo: ",u.codigo]})]})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Â¿QuÃ© sucederÃ¡ al asignar la tienda?"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ El usuario podrÃ¡ iniciar sesiÃ³n normalmente"}),e.jsx("li",{children:"â€¢ TendrÃ¡ acceso a todas las funcionalidades del sistema"}),e.jsx("li",{children:"â€¢ La tienda seleccionada serÃ¡ su tienda por defecto"}),e.jsx("li",{children:"â€¢ PodrÃ¡ cambiar de tienda si tiene permisos"})]})]})]})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{onClick:S,disabled:n||!x||_||t.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Asignando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Asignar Tienda"]})})]})]})})}function Z(){const[a,l]=o.useState([]),[d,t]=o.useState(!0),[m,x]=o.useState(!1),[f,n]=o.useState(null),[p,_]=o.useState(!1),[w,j]=o.useState(null);o.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const{data:s,error:r}=await h.from("usuarios").select(`
          *,
          usuario_tienda_actual(
            tienda_id,
            tiendas(
              id,
              nombre
            )
          )
        `).order("created_at",{ascending:!1});if(r)throw console.error("Error en query:",r),r;console.log("ðŸ“Š Datos crudos de Supabase:",s);const b=(s||[]).map(E=>{console.log("ðŸ‘¤ Usuario:",E.email,"Tienda data:",E.usuario_tienda_actual);let k=null;if(E.usuario_tienda_actual){const P=Array.isArray(E.usuario_tienda_actual)?E.usuario_tienda_actual[0]:E.usuario_tienda_actual;P?.tiendas&&(k=Array.isArray(P.tiendas)?P.tiendas[0]?.nombre:P.tiendas?.nombre)}return{...E,tienda_nombre:k}});console.log("âœ… Usuarios procesados:",b),l(b)}catch(s){console.error("Error cargando usuarios:",s);try{const{data:r,error:b}=await h.from("usuarios").select("*").order("created_at",{ascending:!1});!b&&r&&l(r.map(E=>({...E,tienda_nombre:null})))}catch(r){console.error("Error en fallback:",r)}}finally{t(!1)}},S=s=>{n(s),x(!0)},u=async s=>{if(confirm("Â¿EstÃ¡ seguro de eliminar este usuario?"))try{const{error:r}=await h.from("usuarios").delete().eq("id",s);if(r)throw r;c()}catch(r){console.error("Error eliminando usuario:",r),alert("Error al eliminar el usuario")}},N=async s=>{try{const{error:r}=await h.from("usuarios").update({activo:!s.activo}).eq("id",s.id);if(r)throw r;c()}catch(r){console.error("Error actualizando estado:",r),alert("Error al actualizar el estado del usuario")}},g=s=>{j(s),_(!0)};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usuarios del Sistema"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona los usuarios y sus permisos"})]}),e.jsxs("button",{onClick:()=>{n(null),x(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Usuario"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tienda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Registro"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-blue-600 text-lg"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.nombre_completo||"Sin nombre"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:s.rol||"Sin rol"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.tienda_nombre?e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx("i",{className:"ri-store-2-line text-teal-600 mr-2"}),s.tienda_nombre]}):e.jsxs("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-600",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Sin tienda"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>N(s),className:"cursor-pointer",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${s.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.activo?"Activo":"Inactivo"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>g(s),className:"text-teal-600 hover:text-teal-900 cursor-pointer",title:"Asignar Tienda",children:e.jsx("i",{className:"ri-store-2-line text-lg"})}),e.jsx("button",{onClick:()=>S(s),className:"text-blue-600 hover:text-blue-900 cursor-pointer",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:()=>u(s.id),className:"text-red-600 hover:text-red-900 cursor-pointer",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})})]},s.id))})]})}),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-user-line text-gray-400 text-5xl mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay usuarios registrados"})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:f?"Editar Usuario":"Nuevo Usuario"}),e.jsx("button",{onClick:()=>{x(!1),n(null)},className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsx(X,{usuario:f,onSuccess:()=>{x(!1),n(null),c()},onCancel:()=>{x(!1),n(null)}})]})})}),p&&w&&e.jsx(M,{usuario:w,onClose:()=>{_(!1),j(null)},onSuccess:()=>{_(!1),j(null),c()}})]})}function ee(){const[a,l]=o.useState([]),[d,t]=o.useState(!0),[m,x]=o.useState(""),[f,n]=o.useState(!1),[p,_]=o.useState(null),{showNotification:w}=L();o.useEffect(()=>{j()},[]);const j=async()=>{try{t(!0);const g=await U.obtenerUsuariosPendientes();l(g)}catch(g){console.error("Error cargando usuarios pendientes:",g),w("Error al cargar usuarios pendientes","error")}finally{t(!1)}},c=g=>{_(g),n(!0)},S=async g=>{if(confirm(`Â¿EstÃ¡s seguro de que deseas rechazar el registro de ${g.nombre_completo}?`))try{await U.rechazarRegistro(g.id),w("Registro rechazado exitosamente","success"),await j()}catch(s){console.error("Error rechazando registro:",s),w("Error al rechazar el registro","error")}},u=()=>{n(!1),_(null),j(),w("Tienda asignada exitosamente","success")},N=a.filter(g=>g.nombre_completo.toLowerCase().includes(m.toLowerCase())||g.email.toLowerCase().includes(m.toLowerCase()));return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Usuarios Pendientes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Usuarios que necesitan asignaciÃ³n de tienda para acceder al sistema"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:m,onChange:g=>x(g.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsx("button",{onClick:j,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap",title:"Actualizar lista",children:e.jsx("i",{className:"ri-refresh-line"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-time-line text-yellow-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Usuarios Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:a.length})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-user-add-line text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Registros Hoy"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a.filter(g=>{const s=new Date().toDateString(),r=new Date(g.created_at).toDateString();return s===r}).length})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-check-line text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:a.filter(g=>g.activo).length})]})]})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Registro"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.nombre_completo}),e.jsx("div",{className:"text-sm text-gray-500",children:g.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:g.rol})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-2 w-2 bg-yellow-400 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-yellow-700 font-medium",children:"Pendiente de tienda"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(g.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(g.created_at).toLocaleTimeString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(q,{permission:"seguridad:usuarios:asignar_tienda",onClick:()=>c(g),className:"text-green-600 hover:text-green-900",title:"Asignar tienda",children:e.jsx("i",{className:"ri-store-line"})}),e.jsx(q,{permission:"seguridad:usuarios:rechazar_registro",onClick:()=>S(g),className:"text-red-600 hover:text-red-900",title:"Rechazar registro",children:e.jsx("i",{className:"ri-close-line"})})]})})]},g.id))})]})}),N.length===0&&e.jsx("div",{className:"text-center py-12",children:a.length===0?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-check-double-line text-green-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Â¡Excelente! No hay usuarios pendientes"}),e.jsx("p",{className:"text-gray-500",children:"Todos los usuarios registrados tienen tienda asignada."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-search-line text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron usuarios"}),e.jsx("p",{className:"text-gray-500",children:"No hay usuarios que coincidan con tu bÃºsqueda."})]})})]}),f&&p&&e.jsx(M,{usuario:p,onClose:()=>{n(!1),_(null)},onSuccess:u})]})}function se({rol:a,onClose:l,onSave:d}){const[t,m]=o.useState({nombre:"",descripcion:""}),[x,f]=o.useState([]),[n,p]=o.useState([]),[_,w]=o.useState(!1),[j,c]=o.useState("");o.useEffect(()=>{S(),a&&(m({nombre:a.nombre,descripcion:a.descripcion}),u(a.id))},[a]);const S=async()=>{try{const{data:s,error:r}=await h.from("permisos").select("*").order("nombre");if(r)throw r;f(s||[])}catch(s){console.error("Error cargando permisos:",s)}},u=async s=>{try{const{data:r,error:b}=await h.from("rol_permisos").select("permiso_id").eq("rol_id",s);if(b)throw b;const E=r?.map(k=>k.permiso_id)||[];p(E)}catch(r){console.error("Error cargando permisos del rol:",r)}},N=(s,r)=>{p(r?[...n,s]:n.filter(b=>b!==s))},g=async s=>{s.preventDefault(),c(""),w(!0);try{let r;if(a){const{error:b}=await h.from("roles").update({nombre:t.nombre,descripcion:t.descripcion}).eq("id",a.id);if(b)throw b;r=a.id}else{const{data:b,error:E}=await h.from("roles").insert([{nombre:t.nombre,descripcion:t.descripcion}]).select().single();if(E)throw E;r=b.id}if(a&&await h.from("rol_permisos").delete().eq("rol_id",r),n.length>0){const b=n.map(k=>({rol_id:r,permiso_id:k})),{error:E}=await h.from("rol_permisos").insert(b);if(E)throw E}d()}catch(r){console.error("Error guardando rol:",r),c(r.message||"Error al guardar el rol")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?"Editar Rol":"Nuevo Rol"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:j}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Rol"}),e.jsx("input",{type:"text",required:!0,value:t.nombre,onChange:s=>m({...t,nombre:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescripciÃ³n"}),e.jsx("input",{type:"text",value:t.descripcion,onChange:s=>m({...t,descripcion:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permisos"}),e.jsx("div",{className:"border border-gray-200 rounded-md p-4 max-h-60 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.map(s=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:`permiso-${s.id}`,checked:n.includes(s.id),onChange:r=>N(s.id,r.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),e.jsxs("label",{htmlFor:`permiso-${s.id}`,className:"ml-2 block text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-gray-500 text-xs",children:s.descripcion})]})]},s.id))})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:_,className:`px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-7

              00 rounded-md disabled:opacity-50 whitespace-nowrap`,children:_?"Guardando...":"Guardar"})]})]})]})})}function re(){const[a,l]=o.useState([]),[d,t]=o.useState(!0),[m,x]=o.useState(!1),[f,n]=o.useState(null),[p,_]=o.useState("");o.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:u,error:N}=await h.from("roles").select("*").order("nombre");if(N)throw N;l(u||[])}catch(u){console.error("Error cargando roles:",u)}finally{t(!1)}},j=u=>{n(u),x(!0)},c=async u=>{if(confirm("Â¿EstÃ¡s seguro de que deseas eliminar este rol?"))try{const{data:N}=await h.from("usuarios").select("id").eq("rol",a.find(s=>s.id===u)?.nombre);if(N&&N.length>0){alert("No se puede eliminar este rol porque hay usuarios asignados a Ã©l.");return}const{error:g}=await h.from("roles").delete().eq("id",u);if(g)throw g;await w()}catch(N){console.error("Error eliminando rol:",N),alert("Error al eliminar el rol")}},S=a.filter(u=>u.nombre.toLowerCase().includes(p.toLowerCase())||u.descripcion.toLowerCase().includes(p.toLowerCase()));return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar roles...",value:p,onChange:u=>_(u.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("button",{onClick:()=>{n(null),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Rol"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(u=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-shield-user-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.nombre}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Creado: ",new Date(u.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(u),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>c(u.id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:u.descripcion||"Sin descripciÃ³n"}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("span",{className:"text-gray-500",children:["Ãšltima actualizaciÃ³n: ",new Date(u.updated_at).toLocaleDateString()]})})]},u.id))}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-shield-user-line text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay roles"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron roles con los filtros aplicados."})]}),m&&e.jsx(se,{rol:f,onClose:()=>{x(!1),n(null)},onSave:()=>{x(!1),n(null),w()}})]})}function ae({permiso:a,onClose:l,onSave:d}){const[t,m]=o.useState({nombre:"",descripcion:""}),[x,f]=o.useState(!1),[n,p]=o.useState("");o.useEffect(()=>{a&&m({nombre:a.nombre,descripcion:a.descripcion})},[a]);const _=async w=>{w.preventDefault(),p(""),f(!0);try{if(a){const{error:j}=await h.from("permisos").update({nombre:t.nombre,descripcion:t.descripcion,updated_at:new Date().toISOString()}).eq("id",a.id);if(j)throw j}else{const{error:j}=await h.from("permisos").insert([{nombre:t.nombre,descripcion:t.descripcion,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(j)throw j}d()}catch(j){console.error("Error guardando permiso:",j),p(j.message||"Error al guardar el permiso")}finally{f(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?"Editar Permiso":"Nuevo Permiso"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[n&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:n}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Permiso"}),e.jsx("input",{type:"text",required:!0,value:t.nombre,onChange:w=>m({...t,nombre:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"ej: dashboard:read, users:write"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usa formato mÃ³dulo:acciÃ³n (ej: dashboard:read, users:write)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescripciÃ³n"}),e.jsx("textarea",{value:t.descripcion,onChange:w=>m({...t,descripcion:w.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Describe quÃ© permite hacer este permiso..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50 whitespace-nowrap",children:x?"Guardando...":"Guardar"})]})]})]})})}function te(){const[a,l]=o.useState([]),[d,t]=o.useState(!0),[m,x]=o.useState(!1),[f,n]=o.useState(null),[p,_]=o.useState(""),{notification:w,showSuccess:j,showError:c,hideNotification:S}=L();o.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:r,error:b}=await h.from("permisos").select("*").order("nombre");if(b)throw b;l(r||[])}catch(r){console.error("Error cargando permisos:",r)}finally{t(!1)}},N=r=>{n(r),x(!0)},g=async r=>{if(confirm("Â¿EstÃ¡s seguro de que deseas eliminar este permiso?"))try{const{data:b}=await h.from("rol_permisos").select("id").eq("permiso_id",r);if(b&&b.length>0){c("Error","No se puede eliminar este permiso porque estÃ¡ asignado a uno o mÃ¡s roles.");return}const{error:E}=await h.from("permisos").delete().eq("id",r);if(E)throw E;j("Ã‰xito","Permiso eliminado correctamente"),await u()}catch(b){console.error("Error eliminando permiso:",b),c("Error","Error al eliminar el permiso")}},s=a.filter(r=>r.nombre.toLowerCase().includes(p.toLowerCase())||r.descripcion.toLowerCase().includes(p.toLowerCase()));return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar permisos...",value:p,onChange:r=>_(r.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("button",{onClick:()=>{n(null),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Permiso"]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permiso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DescripciÃ³n"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha CreaciÃ³n"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-key-line text-green-600"})}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.nombre})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:r.descripcion||"Sin descripciÃ³n"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>N(r),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>g(r.id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},r.id))})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-key-line text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay permisos"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron permisos con los filtros aplicados."})]})]}),m&&e.jsx(ae,{permiso:f,onClose:()=>{x(!1),n(null)},onSave:()=>{x(!1),n(null),u()}}),e.jsx($,{isOpen:w.isOpen,type:w.type,message:w.message,onClose:S})]})}function ie({onSave:a,className:l=""}){const[d,t]=o.useState([]),[m,x]=o.useState([]),[f,n]=o.useState([]),[p,_]=o.useState(!0),[w,j]=o.useState(!1),[c,S]=o.useState(""),[u,N]=o.useState("all"),[g,s]=o.useState(""),{notification:r,showNotification:b,hideNotification:E}=L();o.useEffect(()=>{k()},[]);const k=async()=>{try{_(!0),s("");const{data:i,error:y}=await h.from("roles").select("*").order("nombre");if(y)throw y;const{data:v,error:z}=await h.from("permisos").select("*").order("nombre");if(z)throw z;const{data:C,error:T}=await h.from("rol_permisos").select("rol_id, permiso_id");if(T)throw T;t(i||[]),x(v||[]),n(C||[])}catch(i){console.error("Error al cargar datos:",i),s("Error al cargar los datos de permisos")}finally{_(!1)}},P=o.useMemo(()=>{const i=new Map;return m.forEach(y=>{const v=y.nombre.split(":")[0];i.has(v)||i.set(v,[]),i.get(v).push(y)}),Array.from(i.entries()).map(([y,v])=>({module:y,permissions:v.sort((z,C)=>z.nombre.localeCompare(C.nombre))}))},[m]),R=o.useMemo(()=>{let i=P;return u!=="all"&&(i=i.filter(y=>y.module===u)),c&&(i=i.map(y=>({...y,permissions:y.permissions.filter(v=>v.nombre.toLowerCase().includes(c.toLowerCase())||v.descripcion.toLowerCase().includes(c.toLowerCase()))})).filter(y=>y.permissions.length>0)),i},[P,u,c]),A=(i,y)=>f.some(v=>v.rol_id===i&&v.permiso_id===y),G=(i,y)=>{const v=A(i,y);n(v?z=>z.filter(C=>!(C.rol_id===i&&C.permiso_id===y)):z=>[...z,{rol_id:i,permiso_id:y}])},O=(i,y)=>{const v=P.find(C=>C.module===y)?.permissions||[];if(v.every(C=>A(i,C.id)))n(C=>C.filter(T=>T.rol_id!==i||!v.some(I=>I.id===T.permiso_id)));else{const C=v.filter(T=>!A(i,T.id)).map(T=>({rol_id:i,permiso_id:T.id}));n(T=>[...T,...C])}},D=(i,y)=>{n(C=>C.filter(T=>T.rol_id!==i));let v=[];switch(y){case"admin":v=m.map(C=>C.nombre);break;case"vendedor":v=["dashboard:view","clientes:view:own","clientes:create","clientes:edit:own","cotizaciones:view:own","cotizaciones:create","cotizaciones:edit:own","cotizaciones:print","pedidos:view:own","pedidos:create","pedidos:edit:own","pedidos:print","productos:view","inventario:view","seguimiento:view:own"];break;case"supervisor":v=["dashboard:view","dashboard:analytics","clientes:view","clientes:create","clientes:edit","clientes:export","cotizaciones:view","cotizaciones:create","cotizaciones:edit","cotizaciones:approve","cotizaciones:reject","cotizaciones:convert","cotizaciones:print","cotizaciones:export","pedidos:view","pedidos:create","pedidos:edit","pedidos:confirm","pedidos:print","productos:view","inventario:view","seguimiento:view","seguimiento:edit","tareas:view","tareas:create","tareas:edit","tareas:assign"];break;case"contador":v=["dashboard:view","dashboard:analytics","dashboard:reports","clientes:view","clientes:export","cotizaciones:view","cotizaciones:export","pedidos:view","pedidos:invoice","pedidos:print","facturas:view","facturas:create","facturas:edit","facturas:send","facturas:cancel","facturas:print","facturas:export","facturas:config","seguimiento:view"];break;case"inventario":v=["dashboard:view","productos:view","productos:create","productos:edit","productos:bom","productos:export","inventario:view","inventario:create","inventario:edit","inventario:adjust","inventario:transfer","inventario:import","inventario:export","inventario:categories","inventario:thresholds","mantenimiento:view","mantenimiento:alerts","mantenimiento:thresholds","mantenimiento:replenishment","mantenimiento:predictions","optimizador:view","optimizador:create","optimizador:optimize","optimizador:export"];break;case"produccion":v=["dashboard:view","pedidos:view","pedidos:print","productos:view","productos:bom","inventario:view","inventario:adjust","seguimiento:view","seguimiento:edit","tareas:view","tareas:edit","tareas:complete","optimizador:view","optimizador:create","optimizador:optimize","optimizador:export"];break;case"lectura":v=["dashboard:view","clientes:view","clientes:export","cotizaciones:view","cotizaciones:print","cotizaciones:export","pedidos:view","pedidos:print","productos:view","inventario:view","facturas:view","facturas:print","facturas:export","seguimiento:view","tareas:view","mantenimiento:view"];break}const z=m.filter(C=>v.includes(C.nombre)).map(C=>({rol_id:i,permiso_id:C.id}));n(C=>[...C,...z])},B=async()=>{try{j(!0),s("");const{error:i}=await h.from("rol_permisos").delete().neq("id",0);if(i)throw i;if(f.length>0){const{error:y}=await h.from("rol_permisos").insert(f);if(y)throw y}b("Permisos guardados correctamente","success"),a?.()}catch(i){console.error("Error al guardar permisos:",i),s("Error al guardar los cambios"),b("Error al guardar los permisos","error")}finally{j(!1)}};return p?e.jsx("div",{className:`bg-white rounded-lg shadow p-6 ${l}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((i,y)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded"},y))})]})}):e.jsxs(e.Fragment,{children:[e.jsx($,{message:r.message,type:r.type,isVisible:r.isVisible,onClose:E}),e.jsxs("div",{className:`bg-white rounded-lg shadow ${l}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Matriz de Permisos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona los permisos por rol de forma visual"})]}),e.jsx("button",{onClick:B,disabled:w,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center whitespace-nowrap",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar Cambios"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Buscar permisos...",value:c,onChange:i=>S(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:u,onChange:i=>N(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"all",children:"Todos los mÃ³dulos"}),P.map(i=>e.jsx("option",{value:i.module,children:i.module.charAt(0).toUpperCase()+i.module.slice(1)},i.module))]})})]}),g&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 text-sm",children:g})]})})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Plantillas RÃ¡pidas"}),e.jsx("div",{className:"space-y-3",children:d.map(i=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:[i.nombre,":"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>D(i.id,"admin"),className:"px-3 py-1.5 text-xs bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 whitespace-nowrap",title:"Acceso total al sistema",children:[e.jsx("i",{className:"ri-admin-line mr-1"}),"Admin"]}),e.jsxs("button",{onClick:()=>D(i.id,"vendedor"),className:"px-3 py-1.5 text-xs bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 whitespace-nowrap",title:"Ventas y cotizaciones propias",children:[e.jsx("i",{className:"ri-user-line mr-1"}),"Vendedor"]}),e.jsxs("button",{onClick:()=>D(i.id,"supervisor"),className:"px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded-lg hover:bg-green-200 whitespace-nowrap",title:"SupervisiÃ³n de ventas y operaciones",children:[e.jsx("i",{className:"ri-shield-user-line mr-1"}),"Supervisor"]}),e.jsxs("button",{onClick:()=>D(i.id,"contador"),className:"px-3 py-1.5 text-xs bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 whitespace-nowrap",title:"FacturaciÃ³n y reportes financieros",children:[e.jsx("i",{className:"ri-calculator-line mr-1"}),"Contador"]}),e.jsxs("button",{onClick:()=>D(i.id,"inventario"),className:"px-3 py-1.5 text-xs bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 whitespace-nowrap",title:"GestiÃ³n de inventario y productos",children:[e.jsx("i",{className:"ri-archive-line mr-1"}),"Inventario"]}),e.jsxs("button",{onClick:()=>D(i.id,"produccion"),className:"px-3 py-1.5 text-xs bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 whitespace-nowrap",title:"ProducciÃ³n, tareas y optimizador",children:[e.jsx("i",{className:"ri-tools-line mr-1"}),"ProducciÃ³n"]}),e.jsxs("button",{onClick:()=>D(i.id,"lectura"),className:"px-3 py-1.5 text-xs bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 whitespace-nowrap",title:"Solo visualizaciÃ³n de datos",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"Solo Lectura"]})]})]},i.id))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10",children:"Permiso"}),d.map(i=>e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:i.nombre},i.id))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(i=>e.jsxs(V.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-medium text-blue-900 sticky left-0 bg-blue-50 z-10",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-folder-line mr-2"}),i.module.charAt(0).toUpperCase()+i.module.slice(1)]})}),d.map(y=>e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("button",{onClick:()=>O(y.id,i.module),className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 whitespace-nowrap",children:"Todo"})},y.id))]}),i.permissions.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 sticky left-0 bg-white z-10",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.nombre}),e.jsx("div",{className:"text-xs text-gray-500",children:y.descripcion})]})}),d.map(v=>e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:A(v.id,y.id),onChange:()=>G(v.id,y.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})},v.id))]},y.id))]},i.module))})]})}),R.length===0&&e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx("i",{className:"ri-search-line text-2xl mb-2"}),e.jsx("p",{children:"No se encontraron permisos que coincidan con los filtros"})]})]})]})}function F({permission:a,role:l,module:d,action:t,children:m,fallback:x=null}){const{hasPermission:f,hasRole:n,canRead:p,canWrite:_,canDelete:w,isAuthenticated:j,loading:c}=J();return!j||c?e.jsx(e.Fragment,{children:x}):(()=>{if(l&&!n(l)||a&&!f(a))return!1;if(d&&t)switch(t){case"read":return p(d);case"write":return _(d);case"delete":return w(d);default:return!1}return!0})()?e.jsx(e.Fragment,{children:m}):e.jsx(e.Fragment,{children:x})}function me(){const[a,l]=o.useState("usuarios"),[d,t]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,x]=o.useState(!1),[f,n]=o.useState(null),p=[{id:"usuarios",name:"Usuarios",icon:"ri-user-line"},{id:"pendientes",name:"Usuarios Pendientes",icon:"ri-time-line",permission:"seguridad:usuarios:view_pendientes"},{id:"roles",name:"Roles",icon:"ri-shield-user-line"},{id:"permisos",name:"Permisos",icon:"ri-key-line"},{id:"matriz",name:"Matriz de Permisos",icon:"ri-grid-line"},{id:"password",name:"Cambiar ContraseÃ±a",icon:"ri-lock-password-line"}],_=async c=>{if(c.preventDefault(),n(null),!d.newPassword||!d.confirmPassword){n({type:"error",text:"Por favor complete todos los campos"});return}if(d.newPassword.length<6){n({type:"error",text:"La contraseÃ±a debe tener al menos 6 caracteres"});return}if(d.newPassword!==d.confirmPassword){n({type:"error",text:"Las contraseÃ±as no coinciden"});return}x(!0);try{const{error:S}=await h.auth.updateUser({password:d.newPassword});if(S)throw S;n({type:"success",text:"ContraseÃ±a actualizada exitosamente"}),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(S){console.error("Error cambiando contraseÃ±a:",S),n({type:"error",text:S.message||"Error al cambiar la contraseÃ±a"})}finally{x(!1)}},w=()=>e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cambiar ContraseÃ±a"}),f&&e.jsx("div",{className:`p-4 rounded-lg mb-4 ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`${f.type==="success"?"ri-check-line":"ri-error-warning-line"} mr-2`}),f.text]})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nueva ContraseÃ±a"}),e.jsx("input",{type:"password",value:d.newPassword,onChange:c=>t(S=>({...S,newPassword:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la nueva contraseÃ±a",minLength:6}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MÃ­nimo 6 caracteres"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Nueva ContraseÃ±a"}),e.jsx("input",{type:"password",value:d.confirmPassword,onChange:c=>t(S=>({...S,confirmPassword:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirme la nueva contraseÃ±a"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors cursor-pointer whitespace-nowrap",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Actualizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-lock-password-line mr-2"}),"Cambiar ContraseÃ±a"]})})]})]})}),j=()=>{switch(a){case"usuarios":return e.jsx(Z,{});case"pendientes":return e.jsx(F,{permission:"seguridad:usuarios:view_pendientes",children:e.jsx(ee,{})});case"roles":return e.jsx(re,{});case"permisos":return e.jsx(te,{});case"matriz":return e.jsx(ie,{onSave:()=>{console.log("Permisos guardados exitosamente")}});case"password":return w();default:return null}};return e.jsx(K,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Seguridad"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona usuarios, roles y permisos del sistema"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:p.map(c=>c.permission?e.jsx(F,{permission:c.permission,children:e.jsxs("button",{onClick:()=>l(c.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex items-center cursor-pointer ${a===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${c.icon} mr-2`}),c.name]})},c.id):e.jsxs("button",{onClick:()=>l(c.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex items-center cursor-pointer ${a===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${c.icon} mr-2`}),c.name]},c.id))})}),e.jsx("div",{className:"mt-6",children:j()})]})})}export{me as default};
//# sourceMappingURL=page-C-9tI3t1.js.map
