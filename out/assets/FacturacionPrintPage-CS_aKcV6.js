import{c as x,r as i,j as e}from"./index-Xz42BvxI.js";import{h}from"./haciendaService-DELQZEI9.js";import{f as a}from"./currency-BmxXlzML.js";function g(){const{id:n}=x(),[s,c]=i.useState(null),[d,l]=i.useState(!0);i.useEffect(()=>{n&&o(parseInt(n))},[n]),i.useEffect(()=>{const r=setTimeout(()=>{window.print()},1e3);return()=>clearTimeout(r)},[s]);const o=async r=>{try{const t=await h.getFacturaById(r);c(t)}catch(t){console.error("Error cargando factura:",t)}finally{l(!1)}},m=r=>new Date(r).toLocaleDateString("es-CR",{year:"numeric",month:"long",day:"numeric"});return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando factura..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("style",{children:`
        @media print {
          .no-print { display: none !important; }
          .print-page { page-break-inside: avoid; }
          .print-section { page-break-inside: avoid; }
          body { margin: 0; padding: 20px; }
        }
      `}),e.jsxs("div",{className:"no-print fixed top-4 right-4 space-x-2 z-10",children:[e.jsxs("button",{onClick:()=>window.print(),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-printer-line mr-2"}),"Imprimir"]}),e.jsxs("button",{onClick:()=>window.close(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Cerrar"]})]}),e.jsxs("div",{className:"max-w-4xl mx-auto p-8 print-page",children:[e.jsxs("div",{className:"print-section mb-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-orange-600",style:{fontFamily:"Pacifico, serif"},children:"OLO"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Gestión Empresarial"}),e.jsx("p",{className:"text-sm text-gray-500",children:"San José, Costa Rica"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tel: (506) 2205-2525"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Email: info@olo.cr"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"FACTURA ELECTRÓNICA"}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Consecutivo:"}),e.jsx("p",{className:"font-bold text-lg",children:s.consecutivo}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Clave:"}),e.jsx("p",{className:"font-mono text-xs break-all",children:s.clave})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"print-section",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 border-b border-gray-200 pb-2",children:"Información del Cliente"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nombre:"})," ",s.cliente?.razon_social||s.cliente?.nombre_completo||"Cliente Ejemplo S.A."]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Identificación:"})," ",s.cliente?.identificacion||"3-101-2562-32"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.cliente?.correo||"cliente@ejemplo.com"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",s.cliente?.telefono||"2205-2525"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dirección:"})," ",s.cliente?.direccion||"San José, Costa Rica"]})]})]}),e.jsxs("div",{className:"print-section",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 border-b border-gray-200 pb-2",children:"Información de la Factura"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fecha de Emisión:"})," ",m(s.fecha_emision)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Condición de Venta:"})," ",s.condicion_venta==="01"?"Contado":"Crédito"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Medio de Pago:"})," ",s.medio_pago==="01"?"Efectivo":"Otro"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Moneda:"})," ",s.moneda]}),s.plazo_credito>0&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Plazo de Crédito:"})," ",s.plazo_credito," días"]})]})]})]})]}),e.jsxs("div",{className:"print-section mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2",children:"Detalle de Productos y Servicios"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:"Código"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:"Descripción"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center text-sm font-medium",children:"Cantidad"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center text-sm font-medium",children:"Unidad"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right text-sm font-medium",children:"Precio Unit."}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right text-sm font-medium",children:"Descuento"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right text-sm font-medium",children:"Impuesto"}),e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right text-sm font-medium",children:"Total"})]})}),e.jsx("tbody",{children:s.lineas?.map((r,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:r.codigo_articulo||"N/A"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:r.descripcion}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-sm",children:r.cantidad}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-sm",children:r.unidad_medida}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right text-sm",children:a(r.precio_unitario)}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right text-sm",children:a(r.descuento_monto)}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right text-sm",children:a(r.impuesto_monto)}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right text-sm font-medium",children:a(r.total_linea)})]},t))})]})})]}),e.jsx("div",{className:"print-section mb-8",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"w-80",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Subtotal:"}),e.jsx("span",{children:a(s.subtotal)})]}),s.descuento_total>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{className:"font-medium",children:"Descuento:"}),e.jsxs("span",{children:["-",a(s.descuento_total)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Impuesto:"}),e.jsx("span",{children:a(s.impuesto_total)})]}),e.jsx("div",{className:"border-t border-gray-300 pt-2",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-orange-600",children:a(s.total)})]})})]})})})})}),e.jsx("div",{className:"print-section mb-8",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 border-b border-gray-200 pb-2",children:"Estado del Documento"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Estado Local:"})," ",s.estado_local]}),s.estado_hacienda&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Estado Hacienda:"})," ",s.estado_hacienda]})]})]}),s.observaciones&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 border-b border-gray-200 pb-2",children:"Observaciones"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.observaciones})]})]})}),e.jsx("div",{className:"print-section border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Este documento es una representación impresa de la factura electrónica"}),e.jsxs("p",{children:["Clave: ",s.clave]}),e.jsx("p",{className:"mt-2",children:"Generado por OLO - Sistema de Gestión Empresarial"})]})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-file-warning-line text-6xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Factura no encontrada"})]})})}export{g as default};
//# sourceMappingURL=FacturacionPrintPage-CS_aKcV6.js.map
