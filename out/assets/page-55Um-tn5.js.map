{"version":3,"file":"page-55Um-tn5.js","sources":["../../src/pages/tabla-datos-tareas/components/TablaDatosFiltros.tsx","../../src/pages/tabla-datos-tareas/components/TotalesClientesCard.tsx","../../src/pages/tabla-datos-tareas/components/TablaPorEstado.tsx","../../src/pages/tabla-datos-tareas/components/TablaDatosLayout.tsx","../../src/services/tablaDatosTareasService.ts","../../src/pages/tabla-datos-tareas/page.tsx"],"sourcesContent":["import { useState } from 'react';\nimport type { FiltrosTablaDatos } from '../../../types/tablaDatosTareas';\n\ninterface TablaDatosFiltrosProps {\n  filtros: FiltrosTablaDatos;\n  onFiltroChange: (filtros: FiltrosTablaDatos) => void;\n}\n\nexport default function TablaDatosFiltros({ filtros, onFiltroChange }: TablaDatosFiltrosProps) {\n  const [busqueda, setBusqueda] = useState(filtros.busqueda || '');\n  const [fechaInicio, setFechaInicio] = useState(filtros.fecha_inicio_desde || '');\n  const [fechaCierre, setFechaCierre] = useState(filtros.fecha_cierre_hasta || '');\n  const [estado, setEstado] = useState(filtros.estado || '');\n  const [cliente, setCliente] = useState(filtros.cliente || '');\n\n  const handleAplicarFiltros = () => {\n    onFiltroChange({\n      busqueda,\n      fecha_inicio_desde: fechaInicio,\n      fecha_cierre_hasta: fechaCierre,\n      estado,\n      cliente\n    });\n  };\n\n  const handleLimpiarFiltros = () => {\n    setBusqueda('');\n    setFechaInicio('');\n    setFechaCierre('');\n    setEstado('');\n    setCliente('');\n    onFiltroChange({\n      busqueda: '',\n      fecha_inicio_desde: '',\n      fecha_cierre_hasta: '',\n      estado: '',\n      cliente: ''\n    });\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n        {/* Búsqueda global */}\n        <div className=\"lg:col-span-2\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Buscar en todas las tablas...\n          </label>\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              value={busqueda}\n              onChange={(e) => setBusqueda(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleAplicarFiltros()}\n              placeholder=\"Caso, cliente, solicitante...\"\n              className=\"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/80 backdrop-blur-sm\"\n            />\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n          </div>\n        </div>\n\n        {/* Fecha inicio desde */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Inicio desde\n          </label>\n          <input\n            type=\"date\"\n            value={fechaInicio}\n            onChange={(e) => setFechaInicio(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/80 backdrop-blur-sm\"\n          />\n        </div>\n\n        {/* Fecha cierre hasta */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Cierre hasta\n          </label>\n          <input\n            type=\"date\"\n            value={fechaCierre}\n            onChange={(e) => setFechaCierre(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/80 backdrop-blur-sm\"\n          />\n        </div>\n\n        {/* Estado */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Estado\n          </label>\n          <select\n            value={estado}\n            onChange={(e) => setEstado(e.target.value)}\n            className=\"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/80 backdrop-blur-sm\"\n          >\n            <option value=\"\">Todos los estados</option>\n            <option value=\"En Cola\">En Cola</option>\n            <option value=\"En Proceso\">En Proceso</option>\n            <option value=\"Produciendo\">Produciendo</option>\n            <option value=\"Esperando suministros\">Esperando suministros</option>\n            <option value=\"Terminado\">Terminado</option>\n            <option value=\"Finalizado\">Finalizado</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Botones de acción */}\n      <div className=\"flex items-center gap-3 mt-4\">\n        <button\n          onClick={handleAplicarFiltros}\n          className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-filter-line mr-2\"></i>\n          Aplicar Filtros\n        </button>\n        <button\n          onClick={handleLimpiarFiltros}\n          className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-close-line mr-2\"></i>\n          Limpiar\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { formatCurrency } from '../../../lib/currency';\nimport type { TotalesPorCliente } from '../../../types/tablaDatosTareas';\n\ninterface TotalesClientesCardProps {\n  totalesPorCliente: TotalesPorCliente[];\n  totalGeneral: number;\n}\n\nexport default function TotalesClientesCard({ totalesPorCliente, totalGeneral }: TotalesClientesCardProps) {\n  const [mostrarTodos, setMostrarTodos] = useState(false);\n\n  const clientesMostrar = mostrarTodos ? totalesPorCliente : totalesPorCliente.slice(0, 5);\n\n  return (\n    <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow-sm border border-blue-200 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h2 className=\"text-xl font-bold text-gray-900\">Totales por cliente</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Resumen de producción por cliente\n          </p>\n        </div>\n        <div className=\"text-right\">\n          <p className=\"text-sm text-gray-600\">Total General</p>\n          <p className=\"text-3xl font-bold text-blue-600\">\n            {formatCurrency(totalGeneral)}\n          </p>\n        </div>\n      </div>\n\n      {totalesPorCliente.length === 0 ? (\n        <div className=\"text-center text-gray-500 py-8\">\n          <i className=\"ri-inbox-line text-4xl text-gray-300 mb-2\"></i>\n          <p>No hay datos de clientes disponibles</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider\">\n                    Cliente\n                  </th>\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider\">\n                    Total ₡\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {clientesMostrar.map((cliente, index) => (\n                  <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\n                    <td className=\"px-6 py-4 text-sm font-medium text-gray-900\">\n                      {cliente.cliente}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm font-semibold text-gray-900 text-right\">\n                      {formatCurrency(cliente.total)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {totalesPorCliente.length > 5 && (\n            <div className=\"flex items-center justify-between mt-4\">\n              <p className=\"text-sm text-gray-600\">\n                Mostrando {clientesMostrar.length} de {totalesPorCliente.length} clientes\n              </p>\n              <button\n                onClick={() => setMostrarTodos(!mostrarTodos)}\n                className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-lg hover:bg-blue-200 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className={`${mostrarTodos ? 'ri-eye-off-line' : 'ri-eye-line'}`}></i>\n                {mostrarTodos ? 'Ver menos' : 'Ver todos'}\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { formatCurrency } from '../../../lib/currency';\nimport type { TareaAnalisis } from '../../../types/tablaDatosTareas';\n\ninterface TablaPorEstadoProps {\n  estado: string;\n  tareas: TareaAnalisis[];\n}\n\nexport default function TablaPorEstado({ estado, tareas }: TablaPorEstadoProps) {\n  const [itemsExpandidos, setItemsExpandidos] = useState<Set<string>>(new Set());\n\n  const toggleItems = (tareaId: string) => {\n    const nuevosExpandidos = new Set(itemsExpandidos);\n    if (nuevosExpandidos.has(tareaId)) {\n      nuevosExpandidos.delete(tareaId);\n    } else {\n      nuevosExpandidos.add(tareaId);\n    }\n    setItemsExpandidos(nuevosExpandidos);\n  };\n\n  // Color del badge según el estado\n  const getEstadoColor = (estado: string) => {\n    switch (estado) {\n      case 'En Cola':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-300';\n      case 'En Proceso':\n        return 'bg-blue-100 text-blue-800 border-blue-300';\n      case 'Produciendo':\n        return 'bg-purple-100 text-purple-800 border-purple-300';\n      case 'Esperando suministros':\n        return 'bg-orange-100 text-orange-800 border-orange-300';\n      case 'Terminado':\n        return 'bg-green-100 text-green-800 border-green-300';\n      case 'Finalizado':\n        return 'bg-gray-100 text-gray-800 border-gray-300';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-300';\n    }\n  };\n\n  // Obtener color para cada categoría\n  const getCategoriaColor = (categoria: string) => {\n    switch (categoria) {\n      case 'HH':\n        return 'bg-blue-50 border-blue-200 text-blue-900';\n      case 'ETIQUETAS':\n        return 'bg-green-50 border-green-200 text-green-900';\n      case 'DEDICADOS':\n        return 'bg-purple-50 border-purple-200 text-purple-900';\n      case 'EMBALAJE':\n        return 'bg-orange-50 border-orange-200 text-orange-900';\n      case 'MAQUINA':\n        return 'bg-red-50 border-red-200 text-red-900';\n      case 'HABLADORES':\n        return 'bg-pink-50 border-pink-200 text-pink-900';\n      case 'REMPAQUE':\n        return 'bg-indigo-50 border-indigo-200 text-indigo-900';\n      case 'BOLSAS':\n        return 'bg-teal-50 border-teal-200 text-teal-900';\n      default:\n        return 'bg-gray-50 border-gray-200 text-gray-900';\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n      {/* Header del estado */}\n      <div className={`px-6 py-4 border-b border-gray-200 ${getEstadoColor(estado)} bg-opacity-30`}>\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-bold text-gray-900\">\n            {estado}\n          </h3>\n          <span className={`px-3 py-1 text-sm font-medium rounded-full border ${getEstadoColor(estado)}`}>\n            {tareas.length} {tareas.length === 1 ? 'tarea' : 'tareas'}\n          </span>\n        </div>\n      </div>\n\n      {/* Tabla */}\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Caso\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Solicitante\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Cliente\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Descripción\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Inicio\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Cierre\n              </th>\n              <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Personas\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Responsable\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Entregado a\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Observaciones VA\n              </th>\n              <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                Items\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200\">\n            {tareas.map((tarea) => {\n              const itemsExpandido = itemsExpandidos.has(tarea.id);\n              \n              return (\n                <>\n                  {/* Fila principal */}\n                  <tr key={tarea.id} className=\"hover:bg-gray-50 transition-colors\">\n                    <td className=\"px-4 py-3 text-sm font-medium text-gray-900 whitespace-nowrap\">\n                      {tarea.caso}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.solicitante}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.cliente}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 max-w-xs truncate\">\n                      {tarea.descripcion}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.inicio ? new Date(tarea.inicio).toLocaleDateString() : '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.cierre ? new Date(tarea.cierre).toLocaleDateString() : '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 text-center whitespace-nowrap\">\n                      {tarea.cantidad_personas || 0}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.responsable}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 whitespace-nowrap\">\n                      {tarea.entregado_a || '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 max-w-xs truncate\">\n                      {tarea.observaciones_va || '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-center whitespace-nowrap\">\n                      <button\n                        onClick={() => toggleItems(tarea.id)}\n                        className=\"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded hover:bg-blue-200 transition-colors cursor-pointer whitespace-nowrap\"\n                      >\n                        <i className={`${itemsExpandido ? 'ri-eye-off-line' : 'ri-eye-line'} mr-1`}></i>\n                        {itemsExpandido ? 'Ocultar' : 'Ver'}\n                      </button>\n                    </td>\n                  </tr>\n\n                  {/* Fila expandida con items */}\n                  {itemsExpandido && (\n                    <tr>\n                      <td colSpan={11} className=\"px-4 py-4 bg-gray-50\">\n                        <div className=\"space-y-3\">\n                          <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">\n                            Detalle de Items\n                          </h4>\n                          \n                          {tarea.items.length === 0 ? (\n                            <p className=\"text-sm text-gray-500 italic\">\n                              No hay items registrados para esta tarea\n                            </p>\n                          ) : (\n                            <>\n                              <div className=\"overflow-x-auto\">\n                                <table className=\"w-full border border-gray-200 rounded-lg\">\n                                  <thead className=\"bg-white\">\n                                    <tr>\n                                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Descripción\n                                      </th>\n                                      <th className=\"px-4 py-2 text-center text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Categoría\n                                      </th>\n                                      <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Cantidad\n                                      </th>\n                                      <th className=\"px-4 py-2 text-center text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Unidad\n                                      </th>\n                                      <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Costo Unitario\n                                      </th>\n                                      <th className=\"px-4 py-2 text-right text-xs font-medium text-gray-700 border-b border-gray-200\">\n                                        Costo Total\n                                      </th>\n                                    </tr>\n                                  </thead>\n                                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                                    {tarea.items.map((item) => (\n                                      <tr key={item.id} className=\"hover:bg-gray-50\">\n                                        <td className=\"px-4 py-2 text-sm text-gray-900\">\n                                          {item.descripcion}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-center\">\n                                          <span className={`inline-block px-2 py-1 text-xs font-medium rounded border ${getCategoriaColor(item.categoria)}`}>\n                                            {item.categoria}\n                                          </span>\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 text-right\">\n                                          {item.cantidad.toLocaleString()}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-center\">\n                                          <span className=\"inline-block px-2 py-1 text-xs font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded\">\n                                            {item.unidad_medida || 'u'}\n                                          </span>\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 text-right\">\n                                          {formatCurrency(item.costo_unitario)}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm font-medium text-gray-900 text-right\">\n                                          {formatCurrency(item.costo_total)}\n                                        </td>\n                                      </tr>\n                                    ))}\n                                  </tbody>\n                                  <tfoot className=\"bg-gray-50 border-t-2 border-gray-300\">\n                                    <tr>\n                                      <td colSpan={5} className=\"px-4 py-2 text-sm font-bold text-gray-900 text-right\">\n                                        Total General:\n                                      </td>\n                                      <td className=\"px-4 py-2 text-sm font-bold text-blue-600 text-right\">\n                                        {formatCurrency(tarea.total_general)}\n                                      </td>\n                                    </tr>\n                                  </tfoot>\n                                </table>\n                              </div>\n\n                              {/* Resumen por categorías - DINÁMICO */}\n                              <div className=\"mt-4\">\n                                <h5 className=\"text-sm font-semibold text-gray-900 mb-3\">\n                                  Totales por Categoría\n                                </h5>\n                                \n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\">\n                                  {Object.entries(tarea.totales_por_categoria || {})\n                                    .sort(([a], [b]) => a.localeCompare(b))\n                                    .map(([categoria, total]) => (\n                                      <div \n                                        key={categoria} \n                                        className={`border rounded-lg p-3 ${getCategoriaColor(categoria)}`}\n                                      >\n                                        <p className=\"text-xs font-medium mb-1\">{categoria}</p>\n                                        <p className=\"text-lg font-bold\">\n                                          {formatCurrency(total)}\n                                        </p>\n                                        \n                                        {/* Alerta de HH si existe */}\n                                        {categoria === 'HH' && tarea.alerta_hh && (\n                                          <div className=\"mt-2 p-2 bg-yellow-50 border border-yellow-300 rounded text-xs text-yellow-800\">\n                                            <i className=\"ri-alert-line mr-1\"></i>\n                                            {tarea.alerta_hh}\n                                          </div>\n                                        )}\n                                      </div>\n                                    ))}\n                                  \n                                  {/* Total General */}\n                                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                                    <p className=\"text-xs text-blue-700 font-medium mb-1\">TOTAL GENERAL</p>\n                                    <p className=\"text-lg font-bold text-blue-600\">\n                                      {formatCurrency(tarea.total_general)}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            </>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  )}\n                </>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport TablaDatosFiltros from './TablaDatosFiltros';\nimport TotalesClientesCard from './TotalesClientesCard';\nimport TablaPorEstado from './TablaPorEstado';\nimport type { TareaAnalisis, FiltrosTablaDatos, TotalesPorCliente } from '../../../types/tablaDatosTareas';\n\ninterface TablaDatosLayoutProps {\n  tareas: TareaAnalisis[];\n  totalesPorCliente: TotalesPorCliente[];\n  totalGeneral: number;\n  loading: boolean;\n  filtros: FiltrosTablaDatos;\n  onFiltroChange: (filtros: FiltrosTablaDatos) => void;\n  onExportarExcel: () => void;\n  onRefresh: () => void;\n}\n\nexport default function TablaDatosLayout({\n  tareas,\n  totalesPorCliente,\n  totalGeneral,\n  loading,\n  filtros,\n  onFiltroChange,\n  onExportarExcel,\n  onRefresh\n}: TablaDatosLayoutProps) {\n  \n  // Agrupar tareas por estado\n  const tareasPorEstado = tareas.reduce((acc, tarea) => {\n    if (!acc[tarea.estado]) {\n      acc[tarea.estado] = [];\n    }\n    acc[tarea.estado].push(tarea);\n    return acc;\n  }, {} as Record<string, TareaAnalisis[]>);\n\n  // Estados disponibles\n  const estados = Object.keys(tareasPorEstado).sort();\n\n  return (\n    <div className=\"flex-1 overflow-y-auto\">\n      <div className=\"max-w-[1600px] mx-auto p-6 space-y-6\">\n        {/* Header con logo y título */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 bg-teal-500 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-xl\" style={{ fontFamily: '\"Pacifico\", serif' }}>\n                  O\n                </span>\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">\n                  CRM Valor Agregado - Tabla de datos Tareas\n                </h1>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  Análisis EDA de producción y productividad\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={onRefresh}\n                disabled={loading}\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-refresh-line mr-2\"></i>\n                Actualizar\n              </button>\n              <button\n                onClick={onExportarExcel}\n                disabled={loading}\n                className=\"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-file-excel-2-line mr-2\"></i>\n                Descargar Excel\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Filtros */}\n        <TablaDatosFiltros\n          filtros={filtros}\n          onFiltroChange={onFiltroChange}\n        />\n\n        {/* Totales por Cliente */}\n        <TotalesClientesCard\n          totalesPorCliente={totalesPorCliente}\n          totalGeneral={totalGeneral}\n        />\n\n        {/* Tablas por Estado */}\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"text-center\">\n              <i className=\"ri-loader-4-line text-4xl text-blue-600 animate-spin mb-4\"></i>\n              <p className=\"text-gray-600\">Cargando datos...</p>\n            </div>\n          </div>\n        ) : estados.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\">\n            <i className=\"ri-inbox-line text-6xl text-gray-300 mb-4\"></i>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              No hay datos disponibles\n            </h3>\n            <p className=\"text-gray-500\">\n              No se encontraron tareas con los filtros aplicados\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {estados.map(estado => (\n              <TablaPorEstado\n                key={estado}\n                estado={estado}\n                tareas={tareasPorEstado[estado]}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { supabase } from '../lib/supabase';\nimport * as XLSX from 'xlsx';\nimport type { \n  TareaAnalisis, \n  FiltrosTablaDatos, \n  TotalesPorCliente,\n  ItemTarea \n} from '../types/tablaDatosTareas';\n\n/**\n * Servicio para análisis EDA de tareas\n * Centraliza datos de producción y productividad\n */\nclass TablaDatosTareasService {\n  \n  /**\n   * Obtener tareas para análisis con totales por categoría\n   */\n  async getTareasAnalisis(filtros?: FiltrosTablaDatos): Promise<TareaAnalisis[]> {\n    try {\n      // Construir query base - Solo columnas que existen en la tabla\n      let query = supabase\n        .from('tareas')\n        .select(`\n          id,\n          consecutivo,\n          descripcion_breve,\n          fecha_inicio,\n          fecha_cierre,\n          estado,\n          entregado_a,\n          solicitante_id,\n          email_solicitante,\n          datos_formulario\n        `)\n        .order('consecutivo', { ascending: false });\n\n      // Aplicar filtros\n      if (filtros?.busqueda) {\n        query = query.or(`consecutivo.ilike.%${filtros.busqueda}%,descripcion_breve.ilike.%${filtros.busqueda}%`);\n      }\n\n      if (filtros?.fecha_inicio) {\n        query = query.gte('fecha_inicio', filtros.fecha_inicio);\n      }\n\n      if (filtros?.fecha_fin) {\n        query = query.lte('fecha_cierre', filtros.fecha_fin);\n      }\n\n      if (filtros?.estado) {\n        query = query.eq('estado', filtros.estado);\n      }\n\n      const { data: tareasData, error: tareasError } = await query;\n\n      if (tareasError) {\n        throw tareasError;\n      }\n\n      // Procesar cada tarea\n      const tareasAnalisis: TareaAnalisis[] = [];\n\n      for (const tarea of tareasData || []) {\n        // Obtener nombre del cliente desde datos_formulario\n        const nombreCliente = (tarea.datos_formulario as any)?.cliente || 'Sin cliente';\n\n        // Obtener solicitante desde datos_formulario o email\n        const solicitante = (tarea.datos_formulario as any)?.solicitante || tarea.email_solicitante || 'Sin solicitante';\n\n        // Obtener responsable desde datos_formulario\n        const responsable = (tarea.datos_formulario as any)?.responsable || 'Sin asignar';\n\n        // Obtener items de la tarea\n        const { data: itemsData, error: itemsError } = await supabase\n          .from('tareas_items')\n          .select(`\n            id,\n            descripcion,\n            cantidad,\n            costo_unitario,\n            costo_total\n          `)\n          .eq('tarea_id', tarea.id);\n\n        if (itemsError) {\n          continue;\n        }\n\n        // Para cada item, buscar en inventario por descripción\n        const items: ItemTarea[] = [];\n        const totalesPorCategoria: Record<string, number> = {};\n        \n        for (const item of itemsData || []) {\n          let categoriaNombre = 'OTROS';\n          let codigoArticulo: string | null = null;\n          let unidadMedida: string | null = null;\n\n          // Buscar en inventario por descripción exacta\n          const { data: inventarioData, error: inventarioError } = await supabase\n            .from('inventario')\n            .select(`\n              id_articulo,\n              codigo_articulo,\n              descripcion_articulo,\n              categoria_id,\n              unidad_base_id\n            `)\n            .eq('descripcion_articulo', item.descripcion)\n            .single();\n\n          if (inventarioError) {\n            // Intentar búsqueda parcial (ILIKE)\n            const { data: inventarioDataPartial, error: inventarioErrorPartial } = await supabase\n              .from('inventario')\n              .select(`\n                id_articulo,\n                codigo_articulo,\n                descripcion_articulo,\n                categoria_id,\n                unidad_base_id\n              `)\n              .ilike('descripcion_articulo', `%${item.descripcion}%`)\n              .limit(1)\n              .single();\n\n            if (!inventarioErrorPartial && inventarioDataPartial) {\n              codigoArticulo = inventarioDataPartial.codigo_articulo;\n\n              // Buscar categoría\n              if (inventarioDataPartial.categoria_id) {\n                const { data: categoriaData, error: categoriaError } = await supabase\n                  .from('categorias_inventario')\n                  .select('nombre_categoria')\n                  .eq('id_categoria', inventarioDataPartial.categoria_id)\n                  .single();\n\n                if (!categoriaError && categoriaData) {\n                  categoriaNombre = categoriaData.nombre_categoria;\n                }\n              }\n\n              // Buscar unidad de medida\n              if (inventarioDataPartial.unidad_base_id) {\n                const { data: unidadData, error: unidadError } = await supabase\n                  .from('unidades_medida')\n                  .select('simbolo')\n                  .eq('id', inventarioDataPartial.unidad_base_id)\n                  .single();\n\n                if (!unidadError && unidadData) {\n                  unidadMedida = unidadData.simbolo;\n                }\n              }\n            }\n          } else if (inventarioData) {\n            codigoArticulo = inventarioData.codigo_articulo;\n\n            // Buscar categoría\n            if (inventarioData.categoria_id) {\n              const { data: categoriaData, error: categoriaError } = await supabase\n                .from('categorias_inventario')\n                .select('nombre_categoria')\n                .eq('id_categoria', inventarioData.categoria_id)\n                .single();\n\n              if (!categoriaError && categoriaData) {\n                categoriaNombre = categoriaData.nombre_categoria;\n              }\n            }\n\n            // Buscar unidad de medida\n            if (inventarioData.unidad_base_id) {\n              const { data: unidadData, error: unidadError } = await supabase\n                .from('unidades_medida')\n                .select('simbolo')\n                .eq('id', inventarioData.unidad_base_id)\n                .single();\n\n              if (!unidadError && unidadData) {\n                unidadMedida = unidadData.simbolo;\n              }\n            }\n          }\n\n          // Agregar item procesado\n          items.push({\n            id: item.id,\n            descripcion: item.descripcion,\n            codigo_articulo: codigoArticulo,\n            categoria: categoriaNombre,\n            unidad_medida: unidadMedida,\n            cantidad: item.cantidad,\n            costo_unitario: item.costo_unitario,\n            costo_total: item.costo_total,\n          });\n\n          // Acumular total por categoría\n          if (!totalesPorCategoria[categoriaNombre]) {\n            totalesPorCategoria[categoriaNombre] = 0;\n          }\n          totalesPorCategoria[categoriaNombre] += item.costo_total;\n        }\n\n        // Calcular total general\n        const totalGeneral = Object.values(totalesPorCategoria).reduce((sum, val) => sum + val, 0);\n\n        // Validar HH si existe\n        let alertaHH: string | undefined;\n        if (totalesPorCategoria['HH'] && tarea.fecha_inicio && tarea.fecha_cierre) {\n          const fechaInicio = new Date(tarea.fecha_inicio);\n          const fechaCierre = new Date(tarea.fecha_cierre);\n          const tiempoRealHoras = (fechaCierre.getTime() - fechaInicio.getTime()) / (1000 * 60 * 60);\n          \n          // Calcular horas teóricas desde los items HH\n          const itemsHH = items.filter(i => i.categoria === 'HH');\n          const horasTeoricasTotal = itemsHH.reduce((sum, i) => sum + i.cantidad, 0);\n\n          if (horasTeoricasTotal > 0) {\n            const diferenciaPorcentaje = Math.abs(tiempoRealHoras - horasTeoricasTotal) / horasTeoricasTotal * 100;\n\n            if (diferenciaPorcentaje > 30) {\n              alertaHH = `⚠️ Las horas cargadas en HH (${horasTeoricasTotal.toFixed(1)}h) difieren ${diferenciaPorcentaje.toFixed(0)}% del tiempo real (${tiempoRealHoras.toFixed(1)}h). Revisar.`;\n            }\n          }\n        }\n\n        // Agregar tarea procesada\n        tareasAnalisis.push({\n          id: tarea.id,\n          caso: tarea.consecutivo,\n          cliente: nombreCliente,\n          descripcion: tarea.descripcion_breve || '',\n          solicitante: solicitante,\n          inicio: tarea.fecha_inicio,\n          cierre: tarea.fecha_cierre,\n          cantidad_personas: 0,\n          responsable: responsable,\n          entregado_a: tarea.entregado_a || '',\n          observaciones_va: tarea.descripcion_breve || '',\n          estado: tarea.estado,\n          items,\n          totales_por_categoria: totalesPorCategoria,\n          total_general: totalGeneral,\n          alerta_hh: alertaHH,\n          dedicados: totalesPorCategoria['DEDICADOS'] || 0,\n          etiquetas: totalesPorCategoria['ETIQUETAS'] || 0,\n          hh: totalesPorCategoria['HH'] || 0,\n        });\n      }\n\n      return tareasAnalisis;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  /**\n   * Obtener totales por cliente\n   */\n  async getTotalesPorCliente(filtros?: FiltrosTablaDatos): Promise<TotalesPorCliente[]> {\n    try {\n      const tareas = await this.getTareasAnalisis(filtros);\n      \n      // Agrupar por cliente\n      const totalesPorCliente = tareas.reduce((acc, tarea) => {\n        const cliente = tarea.cliente;\n        if (!acc[cliente]) {\n          acc[cliente] = 0;\n        }\n        acc[cliente] += tarea.total_general;\n        return acc;\n      }, {} as Record<string, number>);\n\n      // Convertir a array y ordenar por total descendente\n      const resultado: TotalesPorCliente[] = Object.entries(totalesPorCliente)\n        .map(([cliente, total]) => ({ cliente, total }))\n        .sort((a, b) => b.total - a.total);\n\n      return resultado;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  /**\n   * Exportar datos a Excel con formato inteligente\n   * - Una hoja por estado\n   * - Columnas fijas + columnas dinámicas por categoría\n   * - Respeta filtros activos\n   */\n  async exportarExcel(filtros?: FiltrosTablaDatos): Promise<void> {\n    try {\n      // Obtener tareas filtradas\n      const tareas = await this.getTareasAnalisis(filtros);\n      \n      if (tareas.length === 0) {\n        alert('No hay datos para exportar con los filtros aplicados');\n        return;\n      }\n\n      // Agrupar tareas por estado\n      const tareasPorEstado = tareas.reduce((acc, tarea) => {\n        if (!acc[tarea.estado]) {\n          acc[tarea.estado] = [];\n        }\n        acc[tarea.estado].push(tarea);\n        return acc;\n      }, {} as Record<string, TareaAnalisis[]>);\n\n      const estados = Object.keys(tareasPorEstado).sort();\n\n      // Obtener todas las categorías únicas de todas las tareas\n      const categoriasSet = new Set<string>();\n      tareas.forEach(tarea => {\n        Object.keys(tarea.totales_por_categoria || {}).forEach(categoria => {\n          categoriasSet.add(categoria);\n        });\n      });\n      const categorias = Array.from(categoriasSet).sort();\n\n      // Crear libro de Excel\n      const wb = XLSX.utils.book_new();\n\n      // Crear una hoja por cada estado\n      estados.forEach(estado => {\n        const tareasEstado = tareasPorEstado[estado];\n\n        // Preparar datos para esta hoja\n        const datosHoja = tareasEstado.map(tarea => {\n          // Columnas fijas\n          const fila: any = {\n            'Caso': tarea.consecutivo,\n            'Cliente': tarea.cliente,\n            'Descripción': tarea.descripcion,\n            'Solicitante': tarea.solicitante,\n            'Inicio': tarea.fecha_inicio ? this.formatearFecha(tarea.fecha_inicio) : '',\n            'Cierre': tarea.fecha_cierre ? this.formatearFecha(tarea.fecha_cierre) : '',\n            'Responsable': tarea.responsable,\n            'Entregado a': tarea.entregado_a,\n            'Observaciones VA': tarea.observaciones_va\n          };\n\n          // Columnas dinámicas por categoría\n          categorias.forEach(categoria => {\n            const totalCategoria = tarea.totales_por_categoria?.[categoria] || 0;\n            fila[categoria] = totalCategoria;\n          });\n\n          // Columna Total General\n          fila['Total General'] = tarea.total_general;\n\n          return fila;\n        });\n\n        // Crear hoja\n        const ws = XLSX.utils.json_to_sheet(datosHoja);\n\n        // Configurar anchos de columna\n        const colWidths = [\n          { wch: 15 },  // Caso\n          { wch: 25 },  // Cliente\n          { wch: 40 },  // Descripción\n          { wch: 30 },  // Solicitante\n          { wch: 12 },  // Inicio\n          { wch: 12 },  // Cierre\n          { wch: 25 },  // Responsable\n          { wch: 25 },  // Entregado a\n          { wch: 40 },  // Observaciones VA\n          ...categorias.map(() => ({ wch: 15 })), // Categorías dinámicas\n          { wch: 15 }   // Total General\n        ];\n        ws['!cols'] = colWidths;\n\n        // Aplicar formato de moneda a las columnas de categorías y total\n        const range = XLSX.utils.decode_range(ws['!ref'] || 'A1');\n        const columnasMoneda = categorias.length + 1; // +1 para Total General\n        const primeraColumnaMoneda = 9; // Después de \"Observaciones VA\"\n\n        for (let R = range.s.r + 1; R <= range.e.r; ++R) {\n          for (let C = primeraColumnaMoneda; C < primeraColumnaMoneda + columnasMoneda; ++C) {\n            const cellAddress = XLSX.utils.encode_cell({ r: R, c: C });\n            if (ws[cellAddress]) {\n              ws[cellAddress].z = '₡#,##0.00';\n            }\n          }\n        }\n\n        // Agregar hoja al libro (nombre de hoja limitado a 31 caracteres)\n        const nombreHoja = estado.substring(0, 31);\n        XLSX.utils.book_append_sheet(wb, ws, nombreHoja);\n      });\n\n      // Generar nombre de archivo con fecha y filtros\n      const fecha = new Date().toISOString().split('T')[0];\n      let nombreArchivo = `analisis_tareas_${fecha}`;\n      \n      if (filtros?.estado) {\n        nombreArchivo += `_${filtros.estado}`;\n      }\n      if (filtros?.cliente_id) {\n        nombreArchivo += `_cliente_${filtros.cliente_id}`;\n      }\n      \n      nombreArchivo += '.xlsx';\n\n      // Descargar archivo\n      XLSX.writeFile(wb, nombreArchivo);\n\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  /**\n   * Formatear fecha para Excel\n   */\n  private formatearFecha(fecha: string): string {\n    try {\n      const date = new Date(fecha);\n      const dia = String(date.getDate()).padStart(2, '0');\n      const mes = String(date.getMonth() + 1).padStart(2, '0');\n      const anio = date.getFullYear();\n      return `${dia}/${mes}/${anio}`;\n    } catch {\n      return fecha;\n    }\n  }\n\n  /**\n   * Actualizar categoría de un item\n   */\n  async actualizarCategoriaItem(itemId: string, categoria: string): Promise<void> {\n    try {\n      const { error } = await supabase\n        .from('tareas_items')\n        .update({ categoria })\n        .eq('id', itemId);\n\n      if (error) throw error;\n\n    } catch (error) {\n      throw error;\n    }\n  }\n}\n\n// Exportar instancia del servicio\nexport const tablaDatosTareasService = new TablaDatosTareasService();\nexport default tablaDatosTareasService;\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Sidebar from '../../components/feature/Sidebar';\nimport TopBar from '../../components/feature/TopBar';\nimport TablaDatosLayout from './components/TablaDatosLayout';\nimport { tablaDatosTareasService } from '../../services/tablaDatosTareasService';\nimport type { TareaAnalisis, FiltrosTablaDatos, TotalesPorCliente } from '../../types/tablaDatosTareas';\n\nexport default function TablaDatosTareasPage() {\n  const navigate = useNavigate();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  \n  // Estados de datos\n  const [tareas, setTareas] = useState<TareaAnalisis[]>([]);\n  const [totalesPorCliente, setTotalesPorCliente] = useState<TotalesPorCliente[]>([]);\n  const [totalGeneral, setTotalGeneral] = useState(0);\n  \n  // Estados de filtros\n  const [filtros, setFiltros] = useState<FiltrosTablaDatos>({\n    busqueda: '',\n    fecha_inicio_desde: '',\n    fecha_cierre_hasta: '',\n    estado: '',\n    cliente: ''\n  });\n\n  // Cargar datos al montar y cuando cambien los filtros\n  useEffect(() => {\n    cargarDatos();\n  }, [filtros]);\n\n  const cargarDatos = async () => {\n    try {\n      setLoading(true);\n      \n      const [tareasData, totalesData] = await Promise.all([\n        tablaDatosTareasService.getTareasAnalisis(filtros),\n        tablaDatosTareasService.getTotalesPorCliente(filtros)\n      ]);\n      \n      setTareas(tareasData);\n      setTotalesPorCliente(totalesData);\n      \n      // Calcular total general\n      const total = totalesData.reduce((sum, cliente) => sum + cliente.total, 0);\n      setTotalGeneral(total);\n      \n    } catch (error) {\n      alert('Error al cargar los datos de análisis');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFiltroChange = (nuevosFiltros: FiltrosTablaDatos) => {\n    setFiltros(nuevosFiltros);\n  };\n\n  const handleExportarExcel = async () => {\n    try {\n      await tablaDatosTareasService.exportarExcel(filtros);\n    } catch (error) {\n      alert('Error al exportar el archivo Excel');\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n      \n      {/* Contenido principal */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* TopBar */}\n        <TopBar onMenuClick={() => setSidebarOpen(true)} />\n        \n        {/* Layout de Tabla de Datos */}\n        <TablaDatosLayout\n          tareas={tareas}\n          totalesPorCliente={totalesPorCliente}\n          totalGeneral={totalGeneral}\n          loading={loading}\n          filtros={filtros}\n          onFiltroChange={handleFiltroChange}\n          onExportarExcel={handleExportarExcel}\n          onRefresh={cargarDatos}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":["TablaDatosFiltros","filtros","onFiltroChange","busqueda","setBusqueda","useState","fechaInicio","setFechaInicio","fechaCierre","setFechaCierre","estado","setEstado","cliente","setCliente","handleAplicarFiltros","handleLimpiarFiltros","jsxs","jsx","e","TotalesClientesCard","totalesPorCliente","totalGeneral","mostrarTodos","setMostrarTodos","clientesMostrar","formatCurrency","Fragment","index","TablaPorEstado","tareas","itemsExpandidos","setItemsExpandidos","toggleItems","tareaId","nuevosExpandidos","getEstadoColor","getCategoriaColor","categoria","tarea","itemsExpandido","item","a","b","total","TablaDatosLayout","loading","onExportarExcel","onRefresh","tareasPorEstado","acc","estados","TablaDatosTareasService","query","supabase","tareasData","tareasError","tareasAnalisis","nombreCliente","solicitante","responsable","itemsData","itemsError","items","totalesPorCategoria","categoriaNombre","codigoArticulo","unidadMedida","inventarioData","inventarioError","inventarioDataPartial","inventarioErrorPartial","categoriaData","categoriaError","unidadData","unidadError","sum","val","alertaHH","tiempoRealHoras","horasTeoricasTotal","i","diferenciaPorcentaje","error","categoriasSet","categorias","wb","XLSX.utils","datosHoja","fila","totalCategoria","ws","colWidths","range","columnasMoneda","primeraColumnaMoneda","R","C","cellAddress","nombreHoja","nombreArchivo","XLSX.writeFile","fecha","date","dia","mes","anio","itemId","tablaDatosTareasService","TablaDatosTareasPage","useNavigate","sidebarOpen","setSidebarOpen","setLoading","setTareas","setTotalesPorCliente","setTotalGeneral","setFiltros","useEffect","cargarDatos","totalesData","handleFiltroChange","nuevosFiltros","handleExportarExcel","Sidebar","TopBar"],"mappings":"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"}