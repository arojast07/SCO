{"version":3,"file":"BuscarClienteModal-D46sr1Ai.js","sources":["../../src/pages/clientes/components/BuscarClienteModal.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { Cliente } from '../../../types/cliente';\nimport { ClienteService } from '../../../services/clienteService';\n\ninterface BuscarClienteModalProps {\n  onSelect: (cliente: Cliente) => void;\n  onCancel: () => void;\n}\n\nexport function BuscarClienteModal({ onSelect, onCancel }: BuscarClienteModalProps) {\n  const [termino, setTermino] = useState('');\n  const [clientes, setClientes] = useState<Cliente[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [debounceTimer, setDebounceTimer] = useState<NodeJS.Timeout | null>(null);\n\n  const buscarClientes = async (busqueda: string) => {\n    if (busqueda.length < 2) {\n      setClientes([]);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const resultados = await ClienteService.buscarClientes(busqueda);\n      setClientes(resultados);\n    } catch (error) {\n      console.error('Error buscando clientes:', error);\n      setClientes([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (valor: string) => {\n    setTermino(valor);\n    \n    // Limpiar timer anterior\n    if (debounceTimer) {\n      clearTimeout(debounceTimer);\n    }\n    \n    // Configurar nuevo timer\n    const timer = setTimeout(() => {\n      buscarClientes(valor);\n    }, 300);\n    \n    setDebounceTimer(timer);\n  };\n\n  const getTipoPersonaTexto = (tipo: string) => {\n    switch (tipo) {\n      case 'fisica':\n        return 'Física';\n      case 'juridica':\n        return 'Jurídica';\n      case 'extranjero':\n        return 'Extranjero';\n      default:\n        return tipo;\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      if (debounceTimer) {\n        clearTimeout(debounceTimer);\n      }\n    };\n  }, [debounceTimer]);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Buscar Cliente\n          </h2>\n          <button\n            onClick={onCancel}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <i className=\"ri-close-line text-2xl\"></i>\n          </button>\n        </div>\n\n        {/* Búsqueda */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"relative\">\n            <i className=\"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n            <input\n              type=\"text\"\n              placeholder=\"Buscar por nombre, identificación o correo...\"\n              value={termino}\n              onChange={(e) => handleInputChange(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              autoFocus\n            />\n          </div>\n          \n          {termino.length > 0 && termino.length < 2 && (\n            <p className=\"text-sm text-gray-500 mt-2\">\n              Ingrese al menos 2 caracteres para buscar\n            </p>\n          )}\n        </div>\n\n        {/* Resultados */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {loading && (\n            <div className=\"flex items-center justify-center p-8\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-teal-600\"></div>\n              <span className=\"ml-3 text-gray-600\">Buscando...</span>\n            </div>\n          )}\n\n          {!loading && termino.length >= 2 && clientes.length === 0 && (\n            <div className=\"text-center p-8\">\n              <i className=\"ri-search-line text-4xl text-gray-400 mb-4\"></i>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                No se encontraron clientes\n              </h3>\n              <p className=\"text-gray-600\">\n                No hay clientes que coincidan con \"<strong>{termino}</strong>\"\n              </p>\n            </div>\n          )}\n\n          {!loading && clientes.length > 0 && (\n            <div className=\"divide-y divide-gray-200\">\n              {clientes.map((cliente) => (\n                <button\n                  key={cliente.id}\n                  onClick={() => onSelect(cliente)}\n                  className=\"w-full p-4 text-left hover:bg-gray-50 transition-colors focus:bg-gray-50 focus:outline-none\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h3 className=\"text-sm font-medium text-gray-900 truncate\">\n                          {cliente.nombre_razon_social}\n                        </h3>\n                        <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded\">\n                          {getTipoPersonaTexto(cliente.tipo_persona)}\n                        </span>\n                      </div>\n                      \n                      <div className=\"space-y-1 text-sm text-gray-600\">\n                        <div className=\"flex items-center\">\n                          <i className=\"ri-id-card-line w-4 h-4 mr-2\"></i>\n                          <span>{cliente.identificacion}</span>\n                        </div>\n                        \n                        <div className=\"flex items-center\">\n                          <i className=\"ri-mail-line w-4 h-4 mr-2\"></i>\n                          <span className=\"truncate\">{cliente.correo_principal}</span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"ml-4\">\n                      <i className=\"ri-arrow-right-line text-gray-400\"></i>\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {termino.length === 0 && (\n            <div className=\"text-center p-8\">\n              <i className=\"ri-search-2-line text-4xl text-gray-400 mb-4\"></i>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                Buscar Cliente\n              </h3>\n              <p className=\"text-gray-600\">\n                Ingrese el nombre, identificación o correo del cliente que desea encontrar\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\n          <div className=\"flex justify-end\">\n            <button\n              onClick={onCancel}\n              className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Cancelar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["BuscarClienteModal","onSelect","onCancel","termino","setTermino","useState","clientes","setClientes","loading","setLoading","debounceTimer","setDebounceTimer","buscarClientes","busqueda","resultados","ClienteService","error","handleInputChange","valor","timer","getTipoPersonaTexto","tipo","useEffect","jsxs","jsx","e","cliente"],"mappings":"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"}