{"version":3,"file":"EmisionFacturaPage-Bio9Ml5H.js","sources":["../../src/pages/facturacion/components/EmisionFacturaForm.tsx","../../src/pages/facturacion/EmisionFacturaPage.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { formatCurrency } from '../../../lib/currency';\n\ninterface EmisionFacturaFormProps {\n  origenData?: any;\n  loading: boolean;\n  onEmitir: (data: any) => void;\n  onGuardarBorrador: (data: any) => void;\n  onCancelar: () => void;\n}\n\ninterface FacturaItem {\n  id_item: number;\n  tipo_item: 'inventario' | 'producto' | 'servicio';\n  codigo: string;\n  descripcion: string;\n  unidad: string;\n  cantidad: number;\n  precio_unitario: number;\n  descuento_porcentaje: number;\n  impuesto_porcentaje: number;\n  subtotal: number;\n  descuento_monto: number;\n  impuesto_monto: number;\n  total: number;\n  bom_items?: any[];\n}\n\nexport function EmisionFacturaForm({ \n  origenData, \n  loading, \n  onEmitir, \n  onGuardarBorrador, \n  onCancelar \n}: EmisionFacturaFormProps) {\n  const [paso, setPaso] = useState(1);\n  const [formData, setFormData] = useState({\n    // Paso 1: Origen\n    origen_tipo: '',\n    origen_id: null,\n    \n    // Paso 2: Encabezado\n    tipo_documento: 'FE',\n    moneda: 'CRC',\n    tipo_cambio: 1.0,\n    condicion_venta: 'contado',\n    medio_pago: 'efectivo',\n    fecha_emision: new Date().toISOString().split('T')[0],\n    codigo_actividad: '722001',\n    observaciones: '',\n    \n    // Cliente\n    cliente_id: 0,\n    cliente: null,\n    \n    // Items\n    items: [] as FacturaItem[]\n  });\n\n  // Datos demo para clientes\n  const [clientesDemo] = useState([\n    {\n      id: 1,\n      nombre_razon_social: 'Empresa Demo S.A.',\n      identificacion: '3-101-123456',\n      correo_principal: 'contacto@empresademo.com',\n      telefono: '2222-3333'\n    },\n    {\n      id: 2,\n      nombre_razon_social: 'Comercial Los Andes Ltda.',\n      identificacion: '3-102-654321',\n      correo_principal: 'ventas@losandes.com',\n      telefono: '2555-7777'\n    },\n    {\n      id: 3,\n      nombre_razon_social: 'Juan P√©rez Rodr√≠guez',\n      identificacion: '1-1234-5678',\n      correo_principal: 'juan.perez@email.com',\n      telefono: '8888-9999'\n    }\n  ]);\n\n  // Datos demo para productos\n  const [productosDemo] = useState([\n    {\n      id: 1,\n      codigo: 'PROD001',\n      descripcion: 'Producto Demo 1',\n      precio_venta: 15000,\n      unidad: 'UND',\n      tipo: 'producto'\n    },\n    {\n      id: 2,\n      codigo: 'SERV001',\n      descripcion: 'Servicio de Consultor√≠a',\n      precio_venta: 25000,\n      unidad: 'HORA',\n      tipo: 'servicio'\n    },\n    {\n      id: 3,\n      codigo: 'INV001',\n      descripcion: 'Art√≠culo de Inventario',\n      precio_venta: 8500,\n      unidad: 'UND',\n      tipo: 'inventario'\n    }\n  ]);\n\n  const [origenes] = useState<any[]>([\n    {\n      id: 1,\n      codigo: 'PED-001',\n      fecha_creacion: new Date().toISOString(),\n      total: 150000,\n      cliente: { id: 1, nombre_razon_social: 'Cliente Demo 1', identificacion: '1-1234-5678' }\n    },\n    {\n      id: 2,\n      codigo: 'COT-001',\n      fecha_emision: new Date().toISOString(),\n      total: 200000,\n      cliente: { id: 2, nombre_razon_social: 'Cliente Demo 2', identificacion: '2-2345-6789' }\n    }\n  ]);\n  const [busquedaOrigen, setBusquedaOrigen] = useState('');\n  const [showClienteSelector, setShowClienteSelector] = useState(false);\n  const [showProductoSelector, setShowProductoSelector] = useState(false);\n  const [procesando, setProcesando] = useState(false);\n  const [totales, setTotales] = useState({\n    subtotal: 0,\n    descuento_total: 0,\n    impuesto_total: 0,\n    total: 0\n  });\n\n  // Cargar datos iniciales\n  useEffect(() => {\n    if (origenData) {\n      precargarDesdeOrigen(origenData);\n    }\n  }, [origenData]);\n\n  // Recalcular totales cuando cambien los items\n  useEffect(() => {\n    calcularTotales();\n  }, [formData.items]);\n\n  const precargarDesdeOrigen = (origen: any) => {\n    const { tipo, data } = origen;\n    \n    setFormData(prev => ({\n      ...prev,\n      origen_tipo: tipo,\n      origen_id: data.id,\n      cliente_id: data.cliente_id,\n      cliente: data.cliente || data.clientes,\n      moneda: data.moneda || 'CRC',\n      tipo_cambio: data.tipo_cambio || 1.0,\n      items: convertirItemsDesdeOrigen(data.items || [])\n    }));\n\n    setPaso(2); // Ir directamente al paso 2\n  };\n\n  const convertirItemsDesdeOrigen = (items: any[]): FacturaItem[] => {\n    return items.map((item, index) => ({\n      id_item: item.item_id || item.producto_id || index,\n      tipo_item: item.item_type || (item.producto_id ? 'producto' : 'inventario'),\n      codigo: item.codigo_articulo || item.codigo || '',\n      descripcion: item.descripcion || item.descripcion_producto || '',\n      unidad: item.unidad || 'UND',\n      cantidad: item.cantidad || 1,\n      precio_unitario: item.precio_unitario || item.precio_unit || 0,\n      descuento_porcentaje: item.descuento_porcentaje || 0,\n      impuesto_porcentaje: item.impuesto_porcentaje || 13,\n      subtotal: 0,\n      descuento_monto: 0,\n      impuesto_monto: 0,\n      total: 0,\n      bom_items: item.meta_json?.bom_items || []\n    }));\n  };\n\n  const buscarOrigenes = (busqueda: string) => {\n    // Filtrar or√≠genes demo basado en la b√∫squeda\n    if (!busqueda || busqueda.length < 2) {\n      return [];\n    }\n    return origenes.filter(origen => \n      origen.codigo.toLowerCase().includes(busqueda.toLowerCase()) ||\n      origen.cliente.nombre_razon_social.toLowerCase().includes(busqueda.toLowerCase())\n    );\n  };\n\n  const seleccionarOrigen = (origen: any) => {\n    // Simular carga de datos completos\n    const datosCompletos = {\n      ...origen,\n      items: [\n        {\n          codigo: 'PROD001',\n          descripcion: 'Producto Demo 1',\n          cantidad: 2,\n          precio_unitario: 50000,\n          unidad: 'UND'\n        }\n      ]\n    };\n\n    precargarDesdeOrigen({\n      tipo: formData.origen_tipo,\n      data: datosCompletos\n    });\n  };\n\n  const calcularTotales = () => {\n    let subtotal = 0;\n    let descuento_total = 0;\n    let impuesto_total = 0;\n\n    const itemsActualizados = formData.items.map(item => {\n      const itemSubtotal = item.cantidad * item.precio_unitario;\n      const itemDescuento = itemSubtotal * (item.descuento_porcentaje / 100);\n      const baseImponible = itemSubtotal - itemDescuento;\n      const itemImpuesto = baseImponible * (item.impuesto_porcentaje / 100);\n      const itemTotal = baseImponible + itemImpuesto;\n\n      subtotal += itemSubtotal;\n      descuento_total += itemDescuento;\n      impuesto_total += itemImpuesto;\n\n      return {\n        ...item,\n        subtotal: itemSubtotal,\n        descuento_monto: itemDescuento,\n        impuesto_monto: itemImpuesto,\n        total: itemTotal\n      };\n    });\n\n    setFormData(prev => ({\n      ...prev,\n      items: itemsActualizados\n    }));\n\n    setTotales({\n      subtotal,\n      descuento_total,\n      impuesto_total,\n      total: subtotal - descuento_total + impuesto_total\n    });\n  };\n\n  const actualizarItem = (index: number, campo: keyof FacturaItem, valor: any) => {\n    const nuevosItems = [...formData.items];\n    nuevosItems[index] = { ...nuevosItems[index], [campo]: valor };\n    \n    setFormData(prev => ({\n      ...prev,\n      items: nuevosItems\n    }));\n  };\n\n  const eliminarItem = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const seleccionarCliente = (cliente: any) => {\n    setFormData(prev => ({\n      ...prev,\n      cliente_id: cliente.id,\n      cliente: cliente\n    }));\n    setShowClienteSelector(false);\n  };\n\n  const agregarProducto = (producto: any) => {\n    const nuevoItem: FacturaItem = {\n      id_item: producto.id,\n      tipo_item: producto.tipo === 'producto' ? 'producto' : 'inventario',\n      codigo: producto.codigo,\n      descripcion: producto.descripcion,\n      unidad: producto.unidad || 'UND',\n      cantidad: 1,\n      precio_unitario: producto.precio_venta || 0,\n      descuento_porcentaje: 0,\n      impuesto_porcentaje: 13,\n      subtotal: 0,\n      descuento_monto: 0,\n      impuesto_monto: 0,\n      total: 0,\n      bom_items: []\n    };\n\n    setFormData(prev => ({\n      ...prev,\n      items: [...prev.items, nuevoItem]\n    }));\n    setShowProductoSelector(false);\n  };\n\n  const validarFormulario = () => {\n    if (!formData.cliente_id) {\n      alert('Debe seleccionar un cliente');\n      return false;\n    }\n\n    if (formData.items.length === 0) {\n      alert('Debe agregar al menos un art√≠culo');\n      return false;\n    }\n\n    if (!formData.codigo_actividad) {\n      alert('Debe especificar el c√≥digo de actividad econ√≥mica');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleEmitir = async () => {\n    if (!validarFormulario()) return;\n\n    setProcesando(true);\n    try {\n      const payload = {\n        origen_tipo: formData.origen_tipo,\n        origen_id: formData.origen_id,\n        tipo_documento: formData.tipo_documento,\n        moneda: formData.moneda,\n        tipo_cambio: formData.tipo_cambio,\n        condicion_venta: formData.condicion_venta,\n        medio_pago: formData.medio_pago,\n        observaciones: formData.observaciones,\n        cliente_id: formData.cliente_id,\n        lineas: formData.items.map(item => ({\n          id_item: item.id_item,\n          tipo_item: item.tipo_item,\n          descripcion: item.descripcion,\n          unidad: item.unidad,\n          cantidad: item.cantidad,\n          precio_unit: item.precio_unitario,\n          descuento_pct: item.descuento_porcentaje,\n          impuesto_pct: item.impuesto_porcentaje,\n          total: item.total\n        }))\n      };\n\n      await onEmitir(payload);\n    } finally {\n      setProcesando(false);\n    }\n  };\n\n  const handleGuardarBorrador = async () => {\n    if (!formData.cliente_id) {\n      alert('Debe seleccionar un cliente');\n      return;\n    }\n\n    const payload = {\n      ...formData,\n      estado_local: 'borrador'\n    };\n\n    await onGuardarBorrador(payload);\n  };\n\n  const origenesFiltered = buscarOrigenes(busquedaOrigen);\n\n  return (\n    <div className=\"bg-white rounded-lg shadow\">\n      {/* Progress Steps */}\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          {[\n            { num: 1, title: 'Selecci√≥n de Origen', icon: 'ri-file-search-line' },\n            { num: 2, title: 'Encabezado de Factura', icon: 'ri-file-edit-line' },\n            { num: 3, title: 'Detalle de Productos', icon: 'ri-shopping-cart-line' },\n            { num: 4, title: 'Confirmaci√≥n', icon: 'ri-check-line' }\n          ].map((step, index) => (\n            <div key={step.num} className=\"flex items-center\">\n              <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 ${\n                paso >= step.num \n                  ? 'bg-blue-600 border-blue-600 text-white' \n                  : 'border-gray-300 text-gray-500'\n              }`}>\n                {paso > step.num ? (\n                  <i className=\"ri-check-line\"></i>\n                ) : (\n                  <i className={step.icon}></i>\n                )}\n              </div>\n              <div className=\"ml-3 hidden sm:block\">\n                <p className={`text-sm font-medium ${\n                  paso >= step.num ? 'text-blue-600' : 'text-gray-500'\n                }`}>\n                  {step.title}\n                </p>\n              </div>\n              {index < 3 && (\n                <div className={`hidden sm:block w-16 h-0.5 ml-4 ${\n                  paso > step.num ? 'bg-blue-600' : 'bg-gray-300'\n                }`} />\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"p-6\">\n        {/* Paso 1: Selecci√≥n de Origen */}\n        {paso === 1 && (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900\">Selecci√≥n de Origen</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Origen del documento *\n                </label>\n                <select\n                  value={formData.origen_tipo}\n                  onChange={(e) => setFormData(prev => ({ ...prev, origen_tipo: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                >\n                  <option value=\"\">Seleccionar origen...</option>\n                  <option value=\"pedido\">Desde Pedido Confirmado</option>\n                  <option value=\"cotizacion\">Desde Cotizaci√≥n Aprobada</option>\n                </select>\n              </div>\n\n              {formData.origen_tipo && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Buscar {formData.origen_tipo}\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={busquedaOrigen}\n                    onChange={(e) => setBusquedaOrigen(e.target.value)}\n                    placeholder={`Buscar por c√≥digo o cliente...`}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Lista de resultados */}\n            {origenesFiltered.length > 0 && (\n              <div className=\"border border-gray-200 rounded-lg\">\n                <div className=\"max-h-64 overflow-y-auto\">\n                  {origenesFiltered.map((origen) => (\n                    <div\n                      key={origen.id}\n                      onClick={() => seleccionarOrigen(origen)}\n                      className=\"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer last:border-b-0\"\n                    >\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <div className=\"font-medium text-gray-900\">{origen.codigo}</div>\n                          <div className=\"text-sm text-gray-500\">\n                            Cliente: {origen.cliente?.nombre_razon_social}\n                          </div>\n                          <div className=\"text-sm text-gray-500\">\n                            {origen.cliente?.identificacion}\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"font-medium text-gray-900\">\n                            {formatCurrency(origen.total, 'CRC')}\n                          </div>\n                          <div className=\"text-sm text-gray-500\">\n                            {new Date(origen.fecha_emision || origen.fecha_creacion).toLocaleDateString()}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex justify-end\">\n              <button\n                onClick={() => setPaso(2)}\n                disabled={!formData.origen_id && !origenData}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap\"\n              >\n                Continuar\n                <i className=\"ri-arrow-right-line ml-2\"></i>\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Paso 2: Encabezado de Factura */}\n        {paso === 2 && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Encabezado de Factura</h2>\n              <button\n                onClick={() => setPaso(1)}\n                className=\"text-blue-600 hover:text-blue-800 cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line mr-1\"></i>\n                Volver\n              </button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Tipo de documento *\n                </label>\n                <select\n                  value={formData.tipo_documento}\n                  onChange={(e) => setFormData(prev => ({ ...prev, tipo_documento: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"FE\">Factura Electr√≥nica (FE)</option>\n                  <option value=\"TE\">Tiquete Electr√≥nico (TE)</option>\n                  <option value=\"NC\">Nota de Cr√©dito (NC)</option>\n                  <option value=\"ND\">Nota de D√©bito (ND)</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Moneda\n                </label>\n                <select\n                  value={formData.moneda}\n                  onChange={(e) => setFormData(prev => ({ ...prev, moneda: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"CRC\">Colones (CRC)</option>\n                  <option value=\"USD\">D√≥lares (USD)</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Tipo de cambio\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formData.tipo_cambio}\n                  onChange={(e) => setFormData(prev => ({ ...prev, tipo_cambio: parseFloat(e.target.value) || 1 }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Condici√≥n de venta *\n                </label>\n                <select\n                  value={formData.condicion_venta}\n                  onChange={(e) => setFormData(prev => ({ ...prev, condicion_venta: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"contado\">Contado</option>\n                  <option value=\"credito\">Cr√©dito</option>\n                  <option value=\"apartado\">Apartado</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Medio de pago *\n                </label>\n                <select\n                  value={formData.medio_pago}\n                  onChange={(e) => setFormData(prev => ({ ...prev, medio_pago: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"efectivo\">Efectivo</option>\n                  <option value=\"transferencia\">Transferencia</option>\n                  <option value=\"tarjeta\">Tarjeta</option>\n                  <option value=\"cheque\">Cheque</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Fecha de emisi√≥n *\n                </label>\n                <input\n                  type=\"date\"\n                  value={formData.fecha_emision}\n                  onChange={(e) => setFormData(prev => ({ ...prev, fecha_emision: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  C√≥digo actividad econ√≥mica *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.codigo_actividad}\n                  onChange={(e) => setFormData(prev => ({ ...prev, codigo_actividad: e.target.value }))}\n                  placeholder=\"Ej: 722001\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Cliente */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cliente *\n              </label>\n              <div className=\"flex gap-2\">\n                <div className=\"flex-1 p-3 border border-gray-300 rounded-lg bg-gray-50\">\n                  {formData.cliente ? (\n                    <div>\n                      <div className=\"font-medium\">{formData.cliente.nombre_razon_social}</div>\n                      <div className=\"text-sm text-gray-500\">{formData.cliente.identificacion}</div>\n                      <div className=\"text-sm text-gray-500\">{formData.cliente.correo_principal}</div>\n                    </div>\n                  ) : (\n                    <span className=\"text-gray-500\">Seleccionar cliente</span>\n                  )}\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowClienteSelector(true)}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n                >\n                  <i className=\"ri-search-line\"></i>\n                </button>\n              </div>\n            </div>\n\n            {/* Selector de Cliente */}\n            {showClienteSelector && (\n              <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-semibold\">Seleccionar Cliente</h3>\n                    <button\n                      onClick={() => setShowClienteSelector(false)}\n                      className=\"text-gray-500 hover:text-gray-700 cursor-pointer\"\n                    >\n                      <i className=\"ri-close-line text-xl\"></i>\n                    </button>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {clientesDemo.map((cliente) => (\n                      <div\n                        key={cliente.id}\n                        onClick={() => seleccionarCliente(cliente)}\n                        className=\"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer\"\n                      >\n                        <div className=\"font-medium\">{cliente.nombre_razon_social}</div>\n                        <div className=\"text-sm text-gray-500\">{cliente.identificacion}</div>\n                        <div className=\"text-sm text-gray-500\">{cliente.correo_principal}</div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Observaciones */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Observaciones\n              </label>\n              <textarea\n                value={formData.observaciones}\n                onChange={(e) => setFormData(prev => ({ ...prev, observaciones: e.target.value }))}\n                rows={3}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Observaciones adicionales...\"\n              />\n            </div>\n\n            <div className=\"flex justify-between\">\n              <button\n                onClick={() => setPaso(1)}\n                className=\"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-arrow-left-line mr-2\"></i>\n                Anterior\n              </button>\n              <button\n                onClick={() => setPaso(3)}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap\"\n              >\n                Continuar\n                <i className=\"ri-arrow-right-line ml-2\"></i>\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Paso 3: Detalle de Productos */}\n        {paso === 3 && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Detalle de Productos/Servicios</h2>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => setPaso(2)}\n                  className=\"text-blue-600 hover:text-blue-800 cursor-pointer\"\n                >\n                  <i className=\"ri-arrow-left-line mr-1\"></i>\n                  Volver\n                </button>\n                <button\n                  onClick={() => setShowProductoSelector(true)}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>\n                  Agregar\n                </button>\n              </div>\n            </div>\n\n            {/* Selector de Producto */}\n            {showProductoSelector && (\n              <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-semibold\">Seleccionar Producto</h3>\n                    <button\n                      onClick={() => setShowProductoSelector(false)}\n                      className=\"text-gray-500 hover:text-gray-700 cursor-pointer\"\n                    >\n                      <i className=\"ri-close-line text-xl\"></i>\n                    </button>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {productosDemo.map((producto) => (\n                      <div\n                        key={producto.id}\n                        onClick={() => agregarProducto(producto)}\n                        className=\"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer\"\n                      >\n                        <div className=\"font-medium\">{producto.descripcion}</div>\n                        <div className=\"text-sm text-gray-500\">C√≥digo: {producto.codigo}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          Precio: {formatCurrency(producto.precio_venta, 'CRC')}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Tabla de Items */}\n            {formData.items.length === 0 ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                <i className=\"ri-shopping-cart-line text-4xl mb-4\"></i>\n                <p className=\"text-lg font-medium\">No hay productos agregados</p>\n                <p>Use el bot√≥n \"Agregar\" para a√±adir productos o servicios</p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        C√≥digo\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Descripci√≥n\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Unidad\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Cantidad\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Precio Unit.\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Desc. %\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Imp. %\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Total\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Acciones\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {formData.items.map((item, index) => (\n                      <tr key={index} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {item.codigo}\n                        </td>\n                        <td className=\"px-6 py-4 text-sm text-gray-900\">\n                          <div className=\"max-w-xs\">\n                            <div className=\"font-medium\">{item.descripcion}</div>\n                            {item.bom_items && item.bom_items.length > 0 && (\n                              <div className=\"mt-2 text-xs text-gray-500\">\n                                <details className=\"cursor-pointer\">\n                                  <summary className=\"font-medium\">√çtems utilizados ({item.bom_items.length})</summary>\n                                  <div className=\"mt-1 pl-4 border-l-2 border-blue-200\">\n                                    {item.bom_items.map((bomItem: any, bomIndex: number) => (\n                                      <div key={bomIndex} className=\"py-1\">\n                                        <span className=\"font-medium\">{bomItem.descripcion}</span>\n                                        <span className=\"ml-2 text-gray-400\">\n                                          {bomItem.cantidad_total} {bomItem.unidad}\n                                        </span>\n                                      </div>\n                                    ))}\n                                  </div>\n                                </details>\n                              </div>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {item.unidad}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <input\n                            type=\"number\"\n                            step=\"0.001\"\n                            value={item.cantidad}\n                            onChange={(e) => actualizarItem(index, 'cantidad', parseFloat(e.target.value) || 0)}\n                            className=\"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          />\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.precio_unitario}\n                            onChange={(e) => actualizarItem(index, 'precio_unitario', parseFloat(e.target.value) || 0)}\n                            className=\"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          />\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.descuento_porcentaje}\n                            onChange={(e) => actualizarItem(index, 'descuento_porcentaje', parseFloat(e.target.value) || 0)}\n                            className=\"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          />\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={item.impuesto_porcentaje}\n                            onChange={(e) => actualizarItem(index, 'impuesto_porcentaje', parseFloat(e.target.value) || 0)}\n                            className=\"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                          />\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                          {formatCurrency(item.total, formData.moneda)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <button\n                            onClick={() => eliminarItem(index)}\n                            className=\"text-red-600 hover:text-red-800 p-1 hover:bg-red-50 rounded cursor-pointer\"\n                          >\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n\n            {/* Totales */}\n            {formData.items.length > 0 && (\n              <div className=\"border-t pt-6\">\n                <div className=\"max-w-md ml-auto space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Subtotal:</span>\n                    <span>{formatCurrency(totales.subtotal, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Descuentos:</span>\n                    <span>-{formatCurrency(totales.descuento_total, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Impuestos:</span>\n                    <span>{formatCurrency(totales.impuesto_total, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-lg font-semibold border-t pt-2\">\n                    <span>Total:</span>\n                    <span>{formatCurrency(totales.total, formData.moneda)}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex justify-between\">\n              <button\n                onClick={() => setPaso(2)}\n                className=\"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-arrow-left-line mr-2\"></i>\n                Anterior\n              </button>\n              <button\n                onClick={() => setPaso(4)}\n                disabled={formData.items.length === 0}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap\"\n              >\n                Continuar\n                <i className=\"ri-arrow-right-line ml-2\"></i>\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Paso 4: Confirmaci√≥n */}\n        {paso === 4 && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Confirmaci√≥n y Emisi√≥n</h2>\n              <button\n                onClick={() => setPaso(3)}\n                className=\"text-blue-600 hover:text-blue-800 cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line mr-1\"></i>\n                Volver\n              </button>\n            </div>\n\n            {/* Resumen */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Informaci√≥n General</h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Tipo de documento:</span>\n                    <span className=\"font-medium\">{formData.tipo_documento}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Cliente:</span>\n                    <span className=\"font-medium\">{formData.cliente?.nombre_razon_social}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Moneda:</span>\n                    <span className=\"font-medium\">{formData.moneda}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Condici√≥n de venta:</span>\n                    <span className=\"font-medium\">{formData.condicion_venta}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Medio de pago:</span>\n                    <span className=\"font-medium\">{formData.medio_pago}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Totales</h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Subtotal:</span>\n                    <span>{formatCurrency(totales.subtotal, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Descuentos:</span>\n                    <span>-{formatCurrency(totales.descuento_total, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Impuestos:</span>\n                    <span>{formatCurrency(totales.impuesto_total, formData.moneda)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-lg font-semibold border-t pt-3\">\n                    <span>Total:</span>\n                    <span>{formatCurrency(totales.total, formData.moneda)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Productos */}\n            <div className=\"bg-gray-50 rounded-lg p-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Productos/Servicios ({formData.items.length})\n              </h3>\n              <div className=\"space-y-2\">\n                {formData.items.map((item, index) => (\n                  <div key={index} className=\"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0\">\n                    <div>\n                      <span className=\"font-medium\">{item.descripcion}</span>\n                      <span className=\"text-gray-500 ml-2\">({item.codigo})</span>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-medium\">{formatCurrency(item.total, formData.moneda)}</div>\n                      <div className=\"text-sm text-gray-500\">\n                        {item.cantidad} √ó {formatCurrency(item.precio_unitario, formData.moneda)}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Botones de acci√≥n */}\n            <div className=\"flex justify-between\">\n              <button\n                onClick={() => setPaso(3)}\n                className=\"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-arrow-left-line mr-2\"></i>\n                Anterior\n              </button>\n              \n              <div className=\"flex gap-3\">\n                <button\n                  onClick={handleGuardarBorrador}\n                  disabled={loading}\n                  className=\"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-save-line mr-2\"></i>\n                  Guardar Borrador\n                </button>\n                \n                <button\n                  onClick={handleEmitir}\n                  disabled={loading || procesando}\n                  className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap\"\n                >\n                  {procesando ? (\n                    <>\n                      <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                      Firmando y enviando a Hacienda...\n                    </>\n                  ) : (\n                    <>\n                      <i className=\"ri-send-plane-line mr-2\"></i>\n                      Emitir Factura\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { EmisionFacturaForm } from './components/EmisionFacturaForm';\nimport Sidebar from '../../components/feature/Sidebar';\nimport TopBar from '../../components/feature/TopBar';\nimport { supabase } from '../../lib/supabase';\n\nexport default function EmisionFacturaPage() {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const handleEmitir = async (data: any) => {\n    setLoading(true);\n    try {\n      console.log('üì§ Emitiendo factura a Hacienda:', data);\n\n      // Llamar a la Edge Function real para facturar\n      const { data: result, error } = await supabase.functions.invoke('facturar-pedido', {\n        body: {\n          pedido_id: data.pedido_id,\n          tipo_documento: data.tipo_documento || '01', // 01 = Factura Electr√≥nica\n          condicion_venta: data.condicion_venta || '01', // 01 = Contado\n          medio_pago: data.medio_pago || '01', // 01 = Efectivo\n          plazo_credito: data.plazo_credito || 0,\n          items: data.items,\n          notas: data.notas\n        }\n      });\n\n      if (error) {\n        console.error('‚ùå Error en Edge Function:', error);\n        throw new Error(error.message || 'Error al emitir factura');\n      }\n\n      console.log('‚úÖ Factura emitida exitosamente:', result);\n\n      alert(`‚úÖ Factura emitida exitosamente\\n\\nClave: ${result.clave}\\nConsecutivo: ${result.consecutivo}\\nEstado: ${result.estado}\\n\\nLa factura ha sido enviada a Hacienda y est√° siendo procesada.`);\n      \n      navigate('/facturacion');\n    } catch (error: any) {\n      console.error('‚ùå Error en emisi√≥n:', error);\n      alert(`‚ùå Error al emitir factura:\\n\\n${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGuardarBorrador = async (data: any) => {\n    setLoading(true);\n    try {\n      console.log('üíæ Guardando borrador de factura:', data);\n\n      // Guardar en la tabla facturas_electronicas con estado 'borrador'\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Usuario no autenticado');\n\n      const { data: tiendaActual } = await supabase\n        .from('usuario_tienda_actual')\n        .select('tienda_id')\n        .eq('usuario_id', user.id)\n        .single();\n\n      if (!tiendaActual) throw new Error('No hay tienda asignada');\n\n      // Calcular totales\n      const subtotal = data.items.reduce((sum: number, item: any) => sum + (item.cantidad * item.precio_unitario), 0);\n      const descuento = data.items.reduce((sum: number, item: any) => sum + (item.cantidad * item.precio_unitario * (item.descuento_porcentaje || 0) / 100), 0);\n      const impuesto = data.items.reduce((sum: number, item: any) => {\n        const subtotalItem = item.cantidad * item.precio_unitario;\n        const descuentoItem = subtotalItem * (item.descuento_porcentaje || 0) / 100;\n        return sum + ((subtotalItem - descuentoItem) * (item.impuesto_porcentaje || 13) / 100);\n      }, 0);\n      const total = subtotal - descuento + impuesto;\n\n      // Insertar factura en estado borrador\n      const { data: factura, error: facturaError } = await supabase\n        .from('facturas_electronicas')\n        .insert({\n          pedido_id: data.pedido_id,\n          tipo_documento: data.tipo_documento || '01',\n          consecutivo: `BORRADOR-${Date.now()}`,\n          clave: '',\n          fecha_emision: new Date().toISOString(),\n          condicion_venta: data.condicion_venta || '01',\n          medio_pago: data.medio_pago || '01',\n          plazo_credito: data.plazo_credito || 0,\n          moneda: data.moneda || 'CRC',\n          tipo_cambio: data.tipo_cambio || 1,\n          subtotal,\n          descuento,\n          impuesto,\n          total,\n          estado: 'borrador',\n          notas: data.notas,\n          tienda_id: tiendaActual.tienda_id,\n          created_by: user.id\n        })\n        .select()\n        .single();\n\n      if (facturaError) throw facturaError;\n\n      // Insertar items de la factura\n      if (data.items && data.items.length > 0) {\n        const items = data.items.map((item: any) => ({\n          factura_id: factura.id,\n          item_type: item.item_type || 'producto',\n          item_id: item.item_id,\n          descripcion: item.descripcion,\n          unidad: item.unidad || 'UND',\n          cantidad: item.cantidad,\n          precio_unitario: item.precio_unitario,\n          descuento_porcentaje: item.descuento_porcentaje || 0,\n          impuesto_porcentaje: item.impuesto_porcentaje || 13,\n          total: item.total\n        }));\n\n        const { error: itemsError } = await supabase\n          .from('factura_items')\n          .insert(items);\n\n        if (itemsError) throw itemsError;\n      }\n\n      console.log('‚úÖ Borrador guardado:', factura);\n      alert('‚úÖ Borrador guardado exitosamente');\n      navigate('/facturacion');\n    } catch (error: any) {\n      console.error('‚ùå Error guardando borrador:', error);\n      alert(`‚ùå Error al guardar borrador:\\n\\n${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelar = () => {\n    if (confirm('¬øEst√° seguro que desea cancelar? Se perder√°n los datos ingresados.')) {\n      navigate('/facturacion');\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <TopBar onMenuClick={() => setSidebarOpen(!sidebarOpen)} />\n        \n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <div className=\"mb-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h1 className=\"text-2xl font-bold text-gray-900\">Emisi√≥n de Factura</h1>\n                  <p className=\"text-gray-600 mt-1\">\n                    Cree una nueva factura electr√≥nica desde cero o basada en un pedido/cotizaci√≥n\n                  </p>\n                </div>\n                <button\n                  onClick={handleCancelar}\n                  className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-close-line mr-2\"></i>\n                  Cancelar\n                </button>\n              </div>\n            </div>\n\n            <EmisionFacturaForm\n              loading={loading}\n              onEmitir={handleEmitir}\n              onGuardarBorrador={handleGuardarBorrador}\n              onCancelar={handleCancelar}\n            />\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":["EmisionFacturaForm","origenData","loading","onEmitir","onGuardarBorrador","onCancelar","paso","setPaso","useState","formData","setFormData","clientesDemo","productosDemo","origenes","busquedaOrigen","setBusquedaOrigen","showClienteSelector","setShowClienteSelector","showProductoSelector","setShowProductoSelector","procesando","setProcesando","totales","setTotales","useEffect","precargarDesdeOrigen","calcularTotales","origen","tipo","data","prev","convertirItemsDesdeOrigen","items","item","index","buscarOrigenes","busqueda","seleccionarOrigen","datosCompletos","subtotal","descuento_total","impuesto_total","itemsActualizados","itemSubtotal","itemDescuento","baseImponible","itemImpuesto","itemTotal","actualizarItem","campo","valor","nuevosItems","eliminarItem","_","i","seleccionarCliente","cliente","agregarProducto","producto","nuevoItem","validarFormulario","handleEmitir","payload","handleGuardarBorrador","origenesFiltered","jsxs","jsx","step","e","formatCurrency","bomItem","bomIndex","Fragment","EmisionFacturaPage","navigate","useNavigate","setLoading","sidebarOpen","setSidebarOpen","result","error","supabase","user","tiendaActual","sum","descuento","impuesto","subtotalItem","descuentoItem","total","factura","facturaError","itemsError","handleCancelar","Sidebar","TopBar"],"mappings":"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"}