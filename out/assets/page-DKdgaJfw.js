import{r as c,j as e,a as ee,b as ce,C as ie}from"./index-Bb3NupjY.js";import{S as de,T as me}from"./TopBar-BP5RF_Jd.js";import{M as xe}from"./MobileNav-Dp72TdL_.js";import{f as Y}from"./currency-BmxXlzML.js";import{P as H}from"./PermissionButton-DmJRPklx.js";import{N as Q}from"./NotificationPopup-Br5iZ8zM.js";import{C as f,H as pe}from"./clienteService-DoS4zFTf.js";import{B as ue}from"./BuscarClienteModal-D46sr1Ai.js";function Z({children:s}){const[j,g]=c.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(de,{isOpen:j,onClose:()=>g(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(me,{onMenuClick:()=>g(!0)}),e.jsx("main",{className:"flex-1 p-4 lg:p-6 pb-20 lg:pb-6 overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:s})})]}),e.jsx(xe,{})]})}function ge({clientes:s,loading:j,onEdit:g,onDelete:h}){const{currentStore:_}=ee(),{notification:k,hideNotification:p,confirmation:v,showConfirmation:y}=ce(),I=t=>{switch(t){case"valido":return"bg-green-100 text-green-800";case"pendiente":return"bg-yellow-100 text-yellow-800";case"no_valido":return"bg-red-100 text-red-800";case"error":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},E=t=>{switch(t){case"valido":return"V√°lido";case"pendiente":return"Pendiente";case"no_valido":return"No V√°lido";case"error":return"Error";default:return"Desconocido"}},C=t=>{switch(t){case"fisica":return"F√≠sica";case"juridica":return"Jur√≠dica";case"extranjero":return"Extranjero";default:return t}};return j?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando clientes..."})]})}):s.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx("i",{className:"ri-user-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay clientes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No se encontraron clientes que coincidan con los filtros aplicados."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(t=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.nombre_razon_social}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I(t.hacienda_estado_validacion)}`,children:E(t.hacienda_estado_validacion)})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-id-card-line w-4 h-4 mr-2"}),e.jsx("span",{children:t.identificacion}),e.jsx("span",{className:"ml-2 text-xs bg-gray-100 px-2 py-1 rounded",children:C(t.tipo_persona)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-mail-line w-4 h-4 mr-2"}),e.jsx("span",{className:"truncate",children:t.correo_principal})]}),t.telefono_numero&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-phone-line w-4 h-4 mr-2"}),e.jsxs("span",{children:["+",t.telefono_pais," ",t.telefono_numero]})]}),t.limite_credito>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-money-dollar-circle-line w-4 h-4 mr-2"}),e.jsxs("span",{children:["L√≠mite: ",Y(t.limite_credito)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[e.jsx(H,{permission:"clientes:edit",variant:"icon",onClick:()=>g(t),title:"Editar cliente",className:"text-blue-600 hover:bg-blue-50",children:e.jsx("i",{className:"ri-edit-line w-4 h-4"})}),e.jsx(H,{permission:"clientes:delete",variant:"icon",onClick:()=>y("danger","¬øEliminar cliente?","¬øEst√° seguro que desea eliminar este cliente? Esta acci√≥n no se puede deshacer.",async()=>{try{const{data:u}=await supabase.from("cotizaciones").select("id_cotizacion").eq("id_cliente",t.id).limit(1);if(u&&u.length>0){showNotification("warning","Este cliente tiene cotizaciones asociadas. Para eliminarlo, primero debe eliminar todas sus cotizaciones.");return}const{data:w}=await supabase.from("pedidos").select("id_pedido").eq("id_cliente",t.id).limit(1);if(w&&w.length>0){showNotification("warning","Este cliente tiene pedidos asociados. Para eliminarlo, primero debe eliminar todos sus pedidos.");return}const{error:z}=await supabase.from("clientes").delete().eq("id_cliente",t.id);if(z)throw z;setClientes(D=>D.filter(b=>b.id_cliente!==b.id)),showNotification("success","Cliente eliminado exitosamente")}catch(u){console.error("Error eliminando cliente:",u),showNotification("error",`Error al eliminar el cliente: ${u.message||"Error desconocido"}. Por favor, int√©ntelo nuevamente.`)}}),title:"Eliminar cliente",className:"text-red-600 hover:bg-red-50",children:e.jsx("i",{className:"ri-delete-bin-line w-4 h-4"})})]})]})},t.id))})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identificaci√≥n"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado Hacienda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"L√≠mite Cr√©dito"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.nombre_razon_social}),t.nombre_comercial&&e.jsx("div",{className:"text-sm text-gray-500",children:t.nombre_comercial}),e.jsx("div",{className:"text-xs text-gray-400",children:C(t.tipo_persona)})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.identificacion}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:t.tipo_identificacion.replace("_"," ")})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.correo_principal}),t.telefono_numero&&e.jsxs("div",{className:"text-sm text-gray-500",children:["+",t.telefono_pais," ",t.telefono_numero]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I(t.hacienda_estado_validacion)}`,children:E(t.hacienda_estado_validacion)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.limite_credito>0?Y(t.limite_credito):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(H,{permission:"clientes:edit",variant:"icon",onClick:()=>g(t),title:"Editar cliente",className:"text-blue-600 hover:bg-blue-50",children:e.jsx("i",{className:"ri-edit-line w-4 h-4"})}),e.jsx(H,{permission:"clientes:delete",variant:"icon",onClick:()=>y("danger","¬øEliminar cliente?","¬øEst√° seguro que desea eliminar este cliente? Esta acci√≥n no se puede deshacer.",async()=>{try{const{data:u}=await supabase.from("cotizaciones").select("id_cotizacion").eq("id_cliente",t.id).limit(1);if(u&&u.length>0){showNotification("warning","Este cliente tiene cotizaciones asociadas. Para eliminarlo, primero debe eliminar todas sus cotizaciones.");return}const{data:w}=await supabase.from("pedidos").select("id_pedido").eq("id_cliente",t.id).limit(1);if(w&&w.length>0){showNotification("warning","Este cliente tiene pedidos asociados. Para eliminarlo, primero debe eliminar todos sus pedidos.");return}const{error:z}=await supabase.from("clientes").delete().eq("id_cliente",t.id);if(z)throw z;setClientes(D=>D.filter(b=>b.id_cliente!==b.id)),showNotification("success","Cliente eliminado exitosamente")}catch(u){console.error("Error eliminando cliente:",u),showNotification("error",`Error al eliminar el cliente: ${u.message||"Error desconocido"}. Por favor, int√©ntelo nuevamente.`)}}),title:"Eliminar cliente",className:"text-red-600 hover:bg-red-50",children:e.jsx("i",{className:"ri-delete-bin-line w-4 h-4"})})]})})]},t.id))})]})}),e.jsx(Q,{isOpen:k.isOpen,onClose:p,title:k.title,message:k.message,type:k.type})]}),e.jsx(ie,{isOpen:v.isOpen,type:v.type,title:v.title,message:v.message,onConfirm:v.onConfirm,onCancel:v.onCancel})]})}function he({cliente:s,onSubmit:j,onCancel:g}){const[h,_]=c.useState(1),[k,p]=c.useState(!1),[v,y]=c.useState(!1),[I,E]=c.useState(null),[C,t]=c.useState(!1),[u,w]=c.useState(!1),[z,D]=c.useState([]),[b,O]=c.useState([]),[S,T]=c.useState([]),[F,J]=c.useState([]),[M,q]=c.useState([]),[a,d]=c.useState({tipo_persona:"fisica",tipo_identificacion:"cedula_fisica",identificacion:"",nombre_razon_social:"",nombre_comercial:"",correo_principal:"",correos_adicionales:[],telefono_pais:"506",telefono_numero:"",telefono_secundario:"",provincia_id:void 0,canton_id:void 0,distrito_id:void 0,barrio:"",otras_senas:"",codigo_postal:"",pais_iso:"CR",direccion_extranjero_line1:"",direccion_extranjero_line2:"",codigo_actividad_economica:"",regimen_tributario:"general",exoneracion_numero:"",exoneracion_institucion:"",exoneracion_porcentaje:0,exoneracion_vencimiento:"",moneda_preferida:"CRC",condicion_venta_preferida:"contado",dias_credito:0,limite_credito:0,lista_precios_id:void 0,hacienda_estado_validacion:"pendiente",hacienda_ultimo_mensaje:"",hacienda_ultimo_intento:"",activo:!0}),[n,N]=c.useState({}),[l,x]=c.useState(""),A=[{number:1,title:"Tipo e Identificaci√≥n"},{number:2,title:"Datos Legales"},{number:3,title:"Contacto"},{number:4,title:"Direcci√≥n"},{number:5,title:"Informaci√≥n Fiscal"},{number:6,title:"Preferencias"}];c.useEffect(()=>{(async()=>{if(t(!0),await X(),s&&(d({tipo_persona:s.tipo_persona||"fisica",tipo_identificacion:s.tipo_identificacion||"cedula_fisica",identificacion:s.identificacion||"",nombre_razon_social:s.nombre_razon_social||"",nombre_comercial:s.nombre_comercial||"",correo_principal:s.correo_principal||"",correos_adicionales:s.correos_adicionales||[],telefono_pais:s.telefono_pais||"506",telefono_numero:s.telefono_numero||"",telefono_secundario:s.telefono_secundario||"",provincia_id:s.provincia_id||void 0,canton_id:s.canton_id||void 0,distrito_id:s.distrito_id||void 0,barrio:s.barrio||"",otras_senas:s.otras_senas||"",codigo_postal:s.codigo_postal||"",pais_iso:s.pais_iso||"CR",direccion_extranjero_line1:s.direccion_extranjero_line1||"",direccion_extranjero_line2:s.direccion_extranjero_line2||"",codigo_actividad_economica:s.codigo_actividad_economica||"",regimen_tributario:s.regimen_tributario||"general",exoneracion_numero:s.exoneracion_numero||"",exoneracion_institucion:s.exoneracion_institucion||"",exoneracion_porcentaje:s.exoneracion_porcentaje||0,exoneracion_vencimiento:s.exoneracion_vencimiento||"",moneda_preferida:s.moneda_preferida||"CRC",condicion_venta_preferida:s.condicion_venta_preferida||"contado",dias_credito:s.dias_credito||0,limite_credito:s.limite_credito||0,lista_precios_id:s.lista_precios_id||void 0,hacienda_estado_validacion:s.hacienda_estado_validacion||"pendiente",hacienda_ultimo_mensaje:s.hacienda_ultimo_mensaje||"",hacienda_ultimo_intento:s.hacienda_ultimo_intento||"",activo:s.activo!==void 0?s.activo:!0}),s.provincia_id)){const o=await f.obtenerCantones(s.provincia_id);if(O(o),s.canton_id){const R=await f.obtenerDistritos(s.canton_id);T(R)}}t(!1)})()},[]),c.useEffect(()=>{(async()=>{if(a.provincia_id){const o=await f.obtenerCantones(a.provincia_id);O(o),!C&&(!s||s.provincia_id!==a.provincia_id)&&(d(R=>({...R,canton_id:void 0,distrito_id:void 0})),T([]))}else O([]),T([]),C||d(o=>({...o,canton_id:void 0,distrito_id:void 0}))})()},[a.provincia_id]),c.useEffect(()=>{(async()=>{if(a.canton_id){console.log("üîÑ Iniciando carga de distritos para cant√≥n:",a.canton_id),w(!0);try{const o=await f.obtenerDistritos(a.canton_id);console.log("‚úÖ Distritos obtenidos:",o.length),T(o),!C&&(!s||s.canton_id!==a.canton_id)&&d(R=>({...R,distrito_id:void 0})),o.length===0&&console.warn("‚ö†Ô∏è No se encontraron distritos para el cant√≥n:",a.canton_id)}catch(o){console.error("‚ùå Error cargando distritos:",o),T([]),m("Error","No se pudieron cargar los distritos. Por favor intenta nuevamente.")}finally{w(!1)}}else T([]),w(!1),C||d(o=>({...o,distrito_id:void 0}))})()},[a.canton_id]);const X=async()=>{try{const[i,o,R]=await Promise.all([f.obtenerProvincias(),f.obtenerPaises(),f.obtenerActividadesEconomicas()]);D(i),J(o),q(R)}catch(i){console.error("Error cargando cat√°logos:",i)}},r=(i,o)=>{d(R=>({...R,[i]:o})),n[i]&&N(R=>({...R,[i]:""}))},P=i=>{const o={};switch(i){case 1:a.tipo_persona||(o.tipo_persona="Requerido"),a.tipo_identificacion||(o.tipo_identificacion="Requerido"),a.identificacion?f.validarIdentificacion(a.tipo_identificacion,a.identificacion)||(o.identificacion="Formato de identificaci√≥n inv√°lido"):o.identificacion="Requerido";break;case 2:a.nombre_razon_social||(o.nombre_razon_social="Requerido");break;case 3:a.correo_principal?f.validarEmail(a.correo_principal)||(o.correo_principal="Email inv√°lido"):o.correo_principal="Requerido",a.telefono_numero&&!f.validarTelefono(a.telefono_numero)&&(o.telefono_numero="Tel√©fono inv√°lido");break;case 4:a.tipo_persona!=="extranjero"?(a.provincia_id||(o.provincia_id="Requerido"),a.canton_id||(o.canton_id="Requerido"),!a.distrito_id&&S.length>0&&(o.distrito_id="Requerido")):(a.pais_iso||(o.pais_iso="Requerido"),a.direccion_extranjero_line1||(o.direccion_extranjero_line1="Requerido"));break;case 5:a.codigo_actividad_economica||(o.codigo_actividad_economica="Requerido"),a.exoneracion_porcentaje&&(a.exoneracion_porcentaje<0||a.exoneracion_porcentaje>100)&&(o.exoneracion_porcentaje="Debe estar entre 0 y 100");break}return N(o),Object.keys(o).length===0},V=()=>{P(h)&&_(i=>Math.min(i+1,A.length))},$=()=>{_(i=>Math.max(i-1,1))},K=(i,o)=>{E({type:"success",title:i,message:o}),setTimeout(()=>E(null),3e3)},m=(i,o)=>{E({type:"error",title:i,message:o}),setTimeout(()=>E(null),3e3)},G=async()=>{try{y(!0);const i=await pe.validarIdentificacion(a.identificacion);d(o=>({...o,hacienda_estado_validacion:i.valido?"valido":"no_valido",hacienda_ultimo_mensaje:i.mensaje,hacienda_ultimo_intento:new Date().toISOString()})),K("Validaci√≥n exitosa",i.mensaje)}catch(i){console.error("Error validando con Hacienda:",i),m("Error al validar","Error al validar con Hacienda")}finally{y(!1)}},W=()=>{l&&f.validarEmail(l)&&(d(i=>({...i,correos_adicionales:[...i.correos_adicionales,l]})),x(""))},U=i=>{d(o=>({...o,correos_adicionales:o.correos_adicionales.filter((R,le)=>le!==i)}))},B=async i=>{if(i.preventDefault(),!!P(h))try{p(!0);const o={...a};a.tipo_persona!=="extranjero"&&a.canton_id&&S.length===0&&(o.distrito_id=null,console.log("‚ÑπÔ∏è Cant√≥n sin distritos registrados, guardando distrito_id como null")),await j(o)}catch(o){console.error("Error guardando cliente:",o)}finally{p(!1)}},L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Persona *"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[{value:"fisica",label:"Persona F√≠sica",icon:"ri-user-line"},{value:"juridica",label:"Persona Jur√≠dica",icon:"ri-building-line"},{value:"extranjero",label:"Extranjero",icon:"ri-global-line"}].map(i=>e.jsxs("button",{type:"button",onClick:()=>r("tipo_persona",i.value),className:`p-4 border-2 rounded-lg text-left transition-colors ${a.tipo_persona===i.value?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${i.icon} text-xl mb-2 block`}),e.jsx("div",{className:"font-medium",children:i.label})]},i.value))}),n.tipo_persona&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.tipo_persona})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Identificaci√≥n *"}),e.jsxs("select",{value:a.tipo_identificacion,onChange:i=>r("tipo_identificacion",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"cedula_fisica",children:"C√©dula F√≠sica"}),e.jsx("option",{value:"cedula_juridica",children:"C√©dula Jur√≠dica"}),e.jsx("option",{value:"dimex",children:"DIMEX"}),e.jsx("option",{value:"nite",children:"NITE"}),e.jsx("option",{value:"pasaporte",children:"Pasaporte"})]}),n.tipo_identificacion&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.tipo_identificacion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N√∫mero de Identificaci√≥n *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a.identificacion,onChange:i=>r("identificacion",i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Ingrese la identificaci√≥n"}),e.jsxs("button",{type:"button",onClick:G,disabled:!a.identificacion||v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors whitespace-nowrap",children:[v?e.jsx("i",{className:"ri-loader-4-line animate-spin"}):e.jsx("i",{className:"ri-shield-check-line"}),"Validar"]})]}),n.identificacion&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.identificacion}),a.hacienda_estado_validacion!=="pendiente"&&e.jsx("div",{className:`mt-2 p-3 rounded-lg ${a.hacienda_estado_validacion==="valido"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`${a.hacienda_estado_validacion==="valido"?"ri-check-line":"ri-close-line"} mr-2`}),e.jsx("span",{className:"text-sm",children:a.hacienda_ultimo_mensaje})]})})]})]}),ae=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.tipo_persona==="fisica"?"Nombre Completo":"Raz√≥n Social"," ","*"]}),e.jsx("input",{type:"text",value:a.nombre_razon_social,onChange:i=>r("nombre_razon_social",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:a.tipo_persona==="fisica"?"Juan P√©rez Rodr√≠guez":"Empresa S.A."}),n.nombre_razon_social&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.nombre_razon_social})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Comercial / Alias"}),e.jsx("input",{type:"text",value:a.nombre_comercial,onChange:i=>r("nombre_comercial",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Nombre comercial o alias del cliente"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nombre de fantas√≠a o alias con el que se conoce al cliente"})]})]}),se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electr√≥nico Principal *"}),e.jsx("input",{type:"email",value:a.correo_principal,onChange:i=>r("correo_principal",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"correo@ejemplo.com"}),n.correo_principal&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.correo_principal})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correos Adicionales"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"email",value:l,onChange:i=>x(i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"correo.adicional@ejemplo.com"}),e.jsx("button",{type:"button",onClick:W,disabled:!l,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:bg-gray-400 transition-colors",children:e.jsx("i",{className:"ri-add-line"})})]}),a.correos_adicionales.length>0&&e.jsx("div",{className:"space-y-2",children:a.correos_adicionales.map((i,o)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"flex-1 text-sm",children:i}),e.jsx("button",{type:"button",onClick:()=>U(o),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx("i",{className:"ri-close-line"})})]},o))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel√©fono Principal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:a.telefono_pais,onChange:i=>r("telefono_pais",i.target.value),className:"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"506",children:"+506"}),e.jsx("option",{value:"1",children:"+1"}),e.jsx("option",{value:"52",children:"+52"}),e.jsx("option",{value:"502",children:"+502"}),e.jsx("option",{value:"504",children:"+504"}),e.jsx("option",{value:"503",children:"+503"}),e.jsx("option",{value:"507",children:"+507"}),e.jsx("option",{value:"505",children:"+505"})]}),e.jsx("input",{type:"tel",value:a.telefono_numero,onChange:i=>r("telefono_numero",i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"88888888"})]}),n.telefono_numero&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.telefono_numero})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel√©fono Secundario"}),e.jsx("input",{type:"tel",value:a.telefono_secundario,onChange:i=>r("telefono_secundario",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"22222222"})]})]})]}),re=()=>e.jsx("div",{className:"space-y-6",children:a.tipo_persona!=="extranjero"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provincia *"}),e.jsxs("select",{value:a.provincia_id||"",onChange:i=>r("provincia_id",i.target.value?parseInt(i.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar provincia"}),z.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]}),n.provincia_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.provincia_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cant√≥n *"}),e.jsxs("select",{value:a.canton_id||"",onChange:i=>r("canton_id",i.target.value?parseInt(i.target.value):void 0),disabled:!a.provincia_id||b.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:a.provincia_id?b.length===0?"Cargando cantones...":"Seleccionar cant√≥n":"Primero seleccione una provincia"}),b.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]}),n.canton_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.canton_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Distrito ",S.length>0?"*":""]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.distrito_id||"",onChange:i=>r("distrito_id",i.target.value?parseInt(i.target.value):void 0),disabled:!a.canton_id||u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed pr-10",children:[e.jsx("option",{value:"",children:a.canton_id?u?"Cargando distritos...":S.length===0?"Sin distritos (opcional)":"Seleccionar distrito":"Primero seleccione un cant√≥n"}),S.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]}),u&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-teal-600"})})]}),n.distrito_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.distrito_id}),!u&&a.canton_id&&S.length===0&&e.jsxs("p",{className:"text-blue-600 text-xs mt-1 flex items-center",children:[e.jsx("i",{className:"ri-information-line mr-1"}),"Este cant√≥n no tiene distritos registrados. Puede continuar sin seleccionar distrito."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barrio"}),e.jsx("input",{type:"text",value:a.barrio,onChange:i=>r("barrio",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Nombre del barrio"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C√≥digo Postal"}),e.jsx("input",{type:"text",value:a.codigo_postal,onChange:i=>r("codigo_postal",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"10101"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Otras Se√±as"}),e.jsx("textarea",{value:a.otras_senas,onChange:i=>r("otras_senas",i.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Descripci√≥n detallada de la direcci√≥n"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pa√≠s *"}),e.jsxs("select",{value:a.pais_iso||"",onChange:i=>r("pais_iso",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar pa√≠s"}),F.map(i=>e.jsx("option",{value:i.codigo_iso,children:i.nombre},i.codigo_iso))]}),n.pais_iso&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.pais_iso})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci√≥n L√≠nea 1 *"}),e.jsx("input",{type:"text",value:a.direccion_extranjero_line1,onChange:i=>r("direccion_extranjero_line1",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Direcci√≥n principal"}),n.direccion_extranjero_line1&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.direccion_extranjero_line1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci√≥n L√≠nea 2"}),e.jsx("input",{type:"text",value:a.direccion_extranjero_line2,onChange:i=>r("direccion_extranjero_line2",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Informaci√≥n adicional de direcci√≥n"})]})]})}),te=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C√≥digo de Actividad Econ√≥mica *"}),e.jsxs("select",{value:a.codigo_actividad_economica,onChange:i=>r("codigo_actividad_economica",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar actividad econ√≥mica"}),M.map(i=>e.jsxs("option",{value:i.codigo,children:[i.codigo," - ",i.descripcion]},i.codigo))]}),n.codigo_actividad_economica&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.codigo_actividad_economica})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R√©gimen Tributario"}),e.jsxs("select",{value:a.regimen_tributario,onChange:i=>r("regimen_tributario",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"simplificado",children:"Simplificado"}),e.jsx("option",{value:"exento",children:"Exento"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaci√≥n de Exoneraci√≥n"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N√∫mero de Exoneraci√≥n"}),e.jsx("input",{type:"text",value:a.exoneracion_numero,onChange:i=>r("exoneracion_numero",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"N√∫mero de exoneraci√≥n"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instituci√≥n que Exonera"}),e.jsx("input",{type:"text",value:a.exoneracion_institucion,onChange:i=>r("exoneracion_institucion",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Nombre de la instituci√≥n"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Porcentaje de Exoneraci√≥n (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:a.exoneracion_porcentaje,onChange:i=>r("exoneracion_porcentaje",parseFloat(i.target.value)||0),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-5
              focus:border-transparent`,placeholder:"0.00"}),n.exoneracion_porcentaje&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.exoneracion_porcentaje})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento"}),e.jsx("input",{type:"date",value:a.exoneracion_vencimiento,onChange:i=>r("exoneracion_vencimiento",i.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-5
              focus:border-transparent`})]})]})]})]}),oe=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda Preferida"}),e.jsxs("select",{value:a.moneda_preferida,onChange:i=>r("moneda_preferida",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"CRC",children:"Colones (‚Ç°)"}),e.jsx("option",{value:"USD",children:"D√≥lares ($)"}),e.jsx("option",{value:"EUR",children:"Euros (‚Ç¨)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condici√≥n de Venta"}),e.jsxs("select",{value:a.condicion_venta_preferida,onChange:i=>r("condicion_venta_preferida",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"contado",children:"Contado"}),e.jsx("option",{value:"credito",children:"Cr√©dito"}),e.jsx("option",{value:"mixto",children:"Mixto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D√≠as de Cr√©dito"}),e.jsx("input",{type:"number",min:"0",value:a.dias_credito,onChange:i=>r("dias_credito",parseInt(i.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"D√≠as de cr√©dito otorgados al cliente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"L√≠mite de Cr√©dito (‚Ç°)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:a.limite_credito,onChange:i=>r("limite_credito",parseFloat(i.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Monto m√°ximo de cr√©dito permitido"})]})]}),e.jsxs("div",{className:"flex items-center pt-2 border-t border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"activo",checked:a.activo,onChange:i=>r("activo",i.target.checked),className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded cursor-pointer"}),e.jsx("label",{htmlFor:"activo",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Cliente activo"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-600 text-lg mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Informaci√≥n de Preferencias"}),e.jsx("p",{className:"text-xs",children:"Estas preferencias se aplicar√°n por defecto al crear cotizaciones y pedidos para este cliente."})]})]})})]}),ne=()=>{switch(h){case 1:return L();case 2:return ae();case 3:return se();case 4:return re();case 5:return te();case 6:return oe();default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[I&&e.jsxs("div",{className:`absolute top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${I.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("div",{className:"font-medium",children:I.title}),e.jsx("div",{className:"text-sm",children:I.message})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Editar Cliente":"Nuevo Cliente"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-between gap-2",children:A.map((i,o)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${h===i.number?"bg-teal-600 text-white flex-1":h>i.number?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-500"}`,children:[e.jsx("span",{className:"font-medium",children:i.number}),h===i.number&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:i.title})]}),o<A.length-1&&e.jsx("div",{className:`w-8 h-0.5 mx-1 ${h>i.number?"bg-teal-600":"bg-gray-200"}`})]},i.number))})}),e.jsxs("form",{onSubmit:B,className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("i",{className:`${A[h-1].icon} text-2xl text-teal-600 mr-3`}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:A[h-1].title})]}),ne()]})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:$,disabled:h===1,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Anterior"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Paso ",h," de ",A.length]}),e.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Cancelar"}),h===A.length?e.jsx("button",{type:"button",onClick:B,disabled:k,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center whitespace-nowrap",children:k?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),s?"Actualizar":"Crear"," Cliente"]})}):e.jsxs("button",{type:"button",onClick:V,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap",children:["Siguiente",e.jsx("i",{className:"ri-arrow-right-line ml-2"})]})]})]})]})]})})}function fe({filters:s,onFiltersChange:j}){const[g,h]=c.useState(!1),_=(p,v)=>{j({...s,[p]:v||void 0})},k=()=>{j({}),h(!1)};return e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre, identificaci√≥n o correo...",value:s.search||"",onChange:p=>_("search",p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>h(!g),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center whitespace-nowrap",children:[e.jsx("i",{className:"ri-filter-line mr-2"}),"Filtros",e.jsx("i",{className:`ri-arrow-${g?"up":"down"}-s-line ml-1`})]}),(s.search||s.tipo_persona||s.hacienda_estado_validacion)&&e.jsxs("button",{onClick:k,className:"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors flex items-center whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Limpiar"]})]})]}),g&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Persona"}),e.jsxs("select",{value:s.tipo_persona||"",onChange:p=>_("tipo_persona",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"fisica",children:"F√≠sica"}),e.jsx("option",{value:"juridica",children:"Jur√≠dica"}),e.jsx("option",{value:"extranjero",children:"Extranjero"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado Hacienda"}),e.jsxs("select",{value:s.hacienda_estado_validacion||"",onChange:p=>_("hacienda_estado_validacion",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"valido",children:"V√°lido"}),e.jsx("option",{value:"no_valido",children:"No V√°lido"}),e.jsx("option",{value:"error",children:"Error"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsxs("select",{value:s.activo!==void 0?s.activo?"true":"false":"",onChange:p=>_("activo",p.target.value===""?void 0:p.target.value==="true"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"true",children:"Activo"}),e.jsx("option",{value:"false",children:"Inactivo"})]})]})]})]})}function be({onSuccess:s,onCancel:j}){const[g,h]=c.useState(null),[_,k]=c.useState(!1),[p,v]=c.useState(!1),[y,I]=c.useState([]),[E,C]=c.useState(!1),[t,u]=c.useState(null),[w,z]=c.useState({isOpen:!1,type:"info",message:""}),D=c.useRef(null),b=(a,d)=>{z({isOpen:!0,type:a,message:d})},O=()=>{z(a=>({...a,isOpen:!1}))},S=()=>{const a=`Tipo Persona,Tipo Identificaci√≥n,Identificaci√≥n,Nombre/Raz√≥n Social,Nombre Comercial,Correo Principal,Correos Adicionales,Pa√≠s Tel√©fono,Tel√©fono,Tel√©fono Secundario,Provincia,Cant√≥n,Distrito,Barrio,Otras Se√±as,C√≥digo Postal,Pa√≠s ISO,Direcci√≥n Extranjero 1,Direcci√≥n Extranjero 2,C√≥digo Actividad Econ√≥mica,R√©gimen Tributario,N√∫mero Exoneraci√≥n,Instituci√≥n Exoneraci√≥n,Porcentaje Exoneraci√≥n,Vencimiento Exoneraci√≥n,Moneda Preferida,Condici√≥n Venta,D√≠as Cr√©dito,L√≠mite Cr√©dito,Activo
fisica,cedula_fisica,123456789,Juan P√©rez Rodr√≠guez,,juan.perez@email.com,juan.trabajo@email.com,506,88888888,22222222,San Jos√©,San Jos√©,Carmen,Centro,Casa blanca con port√≥n negro,10101,CR,,,620200,general,,,0,,CRC,contado,0,0,true
juridica,cedula_juridica,3101234567,Empresa Ejemplo S.A.,Empresa Ejemplo,info@empresa.com,ventas@empresa.com;contabilidad@empresa.com,506,25551234,25551235,Alajuela,Alajuela,Alajuela,Centro,Edificio azul segundo piso,20101,CR,,,471100,general,,,0,,CRC,credito,30,1000000,true`,d=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),N=URL.createObjectURL(d);n.setAttribute("href",N),n.setAttribute("download","plantilla_clientes.csv"),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},T=a=>{const d=a.target.files?.[0];if(d){if(d.type!=="text/csv"&&!d.name.endsWith(".csv")){b("error","Por favor seleccione un archivo CSV");return}h(d),I([]),C(!1),u(null)}},F=async()=>{if(g)try{k(!0);const d=(await g.text()).split(`
`).filter(x=>x.trim());if(d.length<2){b("error","El archivo debe contener al menos una fila de encabezados y una fila de datos");return}const n=d[0].split(",").map(x=>x.trim().replace(/"/g,"")),N=d.slice(1),l=[];for(let x=0;x<N.length;x++){const A=N[x].split(",").map($=>$.trim().replace(/"/g,"")),X=x+2;if(A.every($=>!$))continue;const r={},P=[],V=[];n.forEach(($,K)=>{const m=A[K];if(m)switch($.toLowerCase()){case"tipo persona":["fisica","juridica","extranjero"].includes(m)?r.tipo_persona=m:P.push(`Tipo persona inv√°lido: ${m}`);break;case"tipo identificaci√≥n":["cedula_fisica","cedula_juridica","dimex","nite","pasaporte"].includes(m)?r.tipo_identificacion=m:P.push(`Tipo identificaci√≥n inv√°lido: ${m}`);break;case"identificaci√≥n":r.identificacion=m;break;case"nombre/raz√≥n social":r.nombre_razon_social=m;break;case"nombre comercial":r.nombre_comercial=m;break;case"correo principal":f.validarEmail(m)?r.correo_principal=m:P.push(`Email inv√°lido: ${m}`);break;case"correos adicionales":const G=m.split(";").map(L=>L.trim()).filter(L=>L),W=G.filter(L=>f.validarEmail(L));W.length!==G.length&&V.push("Algunos correos adicionales son inv√°lidos"),r.correos_adicionales=W;break;case"pa√≠s tel√©fono":r.telefono_pais=m;break;case"tel√©fono":f.validarTelefono(m)?r.telefono_numero=m:V.push(`Tel√©fono inv√°lido: ${m}`);break;case"tel√©fono secundario":r.telefono_secundario=m;break;case"c√≥digo actividad econ√≥mica":r.codigo_actividad_economica=m;break;case"r√©gimen tributario":["general","simplificado","exento","otro"].includes(m)?r.regimen_tributario=m:V.push(`R√©gimen tributario inv√°lido: ${m}`);break;case"moneda preferida":r.moneda_preferida=m;break;case"d√≠as cr√©dito":const U=parseInt(m);!isNaN(U)&&U>=0?r.dias_credito=U:V.push(`D√≠as cr√©dito inv√°lido: ${m}`);break;case"l√≠mite cr√©dito":const B=parseFloat(m);!isNaN(B)&&B>=0?r.limite_credito=B:V.push(`L√≠mite cr√©dito inv√°lido: ${m}`);break;case"activo":r.activo=m.toLowerCase()==="true";break}}),r.tipo_persona||P.push("Tipo persona es obligatorio"),r.tipo_identificacion||P.push("Tipo identificaci√≥n es obligatorio"),r.identificacion||P.push("Identificaci√≥n es obligatoria"),r.nombre_razon_social||P.push("Nombre/Raz√≥n social es obligatorio"),r.correo_principal||P.push("Correo principal es obligatorio"),r.identificacion&&r.tipo_identificacion&&(f.validarIdentificacion(r.tipo_identificacion,r.identificacion)||P.push("Formato de identificaci√≥n inv√°lido")),r.telefono_pais=r.telefono_pais||"506",r.moneda_preferida=r.moneda_preferida||"CRC",r.dias_credito=r.dias_credito||0,r.limite_credito=r.limite_credito||0,r.activo=r.activo!==!1,r.hacienda_estado_validacion="pendiente",l.push({fila:X,datos:r,errores:P,advertencias:V})}I(l),C(!0)}catch(a){console.error("Error procesando archivo:",a),b("error","Error al procesar el archivo. Verifique el formato.")}finally{k(!1)}},J=async()=>{try{v(!0);const a=y.filter(l=>l.errores.length===0);if(a.length===0){b("warning","No hay clientes v√°lidos para importar");return}let d=0,n=0;const N=[];for(const l of a)try{await f.crearCliente(l.datos),d++}catch(x){n++,N.push(`Fila ${l.fila}: ${x.message}`)}u({exitosos:d,errores:n,detalles:N}),d>0&&setTimeout(()=>{s()},2e3)}catch(a){console.error("Error en importaci√≥n:",a),b("error","Error durante la importaci√≥n")}finally{v(!1)}},M=y.filter(a=>a.errores.length>0),q=y.filter(a=>a.errores.length===0);return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[e.jsx(Q,{isOpen:w.isOpen,type:w.type,message:w.message,onClose:O}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Importar Clientes"}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!E&&!t&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-600 text-xl mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Instrucciones de Importaci√≥n"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Descargue la plantilla CSV para ver el formato correcto"}),e.jsx("li",{children:"‚Ä¢ Complete los datos siguiendo las instrucciones de la plantilla"}),e.jsx("li",{children:"‚Ä¢ Los campos obligatorios son: Tipo Persona, Tipo Identificaci√≥n, Identificaci√≥n, Nombre/Raz√≥n Social, Correo Principal"}),e.jsx("li",{children:"‚Ä¢ El sistema validar√° duplicados por identificaci√≥n"}),e.jsx("li",{children:"‚Ä¢ Se pueden actualizar clientes existentes"})]})]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("button",{onClick:S,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center mx-auto",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Descargar Plantilla CSV"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Incluye ejemplos e instrucciones detalladas"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx("i",{className:"ri-file-text-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Seleccionar Archivo"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Seleccione un archivo CSV con los datos de clientes"}),e.jsx("input",{ref:D,type:"file",accept:".csv",onChange:T,className:"hidden"}),e.jsxs("button",{onClick:()=>D.current?.click(),className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[e.jsx("i",{className:"ri-folder-open-line mr-2"}),"Seleccionar Archivo"]}),g&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("i",{className:"ri-file-line text-gray-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:g.name})]}),e.jsx("button",{onClick:F,disabled:_,className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:_?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-play-line mr-2"}),"Procesar Archivo"]})})]})]})]}),E&&!t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 text-xl mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"V√°lidos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:q.length})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-close-line text-red-600 text-xl mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Con Errores"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:M.length})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-file-list-line text-blue-600 text-xl mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:y.length})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Vista Previa de Importaci√≥n"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Primeras 50 filas"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fila"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Identificaci√≥n"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correo"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Observaciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.slice(0,50).map((a,d)=>e.jsxs("tr",{className:a.errores.length>0?"bg-red-50":"bg-white",children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.fila}),e.jsx("td",{className:"px-4 py-2",children:a.errores.length>0?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx("i",{className:"ri-close-line mr-1"}),"Error"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("i",{className:"ri-check-line mr-1"}),"V√°lido"]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.datos.identificacion}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.datos.nombre_razon_social}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.datos.correo_principal}),e.jsxs("td",{className:"px-4 py-2 text-sm",children:[a.errores.length>0&&e.jsx("div",{className:"text-red-600",children:a.errores.map((n,N)=>e.jsxs("div",{className:"text-xs",children:["‚Ä¢ ",n]},N))}),a.advertencias.length>0&&e.jsx("div",{className:"text-yellow-600",children:a.advertencias.map((n,N)=>e.jsxs("div",{className:"text-xs",children:["‚ö† ",n]},N))})]})]},d))})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Volver"]}),e.jsx("button",{onClick:J,disabled:p||q.length===0,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 transition-colors",children:p?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-upload-line mr-2"}),"Importar ",q.length," Clientes"]})})]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-check-line text-3xl text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Importaci√≥n Completada"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("i",{className:"ri-check-line text-green-600 text-2xl mb-2"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Clientes Importados"}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:t.exitosos})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("i",{className:"ri-close-line text-red-600 text-2xl mb-2"}),e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Errores"}),e.jsx("p",{className:"text-3xl font-bold text-red-900",children:t.errores})]})]}),t.detalles.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Detalles de Errores:"}),e.jsx("div",{className:"space-y-1",children:t.detalles.map((a,d)=>e.jsxs("p",{className:"text-sm text-red-800",children:["‚Ä¢ ",a]},d))})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:s,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Finalizar"]})})]})]})]})]})}function Ee(){const{currentStore:s}=ee(),[j,g]=c.useState([]),[h,_]=c.useState(!0),[k,p]=c.useState(!1),[v,y]=c.useState(!1),[I,E]=c.useState(!1),[C,t]=c.useState(null),[u,w]=c.useState({}),[z,D]=c.useState(0),[b,O]=c.useState({isOpen:!1,type:"info",message:""}),[S,T]=c.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),F=(l,x)=>{O({isOpen:!0,type:l,message:x})},J=()=>{O(l=>({...l,isOpen:!1}))},M=c.useCallback(async()=>{if(!s){g([]),_(!1);return}_(!0);try{const l=await f.obtenerClientes(u);g(l)}catch(l){console.error("Error cargando clientes:",l),g([])}finally{_(!1)}},[u,s]);c.useEffect(()=>{M()},[M,z]);const q=()=>{t(null),p(!0)},a=l=>{t(l),p(!0)},d=async l=>{T({isOpen:!0,title:"Eliminar Cliente",message:"¬øEst√° seguro de que desea eliminar este cliente?",onConfirm:async()=>{try{await f.eliminarCliente(l),D(x=>x+1),F("success","Cliente eliminado exitosamente")}catch(x){console.error("Error eliminando cliente:",x),F("error","Error al eliminar el cliente")}}})},n=async l=>{try{C?(await f.actualizarCliente(C.id,l),F("success","Cliente actualizado exitosamente")):(await f.crearCliente(l),F("success","Cliente creado exitosamente")),p(!1),t(null),D(x=>x+1)}catch(x){console.error("Error guardando cliente:",x),F("error",x.message||"Error al guardar el cliente")}},N=()=>{y(!1),D(l=>l+1)};return s?e.jsxs(Z,{children:[e.jsx(Q,{isOpen:b.isOpen,type:b.type,message:b.message,onClose:J}),e.jsx(ie,{isOpen:S.isOpen,type:"danger",title:S.title,message:S.message,onConfirm:()=>{S.onConfirm(),T(l=>({...l,isOpen:!1}))},onCancel:()=>T(l=>({...l,isOpen:!1}))}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gesti√≥n de Clientes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Administra tu cartera de clientes con validaci√≥n de Hacienda"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(H,{permission:"clientes:view",variant:"primary",onClick:()=>E(!0),children:[e.jsx("i",{className:"ri-search-line mr-2"}),"Buscar Cliente"]}),e.jsxs(H,{permission:"clientes:create",variant:"success",onClick:()=>y(!0),children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Importar"]}),e.jsxs(H,{permission:"clientes:create",variant:"primary",onClick:q,className:"bg-teal-600 hover:bg-teal-700",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Cliente"]})]})]}),e.jsx(fe,{filters:u,onFiltersChange:w}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-user-line text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-shield-check-line text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Validados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(l=>l.hacienda_estado_validacion==="valido").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx("i",{className:"ri-time-line text-yellow-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(l=>l.hacienda_estado_validacion==="pendiente").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"ri-building-line text-purple-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Jur√≠dicos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(l=>l.tipo_persona==="juridica").length})]})]})})]}),e.jsx(ge,{clientes:j,loading:h,onEdit:a,onDelete:d})]}),k&&e.jsx(he,{cliente:C,onSubmit:n,onCancel:()=>{p(!1),t(null)}}),v&&e.jsx(be,{onSuccess:N,onCancel:()=>y(!1)}),I&&e.jsx(ue,{onSelect:l=>{E(!1),a(l)},onCancel:()=>E(!1)})]}):e.jsx(Z,{children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("i",{className:"ri-store-line text-4xl mb-4"}),e.jsx("p",{children:"No hay tienda seleccionada. Por favor, seleccione una tienda para continuar."})]})})})}export{Ee as default};
//# sourceMappingURL=page-DKdgaJfw.js.map
