{"version":3,"file":"page-DwcasmK7.js","sources":["../../src/pages/facturacion/components/FacturacionTable.tsx","../../src/pages/facturacion/components/FacturacionFilters.tsx","../../src/types/facturacion.ts","../../src/pages/facturacion/components/FacturacionForm.tsx","../../src/pages/facturacion/components/ConfiguracionHacienda.tsx","../../src/pages/facturacion/components/ComprobantesRecibidos.tsx","../../src/pages/facturacion/page.tsx"],"sourcesContent":["import { formatCurrency } from '../../../lib/currency';\nimport type { FacturaElectronica } from '../../../types/facturacion';\n\ninterface FacturacionTableProps {\n  facturas: FacturaElectronica[];\n  loading: boolean;\n  onEdit: (factura: FacturaElectronica) => void;\n  onFirmar: (factura: FacturaElectronica) => void;\n  onEnviar: (factura: FacturaElectronica) => void;\n  onConsultarEstado: (factura: FacturaElectronica) => void;\n}\n\nexport function FacturacionTable({\n  facturas,\n  loading,\n  onEdit,\n  onFirmar,\n  onEnviar,\n  onConsultarEstado\n}: FacturacionTableProps) {\n  const getEstadoBadge = (estadoLocal: string, estadoHacienda?: string) => {\n    const estado = estadoHacienda || estadoLocal;\n    const colors = {\n      borrador: 'bg-gray-100 text-gray-800',\n      firmado: 'bg-blue-100 text-blue-800',\n      enviado: 'bg-yellow-100 text-yellow-800',\n      recibido: 'bg-orange-100 text-orange-800',\n      aceptado: 'bg-green-100 text-green-800',\n      rechazado: 'bg-red-100 text-red-800'\n    };\n\n    return (\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${colors[estado as keyof typeof colors] || 'bg-gray-100 text-gray-800'}`}>\n        {estado.charAt(0).toUpperCase() + estado.slice(1)}\n      </span>\n    );\n  };\n\n  const formatFecha = (fecha: string) => {\n    return new Date(fecha).toLocaleDateString('es-CR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"p-6 text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">Cargando facturas...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Consecutivo\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Cliente\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Fecha\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Total\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Estado\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Acciones\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {facturas.length === 0 ? (\n              <tr>\n                <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\n                  <i className=\"ri-file-text-line text-4xl mb-4 block\"></i>\n                  No hay facturas registradas\n                </td>\n              </tr>\n            ) : (\n              facturas.map((factura) => (\n                <tr key={factura.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900\">\n                      {factura.consecutivo}\n                    </div>\n                    <div className=\"text-sm text-gray-500\">\n                      {factura.clave}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">\n                      {factura.cliente?.razon_social || factura.cliente?.nombre_completo || 'Sin cliente'}\n                    </div>\n                    <div className=\"text-sm text-gray-500\">\n                      {factura.cliente?.identificacion}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {formatFecha(factura.fecha_emision)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {formatCurrency(factura.total)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    {getEstadoBadge(factura.estado_local, factura.estado_hacienda)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={() => onEdit(factura)}\n                        className=\"text-blue-600 hover:text-blue-900\"\n                        title=\"Editar\"\n                      >\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      \n                      {factura.estado_local === 'borrador' && (\n                        <button\n                          onClick={() => onFirmar(factura)}\n                          className=\"text-green-600 hover:text-green-900\"\n                          title=\"Firmar\"\n                        >\n                          <i className=\"ri-shield-check-line\"></i>\n                        </button>\n                      )}\n                      \n                      {factura.estado_local === 'firmado' && (\n                        <button\n                          onClick={() => onEnviar(factura)}\n                          className=\"text-orange-600 hover:text-orange-900\"\n                          title=\"Enviar a Hacienda\"\n                        >\n                          <i className=\"ri-send-plane-line\"></i>\n                        </button>\n                      )}\n                      \n                      {factura.estado_local === 'enviado' && (\n                        <button\n                          onClick={() => onConsultarEstado(factura)}\n                          className=\"text-purple-600 hover:text-purple-900\"\n                          title=\"Consultar Estado\"\n                        >\n                          <i className=\"ri-refresh-line\"></i>\n                        </button>\n                      )}\n                      \n                      <button\n                        onClick={() => window.open(`/facturacion/${factura.id}/print`, '_blank')}\n                        className=\"text-gray-600 hover:text-gray-900\"\n                        title=\"Imprimir\"\n                      >\n                        <i className=\"ri-printer-line\"></i>\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\n\ninterface FacturacionFiltersProps {\n  filters: any;\n  onFiltersChange: (filters: any) => void;\n}\n\nexport function FacturacionFilters({ filters, onFiltersChange }: FacturacionFiltersProps) {\n  const [clientes] = useState<any[]>([\n    { id: 1, razon_social: 'Cliente Demo 1', identificacion: '1-1234-5678' },\n    { id: 2, razon_social: 'Cliente Demo 2', identificacion: '2-2345-6789' }\n  ]);\n\n  const handleFilterChange = (field: string, value: any) => {\n    onFiltersChange({\n      ...filters,\n      [field]: value\n    });\n  };\n\n  const handleReset = () => {\n    onFiltersChange({\n      fecha_desde: '',\n      fecha_hasta: '',\n      estado_local: '',\n      cliente_id: null\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-4 rounded-lg shadow space-y-4\">\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Fecha Desde\n          </label>\n          <input\n            type=\"date\"\n            value={filters.fecha_desde}\n            onChange={(e) => handleFilterChange('fecha_desde', e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n          />\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Fecha Hasta\n          </label>\n          <input\n            type=\"date\"\n            value={filters.fecha_hasta}\n            onChange={(e) => handleFilterChange('fecha_hasta', e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n          />\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Estado\n          </label>\n          <select\n            value={filters.estado_local}\n            onChange={(e) => handleFilterChange('estado_local', e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n          >\n            <option value=\"\">Todos</option>\n            <option value=\"borrador\">Borrador</option>\n            <option value=\"firmado\">Firmado</option>\n            <option value=\"enviado\">Enviado</option>\n            <option value=\"aceptado\">Aceptado</option>\n            <option value=\"rechazado\">Rechazado</option>\n          </select>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Cliente\n          </label>\n          <select\n            value={filters.cliente_id || ''}\n            onChange={(e) => handleFilterChange('cliente_id', e.target.value ? parseInt(e.target.value) : null)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n          >\n            <option value=\"\">Todos</option>\n            {clientes.map((cliente) => (\n              <option key={cliente.id} value={cliente.id}>\n                {cliente.razon_social}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleReset}\n          className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-refresh-line mr-2\"></i>\n          Limpiar Filtros\n        </button>\n      </div>\n    </div>\n  );\n}","// Tipos para el módulo de Facturación Electrónica Costa Rica\n\nexport interface HaciendaSettings {\n  id?: number;\n  cedula_emisor: string;\n  codigo_actividad_economica: string;\n  sucursal: string;\n  terminal: string;\n  ambiente: 'sandbox' | 'produccion';\n  usuario_idp: string;\n  password_idp_encrypted: string;\n  certificado_p12_path?: string;\n  certificado_password_encrypted?: string;\n  proveedor_sistema?: string;\n  activo: boolean;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface HaciendaConsecutivo {\n  id?: number;\n  tipo_documento: string;\n  sucursal: string;\n  terminal: string;\n  consecutivo_actual: number;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface FacturaElectronica {\n  id?: number;\n  clave: string;\n  consecutivo: string;\n  tipo_documento: string;\n  cliente_id?: number;\n  cliente?: any;\n  fecha_emision: string;\n  moneda: string;\n  tipo_cambio: number;\n  condicion_venta: string;\n  plazo_credito: number;\n  medio_pago: string;\n  estado_local: 'borrador' | 'firmado' | 'enviado' | 'aceptado' | 'rechazado';\n  estado_hacienda?: 'recibido' | 'aceptado' | 'rechazado';\n  subtotal: number;\n  descuento_total: number;\n  impuesto_total: number;\n  total: number;\n  xml_original?: string;\n  xml_firmado?: string;\n  hash_documento?: string;\n  observaciones?: string;\n  referencia_clave?: string;\n  referencia_codigo?: string;\n  referencia_razon?: string;\n  lineas?: FacturaLinea[];\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface FacturaLinea {\n  id?: number;\n  factura_id?: number;\n  numero_linea: number;\n  codigo_articulo?: string;\n  descripcion: string;\n  unidad_medida: string;\n  cantidad: number;\n  precio_unitario: number;\n  descuento_porcentaje: number;\n  descuento_monto: number;\n  subtotal_linea: number;\n  impuesto_porcentaje: number;\n  impuesto_monto: number;\n  total_linea: number;\n  created_at?: string;\n}\n\nexport interface HaciendaEnvio {\n  id?: number;\n  factura_id?: number;\n  tipo_envio: 'factura' | 'mensaje_receptor';\n  request_payload?: string;\n  response_payload?: string;\n  status_code?: number;\n  location_header?: string;\n  estado: 'enviado' | 'consultando' | 'completado' | 'error';\n  intentos: number;\n  ultimo_intento?: string;\n  proximo_intento?: string;\n  error_mensaje?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface ComprobanteRecibido {\n  id?: number;\n  clave: string;\n  emisor_cedula: string;\n  emisor_nombre?: string;\n  fecha_emision: string;\n  tipo_documento: string;\n  moneda?: string;\n  total?: number;\n  xml_comprobante?: string;\n  estado_receptor: 'pendiente' | 'aceptado' | 'rechazado';\n  fecha_respuesta?: string;\n  xml_respuesta?: string;\n  observaciones?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface HaciendaAuditoria {\n  id?: number;\n  usuario_id?: string;\n  accion: string;\n  tabla_afectada?: string;\n  registro_id?: number;\n  datos_anteriores?: any;\n  datos_nuevos?: any;\n  ip_address?: string;\n  user_agent?: string;\n  created_at?: string;\n}\n\nexport interface TokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  refresh_token?: string;\n}\n\nexport interface HaciendaResponse {\n  clave: string;\n  fecha: string;\n  ind_estado: string;\n  respuesta_xml?: string;\n}\n\nexport const TIPOS_DOCUMENTO = {\n  '01': 'Factura Electrónica',\n  '02': 'Nota Débito',\n  '03': 'Nota Crédito',\n  '04': 'Tiquete Electrónico',\n  '05': 'Factura Compra',\n  '06': 'Factura Exportación',\n  '07': 'Recibo Electrónico'\n};\n\nexport const CONDICIONES_VENTA = {\n  '01': 'Contado',\n  '02': 'Crédito',\n  '03': 'Consignación',\n  '04': 'Apartado',\n  '05': 'Arrendamiento con opción de compra',\n  '06': 'Arrendamiento en función financiera',\n  '99': 'Otros'\n};\n\nexport const MEDIOS_PAGO = {\n  '01': 'Efectivo',\n  '02': 'Tarjeta',\n  '03': 'Cheque',\n  '04': 'Transferencia',\n  '05': 'Recaudado por terceros',\n  '99': 'Otros'\n};\n\nexport const CODIGOS_REFERENCIA = {\n  '01': 'Anula documento de referencia',\n  '02': 'Corrige texto documento de referencia',\n  '03': 'Corrige monto',\n  '04': 'Referencia a otro documento',\n  '05': 'Sustituye comprobante provisional por contingencia',\n  '99': 'Otros'\n};\n\nexport const UNIDADES_MEDIDA = {\n  'Unid': 'Unidad',\n  'Kg': 'Kilogramo',\n  'g': 'Gramo',\n  'L': 'Litro',\n  'mL': 'Mililitro',\n  'm': 'Metro',\n  'cm': 'Centímetro',\n  'm²': 'Metro cuadrado',\n  'm³': 'Metro cúbico',\n  'h': 'Hora',\n  'min': 'Minuto',\n  'Sp': 'Servicio profesional',\n  'St': 'Servicio técnico',\n  'Otros': 'Otros'\n};","import { useState, useEffect } from 'react';\nimport { formatCurrency } from '../../../lib/currency';\nimport type { FacturaElectronica, FacturaLinea } from '../../../types/facturacion';\nimport { TIPOS_DOCUMENTO, CONDICIONES_VENTA, MEDIOS_PAGO, UNIDADES_MEDIDA } from '../../../types/facturacion';\n\ninterface FacturacionFormProps {\n  factura: FacturaElectronica | null;\n  onClose: () => void;\n}\n\nexport function FacturacionForm({ factura, onClose }: FacturacionFormProps) {\n  const [formData, setFormData] = useState<Partial<FacturaElectronica>>({\n    tipo_documento: '01',\n    fecha_emision: new Date().toISOString().split('T')[0],\n    moneda: 'CRC',\n    tipo_cambio: 1.0000,\n    condicion_venta: '01',\n    plazo_credito: 0,\n    medio_pago: '01',\n    estado_local: 'borrador',\n    subtotal: 0,\n    descuento_total: 0,\n    impuesto_total: 0,\n    total: 0\n  });\n\n  const [lineas, setLineas] = useState<FacturaLinea[]>([]);\n  const [clientes] = useState<any[]>([\n    { id: 1, razon_social: 'Cliente Demo 1', identificacion: '1-1234-5678' },\n    { id: 2, razon_social: 'Cliente Demo 2', identificacion: '2-2345-6789' }\n  ]);\n  const [productos] = useState<any[]>([\n    { id: 1, codigo: 'PROD001', descripcion: 'Producto Demo 1', precio_venta: 10000, unidad_medida: 'Unid' },\n    { id: 2, codigo: 'PROD002', descripcion: 'Producto Demo 2', precio_venta: 20000, unidad_medida: 'Unid' }\n  ]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (factura) {\n      setFormData(factura);\n      setLineas(factura.lineas || []);\n    }\n  }, [factura]);\n\n  useEffect(() => {\n    calcularTotales();\n  }, [lineas]);\n\n  const calcularTotales = () => {\n    const subtotal = lineas.reduce((sum, linea) => sum + linea.subtotal_linea, 0);\n    const descuentoTotal = lineas.reduce((sum, linea) => sum + linea.descuento_monto, 0);\n    const impuestoTotal = lineas.reduce((sum, linea) => sum + linea.impuesto_monto, 0);\n    const total = subtotal - descuentoTotal + impuestoTotal;\n\n    setFormData(prev => ({\n      ...prev,\n      subtotal,\n      descuento_total: descuentoTotal,\n      impuesto_total: impuestoTotal,\n      total\n    }));\n  };\n\n  const agregarLinea = () => {\n    const nuevaLinea: FacturaLinea = {\n      numero_linea: lineas.length + 1,\n      descripcion: '',\n      unidad_medida: 'Unid',\n      cantidad: 1,\n      precio_unitario: 0,\n      descuento_porcentaje: 0,\n      descuento_monto: 0,\n      subtotal_linea: 0,\n      impuesto_porcentaje: 13.00,\n      impuesto_monto: 0,\n      total_linea: 0\n    };\n\n    setLineas([...lineas, nuevaLinea]);\n  };\n\n  const actualizarLinea = (index: number, campo: keyof FacturaLinea, valor: any) => {\n    const nuevasLineas = [...lineas];\n    nuevasLineas[index] = { ...nuevasLineas[index], [campo]: valor };\n\n    // Recalcular totales de la línea\n    const linea = nuevasLineas[index];\n    const subtotalLinea = linea.cantidad * linea.precio_unitario;\n    const descuentoMonto = (subtotalLinea * linea.descuento_porcentaje) / 100;\n    const baseImpuesto = subtotalLinea - descuentoMonto;\n    const impuestoMonto = (baseImpuesto * linea.impuesto_porcentaje) / 100;\n    const totalLinea = baseImpuesto + impuestoMonto;\n\n    nuevasLineas[index] = {\n      ...linea,\n      subtotal_linea: subtotalLinea,\n      descuento_monto: descuentoMonto,\n      impuesto_monto: impuestoMonto,\n      total_linea: totalLinea\n    };\n\n    setLineas(nuevasLineas);\n  };\n\n  const eliminarLinea = (index: number) => {\n    const nuevasLineas = lineas.filter((_, i) => i !== index);\n    // Renumerar líneas\n    nuevasLineas.forEach((linea, i) => {\n      linea.numero_linea = i + 1;\n    });\n    setLineas(nuevasLineas);\n  };\n\n  const seleccionarProducto = (index: number, productoId: string) => {\n    const producto = productos.find(p => p.id === parseInt(productoId));\n    if (producto) {\n      actualizarLinea(index, 'codigo_articulo', producto.codigo);\n      actualizarLinea(index, 'descripcion', producto.descripcion);\n      actualizarLinea(index, 'precio_unitario', producto.precio_venta || 0);\n      actualizarLinea(index, 'unidad_medida', producto.unidad_medida || 'Unid');\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      if (lineas.length === 0) {\n        alert('Debe agregar al menos una línea');\n        return;\n      }\n\n      // Simulación de guardado\n      console.log('Guardando factura:', { formData, lineas });\n      \n      alert('Factura guardada exitosamente (modo demo)');\n      onClose();\n    } catch (error) {\n      console.error('Error guardando factura:', error);\n      alert('Error guardando factura');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">\n          {factura ? 'Editar Factura' : 'Nueva Factura'}\n        </h2>\n        <button\n          onClick={onClose}\n          className=\"text-gray-400 hover:text-gray-600 cursor-pointer\"\n        >\n          <i className=\"ri-close-line text-2xl\"></i>\n        </button>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Información General */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Información General</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Tipo de Documento\n              </label>\n              <select\n                value={formData.tipo_documento}\n                onChange={(e) => setFormData({ ...formData, tipo_documento: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                required\n              >\n                {Object.entries(TIPOS_DOCUMENTO).map(([codigo, nombre]) => (\n                  <option key={codigo} value={codigo}>{nombre}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cliente\n              </label>\n              <select\n                value={formData.cliente_id || ''}\n                onChange={(e) => setFormData({ ...formData, cliente_id: parseInt(e.target.value) })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                required\n              >\n                <option value=\"\">Seleccionar cliente</option>\n                {clientes.map((cliente) => (\n                  <option key={cliente.id} value={cliente.id}>\n                    {cliente.razon_social} - {cliente.identificacion}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Fecha de Emisión\n              </label>\n              <input\n                type=\"date\"\n                value={formData.fecha_emision?.split('T')[0]}\n                onChange={(e) => setFormData({ ...formData, fecha_emision: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Condición de Venta\n              </label>\n              <select\n                value={formData.condicion_venta}\n                onChange={(e) => setFormData({ ...formData, condicion_venta: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n              >\n                {Object.entries(CONDICIONES_VENTA).map(([codigo, nombre]) => (\n                  <option key={codigo} value={codigo}>{nombre}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Medio de Pago\n              </label>\n              <select\n                value={formData.medio_pago}\n                onChange={(e) => setFormData({ ...formData, medio_pago: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n              >\n                {Object.entries(MEDIOS_PAGO).map(([codigo, nombre]) => (\n                  <option key={codigo} value={codigo}>{nombre}</option>\n                ))}\n              </select>\n            </div>\n\n            {formData.condicion_venta === '02' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Plazo de Crédito (días)\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.plazo_credito}\n                  onChange={(e) => setFormData({ ...formData, plazo_credito: parseInt(e.target.value) })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                  min=\"0\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Líneas de Detalle */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-lg font-medium text-gray-900\">Líneas de Detalle</h3>\n            <button\n              type=\"button\"\n              onClick={agregarLinea}\n              className=\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              Agregar Línea\n            </button>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Producto</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Descripción</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Cantidad</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Precio</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Descuento %</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Total</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {lineas.map((linea, index) => (\n                  <tr key={index}>\n                    <td className=\"px-3 py-2\">\n                      <select\n                        onChange={(e) => seleccionarProducto(index, e.target.value)}\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                      >\n                        <option value=\"\">Seleccionar</option>\n                        {productos.map((producto) => (\n                          <option key={producto.id} value={producto.id}>\n                            {producto.codigo} - {producto.descripcion}\n                          </option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"px-3 py-2\">\n                      <input\n                        type=\"text\"\n                        value={linea.descripcion}\n                        onChange={(e) => actualizarLinea(index, 'descripcion', e.target.value)}\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                        required\n                      />\n                    </td>\n                    <td className=\"px-3 py-2\">\n                      <input\n                        type=\"number\"\n                        value={linea.cantidad}\n                        onChange={(e) => actualizarLinea(index, 'cantidad', parseFloat(e.target.value))}\n                        className=\"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        required\n                      />\n                    </td>\n                    <td className=\"px-3 py-2\">\n                      <input\n                        type=\"number\"\n                        value={linea.precio_unitario}\n                        onChange={(e) => actualizarLinea(index, 'precio_unitario', parseFloat(e.target.value))}\n                        className=\"w-24 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        required\n                      />\n                    </td>\n                    <td className=\"px-3 py-2\">\n                      <input\n                        type=\"number\"\n                        value={linea.descuento_porcentaje}\n                        onChange={(e) => actualizarLinea(index, 'descuento_porcentaje', parseFloat(e.target.value))}\n                        className=\"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-orange-500\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.01\"\n                      />\n                    </td>\n                    <td className=\"px-3 py-2 text-sm font-medium\">\n                      {formatCurrency(linea.total_linea)}\n                    </td>\n                    <td className=\"px-3 py-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => eliminarLinea(index)}\n                        className=\"text-red-600 hover:text-red-900 cursor-pointer\"\n                      >\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* Totales */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Resumen</h3>\n          \n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600\">Subtotal</p>\n              <p className=\"text-lg font-semibold\">{formatCurrency(formData.subtotal || 0)}</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600\">Descuento</p>\n              <p className=\"text-lg font-semibold text-red-600\">-{formatCurrency(formData.descuento_total || 0)}</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600\">Impuesto</p>\n              <p className=\"text-lg font-semibold\">{formatCurrency(formData.impuesto_total || 0)}</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600\">Total</p>\n              <p className=\"text-xl font-bold text-orange-600\">{formatCurrency(formData.total || 0)}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Botones */}\n        <div className=\"flex justify-end space-x-4\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer\"\n          >\n            Cancelar\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 whitespace-nowrap cursor-pointer\"\n          >\n            {loading ? 'Guardando...' : 'Guardar Factura'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { haciendaService } from '../../../services/haciendaService';\nimport type { HaciendaSettings } from '../../../types/facturacion';\n\nexport function ConfiguracionHacienda() {\n  const [settings, setSettings] = useState<Partial<HaciendaSettings>>({\n    cedula_emisor: '',\n    codigo_actividad_economica: '',\n    sucursal: '001',\n    terminal: '00001',\n    ambiente: 'sandbox',\n    usuario_idp: '',\n    password_idp_encrypted: '',\n    certificado_p12_path: '',\n    certificado_password_encrypted: '',\n    proveedor_sistema: 'OLO Sistema de Gestión',\n    activo: true\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [testing, setTesting] = useState(false);\n  const [testResult, setTestResult] = useState<{ success: boolean; message: string } | null>(null);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const data = await haciendaService.getSettings();\n      if (data) {\n        setSettings(data);\n      }\n    } catch (error) {\n      console.error('Error cargando configuración:', error);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const success = await haciendaService.saveSettings(settings);\n      if (success) {\n        alert('Configuración guardada exitosamente');\n        loadSettings();\n      } else {\n        alert('Error guardando configuración');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('Error guardando configuración');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTestConnection = async () => {\n    setTesting(true);\n    setTestResult(null);\n\n    try {\n      const result = await haciendaService.testConnection();\n      setTestResult(result);\n    } catch (error) {\n      setTestResult({\n        success: false,\n        message: 'Error probando conexión'\n      });\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Configuración de Hacienda</h2>\n        <button\n          onClick={handleTestConnection}\n          disabled={testing}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 whitespace-nowrap\"\n        >\n          {testing ? (\n            <>\n              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n              Probando...\n            </>\n          ) : (\n            <>\n              <i className=\"ri-wifi-line mr-2\"></i>\n              Probar Conexión\n            </>\n          )}\n        </button>\n      </div>\n\n      {testResult && (\n        <div className={`p-4 rounded-lg ${testResult.success ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'}`}>\n          <div className=\"flex items-center\">\n            <i className={`${testResult.success ? 'ri-check-line' : 'ri-error-warning-line'} mr-2`}></i>\n            {testResult.message}\n          </div>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Información del Emisor */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Información del Emisor</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cédula Jurídica del Emisor *\n              </label>\n              <input\n                type=\"text\"\n                value={settings.cedula_emisor}\n                onChange={(e) => setSettings({ ...settings, cedula_emisor: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"3-101-123456\"\n                required\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Formato: 3-101-123456</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Código de Actividad Económica *\n              </label>\n              <input\n                type=\"text\"\n                value={settings.codigo_actividad_economica}\n                onChange={(e) => setSettings({ ...settings, codigo_actividad_economica: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"123456\"\n                required\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Código asignado por Hacienda</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Sucursal\n              </label>\n              <input\n                type=\"text\"\n                value={settings.sucursal}\n                onChange={(e) => setSettings({ ...settings, sucursal: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"001\"\n                maxLength={3}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Terminal\n              </label>\n              <input\n                type=\"text\"\n                value={settings.terminal}\n                onChange={(e) => setSettings({ ...settings, terminal: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"00001\"\n                maxLength={5}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Configuración de Ambiente */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Configuración de Ambiente</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Ambiente *\n              </label>\n              <select\n                value={settings.ambiente}\n                onChange={(e) => setSettings({ ...settings, ambiente: e.target.value as 'sandbox' | 'produccion' })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                required\n              >\n                <option value=\"sandbox\">Sandbox (Pruebas)</option>\n                <option value=\"produccion\">Producción</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Proveedor del Sistema\n              </label>\n              <input\n                type=\"text\"\n                value={settings.proveedor_sistema}\n                onChange={(e) => setSettings({ ...settings, proveedor_sistema: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"OLO Sistema de Gestión\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Credenciales IdP */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Credenciales IdP (Identity Provider)</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Usuario IdP *\n              </label>\n              <input\n                type=\"text\"\n                value={settings.usuario_idp}\n                onChange={(e) => setSettings({ ...settings, usuario_idp: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"usuario@empresa.com\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Contraseña IdP *\n              </label>\n              <input\n                type=\"password\"\n                value={settings.password_idp_encrypted}\n                onChange={(e) => setSettings({ ...settings, password_idp_encrypted: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"••••••••\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"mt-4 p-4 bg-yellow-50 rounded-lg\">\n            <div className=\"flex items-start\">\n              <i className=\"ri-information-line text-yellow-600 mr-2 mt-0.5\"></i>\n              <div className=\"text-sm text-yellow-800\">\n                <p className=\"font-medium\">Importante:</p>\n                <p>Las credenciales del IdP son proporcionadas por Hacienda al registrar su empresa para facturación electrónica.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Certificado Digital */}\n        <div className=\"bg-white p-6 rounded-lg shadow\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Certificado Digital</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Ruta del Certificado .p12\n              </label>\n              <input\n                type=\"text\"\n                value={settings.certificado_p12_path}\n                onChange={(e) => setSettings({ ...settings, certificado_p12_path: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"/ruta/al/certificado.p12\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Contraseña del Certificado\n              </label>\n              <input\n                type=\"password\"\n                value={settings.certificado_password_encrypted}\n                onChange={(e) => setSettings({ ...settings, certificado_password_encrypted: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"••••••••\"\n              />\n            </div>\n          </div>\n\n          <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n            <div className=\"flex items-start\">\n              <i className=\"ri-shield-check-line text-blue-600 mr-2 mt-0.5\"></i>\n              <div className=\"text-sm text-blue-800\">\n                <p className=\"font-medium\">Certificado Digital:</p>\n                <p>El certificado .p12 es necesario para firmar digitalmente los comprobantes electrónicos. Debe ser emitido por una autoridad certificadora reconocida por Costa Rica.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Botones */}\n        <div className=\"flex justify-end space-x-4\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 whitespace-nowrap\"\n          >\n            {loading ? 'Guardando...' : 'Guardar Configuración'}\n          </button>\n        </div>\n      </form>\n\n      {/* Información Adicional */}\n      <div className=\"bg-white p-6 rounded-lg shadow\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Información Adicional</h3>\n        \n        <div className=\"space-y-4\">\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <h4 className=\"font-medium text-gray-900 mb-2\">URLs de Ambiente Sandbox:</h4>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              <li>• API Recepción: https://api.comprobanteselectronicos.go.cr/recepcion-sandbox/v1</li>\n              <li>• IdP: https://idp.comprobanteselectronicos.go.cr/auth/realms/rut-stag/protocol/openid-connect/token</li>\n            </ul>\n          </div>\n\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <h4 className=\"font-medium text-gray-900 mb-2\">URLs de Ambiente Producción:</h4>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              <li>• API Recepción: https://api.comprobanteselectronicos.go.cr/recepcion/v1</li>\n              <li>• IdP: https://idp.comprobanteselectronicos.go.cr/auth/realms/rut/protocol/openid-connect/token</li>\n            </ul>\n          </div>\n\n          <div className=\"p-4 bg-orange-50 rounded-lg\">\n            <h4 className=\"font-medium text-orange-900 mb-2\">Pasos para Configuración:</h4>\n            <ol className=\"text-sm text-orange-800 space-y-1 list-decimal list-inside\">\n              <li>Registrarse en el portal de Hacienda para facturación electrónica</li>\n              <li>Obtener credenciales del IdP (usuario y contraseña)</li>\n              <li>Adquirir certificado digital de una autoridad certificadora</li>\n              <li>Configurar los datos en esta pantalla</li>\n              <li>Probar la conexión en ambiente sandbox</li>\n              <li>Solicitar paso a producción a Hacienda</li>\n            </ol>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\nimport { formatCurrency } from '../../../lib/currency';\nimport type { ComprobanteRecibido } from '../../../types/facturacion';\n\nexport function ComprobantesRecibidos() {\n  const [comprobantes, setComprobantes] = useState<ComprobanteRecibido[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedComprobante, setSelectedComprobante] = useState<ComprobanteRecibido | null>(null);\n  const [showModal, setShowModal] = useState(false);\n\n  useEffect(() => {\n    loadComprobantes();\n  }, []);\n\n  const loadComprobantes = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('comprobantes_recibidos')\n        .select('*')\n        .order('fecha_emision', { ascending: false });\n\n      if (error) throw error;\n      setComprobantes(data || []);\n    } catch (error) {\n      console.error('Error cargando comprobantes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAceptar = async (comprobante: ComprobanteRecibido) => {\n    try {\n      // Generar mensaje receptor de aceptación\n      const mensajeReceptor = await generarMensajeReceptor(comprobante, 'aceptado');\n      \n      // Actualizar estado\n      await supabase\n        .from('comprobantes_recibidos')\n        .update({\n          estado_receptor: 'aceptado',\n          fecha_respuesta: new Date().toISOString(),\n          xml_respuesta: mensajeReceptor\n        })\n        .eq('id', comprobante.id);\n\n      loadComprobantes();\n      alert('Comprobante aceptado exitosamente');\n    } catch (error) {\n      console.error('Error aceptando comprobante:', error);\n      alert('Error aceptando comprobante');\n    }\n  };\n\n  const handleRechazar = async (comprobante: ComprobanteRecibido, razon: string) => {\n    try {\n      // Generar mensaje receptor de rechazo\n      const mensajeReceptor = await generarMensajeReceptor(comprobante, 'rechazado', razon);\n      \n      // Actualizar estado\n      await supabase\n        .from('comprobantes_recibidos')\n        .update({\n          estado_receptor: 'rechazado',\n          fecha_respuesta: new Date().toISOString(),\n          xml_respuesta: mensajeReceptor,\n          observaciones: razon\n        })\n        .eq('id', comprobante.id);\n\n      loadComprobantes();\n      setShowModal(false);\n      alert('Comprobante rechazado exitosamente');\n    } catch (error) {\n      console.error('Error rechazando comprobante:', error);\n      alert('Error rechazando comprobante');\n    }\n  };\n\n  const generarMensajeReceptor = async (comprobante: ComprobanteRecibido, accion: string, razon?: string): Promise<string> => {\n    // Generar XML de mensaje receptor según especificaciones de Hacienda\n    const fecha = new Date().toISOString();\n    \n    const xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MensajeReceptor xmlns=\"https://cdn.comprobanteselectronicos.go.cr/xml-schemas/v4.3/mensajeReceptor\">\n  <Clave>${comprobante.clave}</Clave>\n  <NumeroCedulaEmisor>${comprobante.emisor_cedula}</NumeroCedulaEmisor>\n  <FechaEmisionDoc>${comprobante.fecha_emision}</FechaEmisionDoc>\n  <Mensaje>${accion === 'aceptado' ? '1' : '2'}</Mensaje>\n  ${razon ? `<DetalleMensaje>${razon}</DetalleMensaje>` : ''}\n  <MontoTotalImpuesto>${comprobante.total || 0}</MontoTotalImpuesto>\n  <TotalFactura>${comprobante.total || 0}</TotalFactura>\n</MensajeReceptor>`;\n\n    return xml;\n  };\n\n  const getEstadoBadge = (estado: string) => {\n    const colors = {\n      pendiente: 'bg-yellow-100 text-yellow-800',\n      aceptado: 'bg-green-100 text-green-800',\n      rechazado: 'bg-red-100 text-red-800'\n    };\n\n    return (\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${colors[estado as keyof typeof colors]}`}>\n        {estado.charAt(0).toUpperCase() + estado.slice(1)}\n      </span>\n    );\n  };\n\n  const formatFecha = (fecha: string) => {\n    return new Date(fecha).toLocaleDateString('es-CR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"p-6 text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">Cargando comprobantes recibidos...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Comprobantes Recibidos</h2>\n        <div className=\"text-sm text-gray-600\">\n          Total: {comprobantes.length} comprobantes\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Clave\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Emisor\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Fecha Emisión\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Total\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Estado\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Acciones\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {comprobantes.length === 0 ? (\n                <tr>\n                  <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\n                    <i className=\"ri-inbox-line text-4xl mb-4 block\"></i>\n                    No hay comprobantes recibidos\n                  </td>\n                </tr>\n              ) : (\n                comprobantes.map((comprobante) => (\n                  <tr key={comprobante.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {comprobante.clave}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        Tipo: {comprobante.tipo_documento}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-900\">\n                        {comprobante.emisor_nombre || 'Sin nombre'}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {comprobante.emisor_cedula}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatFecha(comprobante.fecha_emision)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {comprobante.total ? formatCurrency(comprobante.total) : 'N/A'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      {getEstadoBadge(comprobante.estado_receptor)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <div className=\"flex space-x-2\">\n                        {comprobante.estado_receptor === 'pendiente' && (\n                          <>\n                            <button\n                              onClick={() => handleAceptar(comprobante)}\n                              className=\"text-green-600 hover:text-green-900\"\n                              title=\"Aceptar\"\n                            >\n                              <i className=\"ri-check-line\"></i>\n                            </button>\n                            <button\n                              onClick={() => {\n                                setSelectedComprobante(comprobante);\n                                setShowModal(true);\n                              }}\n                              className=\"text-red-600 hover:text-red-900\"\n                              title=\"Rechazar\"\n                            >\n                              <i className=\"ri-close-line\"></i>\n                            </button>\n                          </>\n                        )}\n                        <button\n                          onClick={() => window.open(`/facturacion/comprobante/${comprobante.id}/print`, '_blank')}\n                          className=\"text-gray-600 hover:text-gray-900\"\n                          title=\"Ver/Imprimir\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal de Rechazo */}\n      {showModal && selectedComprobante && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n              Rechazar Comprobante\n            </h3>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 mb-2\">\n                Clave: {selectedComprobante.clave}\n              </p>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Emisor: {selectedComprobante.emisor_nombre}\n              </p>\n              \n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Razón del rechazo:\n              </label>\n              <textarea\n                id=\"razon-rechazo\"\n                rows={3}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                placeholder=\"Ingrese la razón del rechazo...\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-4\">\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={() => {\n                  const razon = (document.getElementById('razon-rechazo') as HTMLTextAreaElement).value;\n                  if (razon.trim()) {\n                    handleRechazar(selectedComprobante, razon);\n                  } else {\n                    alert('Debe ingresar una razón para el rechazo');\n                  }\n                }}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap\"\n              >\n                Rechazar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useEffect } from 'react';\nimport { FacturacionLayout } from './components/FacturacionLayout';\nimport { FacturacionTable } from './components/FacturacionTable';\nimport { FacturacionFilters } from './components/FacturacionFilters';\nimport { FacturacionForm } from './components/FacturacionForm';\nimport { ConfiguracionHacienda } from './components/ConfiguracionHacienda';\nimport { ComprobantesRecibidos } from './components/ComprobantesRecibidos';\nimport type { FacturaElectronica } from '../../types/facturacion';\nimport Sidebar from '../../components/feature/Sidebar';\nimport TopBar from '../../components/feature/TopBar';\nimport { supabase } from '../../lib/supabase';\n\nexport default function FacturacionPage() {\n  const [activeTab, setActiveTab] = useState('facturas');\n  const [facturas, setFacturas] = useState<FacturaElectronica[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [editingFactura, setEditingFactura] = useState<FacturaElectronica | null>(null);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [filters, setFilters] = useState({\n    fecha_desde: '',\n    fecha_hasta: '',\n    estado_local: '',\n    cliente_id: null\n  });\n\n  useEffect(() => {\n    loadFacturas();\n  }, [filters]);\n\n  const loadFacturas = async () => {\n    setLoading(true);\n    try {\n      console.log('🔍 [FACTURACIÓN] Cargando facturas desde la base de datos...');\n      console.log('🔍 [FACTURACIÓN] Filtros aplicados:', filters);\n\n      // Construir query con filtros\n      let query = supabase\n        .from('facturas_electronicas')\n        .select(`\n          id,\n          numero_consecutivo,\n          clave_numerica,\n          tipo_documento,\n          fecha_emision,\n          cliente_id,\n          estado,\n          subtotal,\n          descuento_total,\n          impuesto_total,\n          total_general,\n          moneda,\n          tipo_cambio,\n          condicion_venta,\n          medio_pago,\n          notas,\n          created_at,\n          clientes!inner(\n            id,\n            nombre_razon_social,\n            identificacion\n          )\n        `)\n        .order('created_at', { ascending: false });\n\n      // Aplicar filtros\n      if (filters.fecha_desde) {\n        query = query.gte('fecha_emision', filters.fecha_desde);\n        console.log('🔍 [FACTURACIÓN] Filtro fecha_desde:', filters.fecha_desde);\n      }\n      if (filters.fecha_hasta) {\n        query = query.lte('fecha_emision', filters.fecha_hasta);\n        console.log('🔍 [FACTURACIÓN] Filtro fecha_hasta:', filters.fecha_hasta);\n      }\n      if (filters.estado_local) {\n        query = query.eq('estado', filters.estado_local);\n        console.log('🔍 [FACTURACIÓN] Filtro estado:', filters.estado_local);\n      }\n      if (filters.cliente_id) {\n        query = query.eq('cliente_id', filters.cliente_id);\n        console.log('🔍 [FACTURACIÓN] Filtro cliente_id:', filters.cliente_id);\n      }\n\n      const { data, error } = await query;\n\n      if (error) {\n        console.error('❌ [FACTURACIÓN] Error cargando facturas:', error);\n        throw error;\n      }\n\n      console.log('✅ [FACTURACIÓN] Facturas obtenidas:', data?.length || 0);\n\n      // Mapear datos de la base de datos al formato esperado\n      const facturasFormateadas: FacturaElectronica[] = (data || []).map((factura: any) => ({\n        id: factura.id,\n        consecutivo: factura.numero_consecutivo,\n        clave: factura.clave_numerica,\n        tipo_documento: factura.tipo_documento || '01',\n        fecha_emision: factura.fecha_emision,\n        cliente_id: factura.cliente_id,\n        cliente: {\n          razon_social: factura.clientes?.nombre_razon_social,\n          identificacion: factura.clientes?.identificacion\n        },\n        estado_local: factura.estado || 'borrador',\n        estado_hacienda: undefined, // Por ahora no tenemos este campo\n        subtotal: Number(factura.subtotal) || 0,\n        descuento_total: Number(factura.descuento_total) || 0,\n        impuesto_total: Number(factura.impuesto_total) || 0,\n        total: Number(factura.total_general) || 0,\n        moneda: factura.moneda || 'CRC',\n        tipo_cambio: Number(factura.tipo_cambio) || 1,\n        condicion_venta: factura.condicion_venta || '01',\n        medio_pago: factura.medio_pago || '01',\n        plazo_credito: 0,\n        observaciones: factura.notas,\n        created_at: factura.created_at\n      }));\n\n      console.log('✅ [FACTURACIÓN] Facturas formateadas:', facturasFormateadas.length);\n      setFacturas(facturasFormateadas);\n    } catch (error) {\n      console.error('❌ [FACTURACIÓN] Error cargando facturas:', error);\n      setFacturas([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateFactura = () => {\n    setEditingFactura(null);\n    setShowForm(true);\n  };\n\n  const handleEditFactura = (factura: FacturaElectronica) => {\n    setEditingFactura(factura);\n    setShowForm(true);\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingFactura(null);\n    loadFacturas();\n  };\n\n  const handleFiltersChange = (newFilters: any) => {\n    setFilters(newFilters);\n  };\n\n  const handleFirmarFactura = async (factura: FacturaElectronica) => {\n    try {\n      alert('Funcionalidad de firma requiere configuración de Hacienda');\n    } catch (error) {\n      console.error('Error firmando factura:', error);\n      alert('Error firmando factura');\n    }\n  };\n\n  const handleEnviarFactura = async (factura: FacturaElectronica) => {\n    try {\n      alert('Funcionalidad de envío requiere configuración de Hacienda');\n    } catch (error) {\n      console.error('Error enviando factura:', error);\n      alert('Error enviando factura a Hacienda');\n    }\n  };\n\n  const handleConsultarEstado = async (factura: FacturaElectronica) => {\n    try {\n      alert('Funcionalidad de consulta requiere configuración de Hacienda');\n    } catch (error) {\n      console.error('Error consultando estado:', error);\n      alert('Error consultando estado en Hacienda');\n    }\n  };\n\n  const tabs = [\n    { id: 'facturas', label: 'Facturas Electrónicas', icon: 'ri-file-text-line' },\n    { id: 'recibidos', label: 'Comprobantes Recibidos', icon: 'ri-inbox-line' },\n    { id: 'configuracion', label: 'Configuración Hacienda', icon: 'ri-settings-3-line' }\n  ];\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <TopBar onMenuClick={() => setSidebarOpen(!sidebarOpen)} />\n        \n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <div className=\"space-y-6\">\n              {/* Tabs */}\n              <div className=\"border-b border-gray-200\">\n                <nav className=\"-mb-px flex space-x-8\">\n                  {tabs.map((tab) => (\n                    <button\n                      key={tab.id}\n                      onClick={() => setActiveTab(tab.id)}\n                      className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap cursor-pointer ${\n                        activeTab === tab.id\n                          ? 'border-orange-500 text-orange-600'\n                          : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                      }`}\n                    >\n                      <i className={`${tab.icon} mr-2`}></i>\n                      {tab.label}\n                    </button>\n                  ))}\n                </nav>\n              </div>\n\n              {/* Content */}\n              {activeTab === 'facturas' && (\n                <div className=\"space-y-6\">\n                  {!showForm ? (\n                    <>\n                      <div className=\"flex justify-between items-center\">\n                        <h1 className=\"text-2xl font-bold text-gray-900\">Facturación Electrónica</h1>\n                        <button\n                          onClick={handleCreateFactura}\n                          className=\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors whitespace-nowrap cursor-pointer\"\n                        >\n                          <i className=\"ri-add-line mr-2\"></i>\n                          Nueva Factura\n                        </button>\n                      </div>\n\n                      <FacturacionFilters\n                        filters={filters}\n                        onFiltersChange={handleFiltersChange}\n                      />\n\n                      <FacturacionTable\n                        facturas={facturas}\n                        loading={loading}\n                        onEdit={handleEditFactura}\n                        onFirmar={handleFirmarFactura}\n                        onEnviar={handleEnviarFactura}\n                        onConsultarEstado={handleConsultarEstado}\n                      />\n                    </>\n                  ) : (\n                    <FacturacionForm\n                      factura={editingFactura}\n                      onClose={handleCloseForm}\n                    />\n                  )}\n                </div>\n              )}\n\n              {activeTab === 'recibidos' && (\n                <ComprobantesRecibidos />\n              )}\n\n              {activeTab === 'configuracion' && (\n                <ConfiguracionHacienda />\n              )}\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}"],"names":["FacturacionTable","facturas","loading","onEdit","onFirmar","onEnviar","onConsultarEstado","getEstadoBadge","estadoLocal","estadoHacienda","estado","colors","formatFecha","fecha","jsxs","jsx","factura","formatCurrency","FacturacionFilters","filters","onFiltersChange","clientes","useState","handleFilterChange","field","value","handleReset","e","cliente","TIPOS_DOCUMENTO","CONDICIONES_VENTA","MEDIOS_PAGO","FacturacionForm","onClose","formData","setFormData","lineas","setLineas","productos","setLoading","useEffect","calcularTotales","subtotal","sum","linea","descuentoTotal","impuestoTotal","total","prev","agregarLinea","nuevaLinea","actualizarLinea","index","campo","valor","nuevasLineas","subtotalLinea","descuentoMonto","baseImpuesto","impuestoMonto","totalLinea","eliminarLinea","_","i","seleccionarProducto","productoId","producto","p","handleSubmit","error","codigo","nombre","ConfiguracionHacienda","settings","setSettings","testing","setTesting","testResult","setTestResult","loadSettings","data","haciendaService","handleTestConnection","result","Fragment","ComprobantesRecibidos","comprobantes","setComprobantes","selectedComprobante","setSelectedComprobante","showModal","setShowModal","loadComprobantes","supabase","handleAceptar","comprobante","mensajeReceptor","generarMensajeReceptor","handleRechazar","razon","accion","FacturacionPage","activeTab","setActiveTab","setFacturas","showForm","setShowForm","editingFactura","setEditingFactura","sidebarOpen","setSidebarOpen","setFilters","loadFacturas","query","facturasFormateadas","handleCreateFactura","handleEditFactura","handleCloseForm","handleFiltersChange","newFilters","handleFirmarFactura","handleEnviarFactura","handleConsultarEstado","tabs","Sidebar","TopBar","tab"],"mappings":"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"}