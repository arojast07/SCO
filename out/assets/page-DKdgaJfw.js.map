{"version":3,"file":"page-DKdgaJfw.js","sources":["../../src/pages/clientes/components/ClientesLayout.tsx","../../src/pages/clientes/components/ClientesTable.tsx","../../src/pages/clientes/components/ClienteForm.tsx","../../src/pages/clientes/components/ClientesFilters.tsx","../../src/pages/clientes/components/ImportarClientes.tsx","../../src/pages/clientes/page.tsx"],"sourcesContent":["\nimport { ReactNode, useState } from 'react';\nimport Sidebar from '../../../components/feature/Sidebar';\nimport TopBar from '../../../components/feature/TopBar';\nimport MobileNav from '../../../components/feature/MobileNav';\n\ninterface ClientesLayoutProps {\n  children: ReactNode;\n}\n\nexport function ClientesLayout({ children }: ClientesLayoutProps) {\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex\">\n      {/* Sidebar */}\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n\n      {/* Contenido principal */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* TopBar */}\n        <TopBar onMenuClick={() => setSidebarOpen(true)} />\n        \n        {/* Contenido */}\n        <main className=\"flex-1 p-4 lg:p-6 pb-20 lg:pb-6 overflow-auto\">\n          <div className=\"max-w-7xl mx-auto\">\n            {children}\n          </div>\n        </main>\n      </div>\n\n      {/* Navegaci√≥n m√≥vil */}\n      <MobileNav />\n    </div>\n  );\n}","import { Cliente } from '../../../types/cliente';\nimport { formatCurrency } from '../../../lib/currency';\nimport { PermissionButton } from '../../../components/base/PermissionButton';\nimport { useNotification } from '../../../hooks/useNotification';\nimport NotificationPopup from '../../../components/base/NotificationPopup';\nimport ConfirmationDialog from '../../../components/base/ConfirmationDialog';\nimport { useAuth } from '../../../hooks/useAuth';\n\ninterface ClientesTableProps {\n  clientes: Cliente[];\n  loading: boolean;\n  onEdit: (cliente: Cliente) => void;\n  onDelete: (id: number) => void;\n}\n\nexport function ClientesTable({ clientes, loading, onEdit, onDelete }: ClientesTableProps) {\n  const { currentStore } = useAuth();\n  const { notification, showSuccess, showError, showWarning, hideNotification, confirmation, showConfirmation, hideConfirmation } = useNotification();\n\n  const getEstadoHaciendaColor = (estado: string) => {\n    switch (estado) {\n      case 'valido':\n        return 'bg-green-100 text-green-800';\n      case 'pendiente':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'no_valido':\n        return 'bg-red-100 text-red-800';\n      case 'error':\n        return 'bg-gray-100 text-gray-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getEstadoHaciendaTexto = (estado: string) => {\n    switch (estado) {\n      case 'valido':\n        return 'V√°lido';\n      case 'pendiente':\n        return 'Pendiente';\n      case 'no_valido':\n        return 'No V√°lido';\n      case 'error':\n        return 'Error';\n      default:\n        return 'Desconocido';\n    }\n  };\n\n  const getTipoPersonaTexto = (tipo: string) => {\n    switch (tipo) {\n      case 'fisica':\n        return 'F√≠sica';\n      case 'juridica':\n        return 'Jur√≠dica';\n      case 'extranjero':\n        return 'Extranjero';\n      default:\n        return tipo;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\n        <div className=\"flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600\"></div>\n          <span className=\"ml-3 text-gray-600\">Cargando clientes...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (clientes.length === 0) {\n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n        <i className=\"ri-user-line text-4xl text-gray-400 mb-4\"></i>\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No hay clientes</h3>\n        <p className=\"text-gray-600 mb-4\">\n          No se encontraron clientes que coincidan con los filtros aplicados.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n        {/* Vista m√≥vil */}\n        <div className=\"lg:hidden\">\n          <div className=\"divide-y divide-gray-200\">\n            {clientes.map((cliente) => (\n              <div key={cliente.id} className=\"p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <h3 className=\"text-sm font-medium text-gray-900 truncate\">\n                        {cliente.nombre_razon_social}\n                      </h3>\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getEstadoHaciendaColor(cliente.hacienda_estado_validacion)}`}>\n                        {getEstadoHaciendaTexto(cliente.hacienda_estado_validacion)}\n                      </span>\n                    </div>\n                    \n                    <div className=\"space-y-1 text-sm text-gray-600\">\n                      <div className=\"flex items-center\">\n                        <i className=\"ri-id-card-line w-4 h-4 mr-2\"></i>\n                        <span>{cliente.identificacion}</span>\n                        <span className=\"ml-2 text-xs bg-gray-100 px-2 py-1 rounded\">\n                          {getTipoPersonaTexto(cliente.tipo_persona)}\n                        </span>\n                      </div>\n                      \n                      <div className=\"flex items-center\">\n                        <i className=\"ri-mail-line w-4 h-4 mr-2\"></i>\n                        <span className=\"truncate\">{cliente.correo_principal}</span>\n                      </div>\n                      \n                      {cliente.telefono_numero && (\n                        <div className=\"flex items-center\">\n                          <i className=\"ri-phone-line w-4 h-4 mr-2\"></i>\n                          <span>+{cliente.telefono_pais} {cliente.telefono_numero}</span>\n                        </div>\n                      )}\n                      \n                      {cliente.limite_credito > 0 && (\n                        <div className=\"flex items-center\">\n                          <i className=\"ri-money-dollar-circle-line w-4 h-4 mr-2\"></i>\n                          <span>L√≠mite: {formatCurrency(cliente.limite_credito)}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-1 ml-4\">\n                    <PermissionButton\n                      permission=\"clientes:edit\"\n                      variant=\"icon\"\n                      onClick={() => onEdit(cliente)}\n                      title=\"Editar cliente\"\n                      className=\"text-blue-600 hover:bg-blue-50\"\n                    >\n                      <i className=\"ri-edit-line w-4 h-4\"></i>\n                    </PermissionButton>\n                    \n                    <PermissionButton\n                      permission=\"clientes:delete\"\n                      variant=\"icon\"\n                      onClick={() => showConfirmation(\n                        'danger',\n                        '¬øEliminar cliente?',\n                        '¬øEst√° seguro que desea eliminar este cliente? Esta acci√≥n no se puede deshacer.',\n                        async () => {\n                          try {\n                            // Verificar si el cliente tiene cotizaciones\n                            const { data: cotizacionCheck } = await supabase\n                              .from('cotizaciones')\n                              .select('id_cotizacion')\n                              .eq('id_cliente', cliente.id!)\n                              .limit(1);\n\n                            if (cotizacionCheck && cotizacionCheck.length > 0) {\n                              showNotification('warning', 'Este cliente tiene cotizaciones asociadas. Para eliminarlo, primero debe eliminar todas sus cotizaciones.');\n                              return;\n                            }\n\n                            // Verificar si el cliente tiene pedidos\n                            const { data: pedidoCheck } = await supabase\n                              .from('pedidos')\n                              .select('id_pedido')\n                              .eq('id_cliente', cliente.id!)\n                              .limit(1);\n\n                            if (pedidoCheck && pedidoCheck.length > 0) {\n                              showNotification('warning', 'Este cliente tiene pedidos asociados. Para eliminarlo, primero debe eliminar todos sus pedidos.');\n                              return;\n                            }\n\n                            // Si no tiene relaciones, proceder con la eliminaci√≥n\n                            const { error } = await supabase\n                              .from('clientes')\n                              .delete()\n                              .eq('id_cliente', cliente.id!);\n\n                            if (error) throw error;\n                            \n                            // Actualizar la lista local\n                            setClientes(prev => prev.filter(cliente => cliente.id_cliente !== cliente.id!));\n                            showNotification('success', 'Cliente eliminado exitosamente');\n                          } catch (error: any) {\n                            console.error('Error eliminando cliente:', error);\n                            showNotification('error', `Error al eliminar el cliente: ${error.message || 'Error desconocido'}. Por favor, int√©ntelo nuevamente.`);\n                          }\n                        }\n                      )}\n                      title=\"Eliminar cliente\"\n                      className=\"text-red-600 hover:bg-red-50\"\n                    >\n                      <i className=\"ri-delete-bin-line w-4 h-4\"></i>\n                    </PermissionButton>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Vista desktop */}\n        <div className=\"hidden lg:block overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Cliente\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Identificaci√≥n\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Contacto\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Estado Hacienda\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  L√≠mite Cr√©dito\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Acciones\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {clientes.map((cliente) => (\n                <tr key={cliente.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {cliente.nombre_razon_social}\n                      </div>\n                      {cliente.nombre_comercial && (\n                        <div className=\"text-sm text-gray-500\">\n                          {cliente.nombre_comercial}\n                        </div>\n                      )}\n                      <div className=\"text-xs text-gray-400\">\n                        {getTipoPersonaTexto(cliente.tipo_persona)}\n                      </div>\n                    </div>\n                  </td>\n                  \n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{cliente.identificacion}</div>\n                    <div className=\"text-xs text-gray-500 capitalize\">\n                      {cliente.tipo_identificacion.replace('_', ' ')}\n                    </div>\n                  </td>\n                  \n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{cliente.correo_principal}</div>\n                    {cliente.telefono_numero && (\n                      <div className=\"text-sm text-gray-500\">\n                        +{cliente.telefono_pais} {cliente.telefono_numero}\n                      </div>\n                    )}\n                  </td>\n                  \n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getEstadoHaciendaColor(cliente.hacienda_estado_validacion)}`}>\n                      {getEstadoHaciendaTexto(cliente.hacienda_estado_validacion)}\n                    </span>\n                  </td>\n                  \n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {cliente.limite_credito > 0 ? formatCurrency(cliente.limite_credito) : '-'}\n                  </td>\n                  \n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <div className=\"flex items-center justify-end gap-2\">\n                      <PermissionButton\n                        permission=\"clientes:edit\"\n                        variant=\"icon\"\n                        onClick={() => onEdit(cliente)}\n                        title=\"Editar cliente\"\n                        className=\"text-blue-600 hover:bg-blue-50\"\n                      >\n                        <i className=\"ri-edit-line w-4 h-4\"></i>\n                      </PermissionButton>\n                      \n                      <PermissionButton\n                        permission=\"clientes:delete\"\n                        variant=\"icon\"\n                        onClick={() => showConfirmation(\n                          'danger',\n                          '¬øEliminar cliente?',\n                          '¬øEst√° seguro que desea eliminar este cliente? Esta acci√≥n no se puede deshacer.',\n                          async () => {\n                            try {\n                              // Verificar si el cliente tiene cotizaciones\n                              const { data: cotizacionCheck } = await supabase\n                                .from('cotizaciones')\n                                .select('id_cotizacion')\n                                .eq('id_cliente', cliente.id!)\n                                .limit(1);\n\n                              if (cotizacionCheck && cotizacionCheck.length > 0) {\n                                showNotification('warning', 'Este cliente tiene cotizaciones asociadas. Para eliminarlo, primero debe eliminar todas sus cotizaciones.');\n                                return;\n                              }\n\n                              // Verificar si el cliente tiene pedidos\n                              const { data: pedidoCheck } = await supabase\n                                .from('pedidos')\n                                .select('id_pedido')\n                                .eq('id_cliente', cliente.id!)\n                                .limit(1);\n\n                              if (pedidoCheck && pedidoCheck.length > 0) {\n                                showNotification('warning', 'Este cliente tiene pedidos asociados. Para eliminarlo, primero debe eliminar todos sus pedidos.');\n                                return;\n                              }\n\n                              // Si no tiene relaciones, proceder con la eliminaci√≥n\n                              const { error } = await supabase\n                                .from('clientes')\n                                .delete()\n                                .eq('id_cliente', cliente.id!);\n\n                              if (error) throw error;\n                              \n                              // Actualizar la lista local\n                              setClientes(prev => prev.filter(cliente => cliente.id_cliente !== cliente.id!));\n                              showNotification('success', 'Cliente eliminado exitosamente');\n                            } catch (error: any) {\n                              console.error('Error eliminando cliente:', error);\n                              showNotification('error', `Error al eliminar el cliente: ${error.message || 'Error desconocido'}. Por favor, int√©ntelo nuevamente.`);\n                            }\n                          }\n                        )}\n                        title=\"Eliminar cliente\"\n                        className=\"text-red-600 hover:bg-red-50\"\n                      >\n                        <i className=\"ri-delete-bin-line w-4 h-4\"></i>\n                      </PermissionButton>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        <NotificationPopup\n          isOpen={notification.isOpen}\n          onClose={hideNotification}\n          title={notification.title}\n          message={notification.message}\n          type={notification.type}\n        />\n      </div>\n\n      <ConfirmationDialog\n        isOpen={confirmation.isOpen}\n        type={confirmation.type}\n        title={confirmation.title}\n        message={confirmation.message}\n        onConfirm={confirmation.onConfirm}\n        onCancel={confirmation.onCancel}\n      />\n    </>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport {\n  Cliente,\n  Provincia,\n  Canton,\n  Distrito,\n  Pais,\n  ActividadEconomica,\n} from '../../../types/cliente';\nimport { ClienteService, HaciendaService } from '../../../services/clienteService';\n\ninterface ClienteFormProps {\n  cliente?: Cliente | null;\n  onSubmit: (data: any) => void;\n  onCancel: () => void;\n}\n\nexport function ClienteForm({\n  cliente,\n  onSubmit,\n  onCancel,\n}: ClienteFormProps) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [validandoHacienda, setValidandoHacienda] = useState(false);\n  const [notification, setNotification] = useState<{ type: 'success' | 'error'; title: string; message: string } | null>(null);\n  const [loadingCatalogos, setLoadingCatalogos] = useState(false);\n  const [loadingDistritos, setLoadingDistritos] = useState(false);\n\n  // Cat√°logos\n  const [provincias, setProvincias] = useState<Provincia[]>([]);\n  const [cantones, setCantones] = useState<Canton[]>([]);\n  const [distritos, setDistritos] = useState<Distrito[]>([]);\n  const [paises, setPaises] = useState<Pais[]>([]);\n  const [actividadesEconomicas, setActividadesEconomicas] = useState<\n    ActividadEconomica[]\n  >([]);\n\n  // Formulario\n  const [formData, setFormData] = useState({\n    tipo_persona: 'fisica' as const,\n    tipo_identificacion: 'cedula_fisica' as const,\n    identificacion: '',\n    nombre_razon_social: '',\n    nombre_comercial: '',\n    correo_principal: '',\n    correos_adicionales: [] as string[],\n    telefono_pais: '506',\n    telefono_numero: '',\n    telefono_secundario: '',\n    provincia_id: undefined as number | undefined,\n    canton_id: undefined as number | undefined,\n    distrito_id: undefined as number | undefined,\n    barrio: '',\n    otras_senas: '',\n    codigo_postal: '',\n    pais_iso: 'CR',\n    direccion_extranjero_line1: '',\n    direccion_extranjero_line2: '',\n    codigo_actividad_economica: '',\n    regimen_tributario: 'general' as const,\n    exoneracion_numero: '',\n    exoneracion_institucion: '',\n    exoneracion_porcentaje: 0,\n    exoneracion_vencimiento: '',\n    moneda_preferida: 'CRC',\n    condicion_venta_preferida: 'contado',\n    dias_credito: 0,\n    limite_credito: 0,\n    lista_precios_id: undefined as number | undefined,\n    hacienda_estado_validacion: 'pendiente' as const,\n    hacienda_ultimo_mensaje: '',\n    hacienda_ultimo_intento: '',\n    activo: true,\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [correoAdicional, setCorreoAdicional] = useState('');\n\n  const steps = [\n    { number: 1, title: 'Tipo e Identificaci√≥n' },\n    { number: 2, title: 'Datos Legales' },\n    { number: 3, title: 'Contacto' },\n    { number: 4, title: 'Direcci√≥n' },\n    { number: 5, title: 'Informaci√≥n Fiscal' },\n    { number: 6, title: 'Preferencias' }\n  ];\n\n  // Cargar datos iniciales\n  useEffect(() => {\n    const inicializar = async () => {\n      setLoadingCatalogos(true);\n      await cargarCatalogos();\n      \n      if (cliente) {\n        // Cargar datos del cliente incluyendo direcci√≥n\n        setFormData({\n          tipo_persona: cliente.tipo_persona || 'fisica',\n          tipo_identificacion: cliente.tipo_identificacion || 'cedula_fisica',\n          identificacion: cliente.identificacion || '',\n          nombre_razon_social: cliente.nombre_razon_social || '',\n          nombre_comercial: cliente.nombre_comercial || '',\n          correo_principal: cliente.correo_principal || '',\n          correos_adicionales: cliente.correos_adicionales || [],\n          telefono_pais: cliente.telefono_pais || '506',\n          telefono_numero: cliente.telefono_numero || '',\n          telefono_secundario: cliente.telefono_secundario || '',\n          provincia_id: cliente.provincia_id || undefined,\n          canton_id: cliente.canton_id || undefined,\n          distrito_id: cliente.distrito_id || undefined,\n          barrio: cliente.barrio || '',\n          otras_senas: cliente.otras_senas || '',\n          codigo_postal: cliente.codigo_postal || '',\n          pais_iso: cliente.pais_iso || 'CR',\n          direccion_extranjero_line1: cliente.direccion_extranjero_line1 || '',\n          direccion_extranjero_line2: cliente.direccion_extranjero_line2 || '',\n          codigo_actividad_economica: cliente.codigo_actividad_economica || '',\n          regimen_tributario: cliente.regimen_tributario || 'general',\n          exoneracion_numero: cliente.exoneracion_numero || '',\n          exoneracion_institucion: cliente.exoneracion_institucion || '',\n          exoneracion_porcentaje: cliente.exoneracion_porcentaje || 0,\n          exoneracion_vencimiento: cliente.exoneracion_vencimiento || '',\n          moneda_preferida: cliente.moneda_preferida || 'CRC',\n          condicion_venta_preferida: cliente.condicion_venta_preferida || 'contado',\n          dias_credito: cliente.dias_credito || 0,\n          limite_credito: cliente.limite_credito || 0,\n          lista_precios_id: cliente.lista_precios_id || undefined,\n          hacienda_estado_validacion: cliente.hacienda_estado_validacion || 'pendiente',\n          hacienda_ultimo_mensaje: cliente.hacienda_ultimo_mensaje || '',\n          hacienda_ultimo_intento: cliente.hacienda_ultimo_intento || '',\n          activo: cliente.activo !== undefined ? cliente.activo : true,\n        });\n\n        // Cargar cantones y distritos si hay provincia y cant√≥n\n        if (cliente.provincia_id) {\n          const cantonesData = await ClienteService.obtenerCantones(cliente.provincia_id);\n          setCantones(cantonesData);\n          \n          if (cliente.canton_id) {\n            const distritosData = await ClienteService.obtenerDistritos(cliente.canton_id);\n            setDistritos(distritosData);\n          }\n        }\n      }\n      setLoadingCatalogos(false);\n    };\n\n    inicializar();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Cargar cantones cuando cambia la provincia\n  useEffect(() => {\n    const cargarCantonesEffect = async () => {\n      if (formData.provincia_id) {\n        const cantonesData = await ClienteService.obtenerCantones(formData.provincia_id);\n        setCantones(cantonesData);\n        \n        // Solo limpiar si no estamos cargando un cliente existente\n        if (!loadingCatalogos && (!cliente || cliente.provincia_id !== formData.provincia_id)) {\n          setFormData(prev => ({\n            ...prev,\n            canton_id: undefined,\n            distrito_id: undefined,\n          }));\n          setDistritos([]);\n        }\n      } else {\n        setCantones([]);\n        setDistritos([]);\n        if (!loadingCatalogos) {\n          setFormData(prev => ({\n            ...prev,\n            canton_id: undefined,\n            distrito_id: undefined,\n          }));\n        }\n      }\n    };\n\n    cargarCantonesEffect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [formData.provincia_id]);\n\n  // Cargar distritos cuando cambia el cant√≥n\n  useEffect(() => {\n    const cargarDistritosEffect = async () => {\n      if (formData.canton_id) {\n        console.log('üîÑ Iniciando carga de distritos para cant√≥n:', formData.canton_id);\n        setLoadingDistritos(true);\n        \n        try {\n          const distritosData = await ClienteService.obtenerDistritos(formData.canton_id);\n          console.log('‚úÖ Distritos obtenidos:', distritosData.length);\n          setDistritos(distritosData);\n          \n          // Solo limpiar si no estamos cargando un cliente existente\n          if (!loadingCatalogos && (!cliente || cliente.canton_id !== formData.canton_id)) {\n            setFormData(prev => ({\n              ...prev,\n              distrito_id: undefined,\n            }));\n          }\n          \n          // Si no hay distritos, mostrar advertencia\n          if (distritosData.length === 0) {\n            console.warn('‚ö†Ô∏è No se encontraron distritos para el cant√≥n:', formData.canton_id);\n          }\n        } catch (error) {\n          console.error('‚ùå Error cargando distritos:', error);\n          setDistritos([]);\n          showError('Error', 'No se pudieron cargar los distritos. Por favor intenta nuevamente.');\n        } finally {\n          setLoadingDistritos(false);\n        }\n      } else {\n        setDistritos([]);\n        setLoadingDistritos(false);\n        if (!loadingCatalogos) {\n          setFormData(prev => ({\n            ...prev,\n            distrito_id: undefined,\n          }));\n        }\n      }\n    };\n\n    cargarDistritosEffect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [formData.canton_id]);\n\n  const cargarCatalogos = async () => {\n    try {\n      const [provinciasData, paisesData, actividadesData] = await Promise.all([\n        ClienteService.obtenerProvincias(),\n        ClienteService.obtenerPaises(),\n        ClienteService.obtenerActividadesEconomicas(),\n      ]);\n\n      setProvincias(provinciasData);\n      setPaises(paisesData);\n      setActividadesEconomicas(actividadesData);\n    } catch (error) {\n      console.error('Error cargando cat√°logos:', error);\n    }\n  };\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const validarPaso = (paso: number): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    switch (paso) {\n      case 1:\n        if (!formData.tipo_persona)\n          newErrors.tipo_persona = 'Requerido';\n        if (!formData.tipo_identificacion)\n          newErrors.tipo_identificacion = 'Requerido';\n        if (!formData.identificacion) {\n          newErrors.identificacion = 'Requerido';\n        } else if (\n          !ClienteService.validarIdentificacion(\n            formData.tipo_identificacion,\n            formData.identificacion,\n          )\n        ) {\n          newErrors.identificacion = 'Formato de identificaci√≥n inv√°lido';\n        }\n        break;\n\n      case 2:\n        if (!formData.nombre_razon_social)\n          newErrors.nombre_razon_social = 'Requerido';\n        break;\n\n      case 3:\n        if (!formData.correo_principal) {\n          newErrors.correo_principal = 'Requerido';\n        } else if (!ClienteService.validarEmail(formData.correo_principal)) {\n          newErrors.correo_principal = 'Email inv√°lido';\n        }\n        if (\n          formData.telefono_numero &&\n          !ClienteService.validarTelefono(formData.telefono_numero)\n        ) {\n          newErrors.telefono_numero = 'Tel√©fono inv√°lido';\n        }\n        break;\n\n      case 4:\n        if (formData.tipo_persona !== 'extranjero') {\n          if (!formData.provincia_id)\n            newErrors.provincia_id = 'Requerido';\n          if (!formData.canton_id) newErrors.canton_id = 'Requerido';\n          // Solo validar distrito si hay distritos disponibles para el cant√≥n seleccionado\n          if (!formData.distrito_id && distritos.length > 0) {\n            newErrors.distrito_id = 'Requerido';\n          }\n        } else {\n          if (!formData.pais_iso) newErrors.pais_iso = 'Requerido';\n          if (!formData.direccion_extranjero_line1)\n            newErrors.direccion_extranjero_line1 = 'Requerido';\n        }\n        break;\n\n      case 5:\n        if (!formData.codigo_actividad_economica)\n          newErrors.codigo_actividad_economica = 'Requerido';\n        if (\n          formData.exoneracion_porcentaje &&\n          (formData.exoneracion_porcentaje < 0 ||\n            formData.exoneracion_porcentaje > 100)\n        ) {\n          newErrors.exoneracion_porcentaje = 'Debe estar entre 0 y 100';\n        }\n        break;\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleNextStep = () => {\n    if (validarPaso(currentStep)) {\n      setCurrentStep(prev => Math.min(prev + 1, steps.length));\n    }\n  };\n\n  const handlePrevStep = () => {\n    setCurrentStep(prev => Math.max(prev - 1, 1));\n  };\n\n  const showSuccess = (title: string, message: string) => {\n    setNotification({ type: 'success', title, message });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  const showError = (title: string, message: string) => {\n    setNotification({ type: 'error', title, message });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  const validarConHacienda = async () => {\n    try {\n      setValidandoHacienda(true);\n      const resultado = await HaciendaService.validarIdentificacion(\n        formData.identificacion,\n      );\n\n      setFormData(prev => ({\n        ...prev,\n        hacienda_estado_validacion: resultado.valido\n          ? 'valido'\n          : 'no_valido',\n        hacienda_ultimo_mensaje: resultado.mensaje,\n        hacienda_ultimo_intento: new Date().toISOString(),\n      }));\n\n      showSuccess('Validaci√≥n exitosa', resultado.mensaje);\n    } catch (error) {\n      console.error('Error validando con Hacienda:', error);\n      showError('Error al validar', 'Error al validar con Hacienda');\n    } finally {\n      setValidandoHacienda(false);\n    }\n  };\n\n  const agregarCorreoAdicional = () => {\n    if (correoAdicional && ClienteService.validarEmail(correoAdicional)) {\n      setFormData(prev => ({\n        ...prev,\n        correos_adicionales: [...prev.correos_adicionales, correoAdicional],\n      }));\n      setCorreoAdicional('');\n    }\n  };\n\n  const eliminarCorreoAdicional = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      correos_adicionales: prev.correos_adicionales.filter(\n        (_, i) => i !== index,\n      ),\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Validar el paso actual antes de guardar\n    if (!validarPaso(currentStep)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Preparar datos para enviar\n      const dataToSubmit = { ...formData };\n      \n      // Si no hay distritos disponibles para el cant√≥n seleccionado, enviar distrito_id como null\n      if (formData.tipo_persona !== 'extranjero' && formData.canton_id && distritos.length === 0) {\n        dataToSubmit.distrito_id = null as any;\n        console.log('‚ÑπÔ∏è Cant√≥n sin distritos registrados, guardando distrito_id como null');\n      }\n      \n      await onSubmit(dataToSubmit);\n    } catch (error) {\n      console.error('Error guardando cliente:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // -------------------------------------------------\n  // Render functions for each step (unchanged)\n  // -------------------------------------------------\n  const renderStep1 = () => (\n    <div className=\"space-y-6\">\n      {/* Tipo de Persona */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Tipo de Persona *\n        </label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n          {[\n            { value: 'fisica', label: 'Persona F√≠sica', icon: 'ri-user-line' },\n            {\n              value: 'juridica',\n              label: 'Persona Jur√≠dica',\n              icon: 'ri-building-line',\n            },\n            { value: 'extranjero', label: 'Extranjero', icon: 'ri-global-line' },\n          ].map(tipo => (\n            <button\n              key={tipo.value}\n              type=\"button\"\n              onClick={() => handleInputChange('tipo_persona', tipo.value)}\n              className={`p-4 border-2 rounded-lg text-left transition-colors ${\n                formData.tipo_persona === tipo.value\n                  ? 'border-teal-500 bg-teal-50 text-teal-700'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <i className={`${tipo.icon} text-xl mb-2 block`}></i>\n              <div className=\"font-medium\">{tipo.label}</div>\n            </button>\n          ))}\n        </div>\n        {errors.tipo_persona && (\n          <p className=\"text-red-600 text-sm mt-1\">{errors.tipo_persona}</p>\n        )}\n      </div>\n\n      {/* Tipo de Identificaci√≥n */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Tipo de Identificaci√≥n *\n        </label>\n        <select\n          value={formData.tipo_identificacion}\n          onChange={e =>\n            handleInputChange('tipo_identificacion', e.target.value)\n          }\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n        >\n          <option value=\"cedula_fisica\">C√©dula F√≠sica</option>\n          <option value=\"cedula_juridica\">C√©dula Jur√≠dica</option>\n          <option value=\"dimex\">DIMEX</option>\n          <option value=\"nite\">NITE</option>\n          <option value=\"pasaporte\">Pasaporte</option>\n        </select>\n        {errors.tipo_identificacion && (\n          <p className=\"text-red-600 text-sm mt-1\">\n            {errors.tipo_identificacion}\n          </p>\n        )}\n      </div>\n\n      {/* N√∫mero de Identificaci√≥n */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          N√∫mero de Identificaci√≥n *\n        </label>\n        <div className=\"flex gap-2\">\n          <input\n            type=\"text\"\n            value={formData.identificacion}\n            onChange={e =>\n              handleInputChange('identificacion', e.target.value)\n            }\n            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n            placeholder=\"Ingrese la identificaci√≥n\"\n          />\n          <button\n            type=\"button\"\n            onClick={validarConHacienda}\n            disabled={!formData.identificacion || validandoHacienda}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors whitespace-nowrap\"\n          >\n            {validandoHacienda ? (\n              <i className=\"ri-loader-4-line animate-spin\"></i>\n            ) : (\n              <i className=\"ri-shield-check-line\"></i>\n            )}\n            Validar\n          </button>\n        </div>\n        {errors.identificacion && (\n          <p className=\"text-red-600 text-sm mt-1\">{errors.identificacion}</p>\n        )}\n\n        {formData.hacienda_estado_validacion !== 'pendiente' && (\n          <div\n            className={`mt-2 p-3 rounded-lg ${\n              formData.hacienda_estado_validacion === 'valido'\n                ? 'bg-green-50 text-green-700 border border-green-200'\n                : 'bg-red-50 text-red-700 border border-red-200'\n            }`}\n          >\n            <div className=\"flex items-center\">\n              <i\n                className={`${\n                  formData.hacienda_estado_validacion === 'valido'\n                    ? 'ri-check-line'\n                    : 'ri-close-line'\n                } mr-2`}\n              ></i>\n              <span className=\"text-sm\">\n                {formData.hacienda_ultimo_mensaje}\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderStep2 = () => (\n    <div className=\"space-y-6\">\n      {/* Nombre / Raz√≥n Social */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          {formData.tipo_persona === 'fisica'\n            ? 'Nombre Completo'\n            : 'Raz√≥n Social'}{' '}\n          *\n        </label>\n        <input\n          type=\"text\"\n          value={formData.nombre_razon_social}\n          onChange={e =>\n            handleInputChange('nombre_razon_social', e.target.value)\n          }\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n          placeholder={\n            formData.tipo_persona === 'fisica'\n              ? 'Juan P√©rez Rodr√≠guez'\n              : 'Empresa S.A.'\n          }\n        />\n        {errors.nombre_razon_social && (\n          <p className=\"text-red-600 text-sm mt-1\">\n            {errors.nombre_razon_social}\n          </p>\n        )}\n      </div>\n\n      {/* Nombre Comercial - Ahora disponible para todos los tipos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Nombre Comercial / Alias\n        </label>\n        <input\n          type=\"text\"\n          value={formData.nombre_comercial}\n          onChange={e =>\n            handleInputChange('nombre_comercial', e.target.value)\n          }\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n          placeholder=\"Nombre comercial o alias del cliente\"\n        />\n        <p className=\"text-xs text-gray-500 mt-1\">\n          Nombre de fantas√≠a o alias con el que se conoce al cliente\n        </p>\n      </div>\n    </div>\n  );\n\n  const renderStep3 = () => (\n    <div className=\"space-y-6\">\n      {/* Correo Principal */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Correo Electr√≥nico Principal *\n        </label>\n        <input\n          type=\"email\"\n          value={formData.correo_principal}\n          onChange={e => handleInputChange('correo_principal', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n          placeholder=\"correo@ejemplo.com\"\n        />\n        {errors.correo_principal && (\n          <p className=\"text-red-600 text-sm mt-1\">\n            {errors.correo_principal}\n          </p>\n        )}\n      </div>\n\n      {/* Correos Adicionales */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Correos Adicionales\n        </label>\n        <div className=\"flex gap-2 mb-2\">\n          <input\n            type=\"email\"\n            value={correoAdicional}\n            onChange={e => setCorreoAdicional(e.target.value)}\n            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n            placeholder=\"correo.adicional@ejemplo.com\"\n          />\n          <button\n            type=\"button\"\n            onClick={agregarCorreoAdicional}\n            disabled={!correoAdicional}\n            className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:bg-gray-400 transition-colors\"\n          >\n            <i className=\"ri-add-line\"></i>\n          </button>\n        </div>\n\n        {formData.correos_adicionales.length > 0 && (\n          <div className=\"space-y-2\">\n            {formData.correos_adicionales.map((correo, index) => (\n              <div\n                key={index}\n                className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\"\n              >\n                <span className=\"flex-1 text-sm\">{correo}</span>\n                <button\n                  type=\"button\"\n                  onClick={() => eliminarCorreoAdicional(index)}\n                  className=\"text-red-600 hover:text-red-800 p-1\"\n                >\n                  <i className=\"ri-close-line\"></i>\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Tel√©fonos */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n        {/* Tel√©fono Principal */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Tel√©fono Principal\n          </label>\n          <div className=\"flex gap-2\">\n            <select\n              value={formData.telefono_pais}\n              onChange={e => handleInputChange('telefono_pais', e.target.value)}\n              className=\"w-20 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n            >\n              <option value=\"506\">+506</option>\n              <option value=\"1\">+1</option>\n              <option value=\"52\">+52</option>\n              <option value=\"502\">+502</option>\n              <option value=\"504\">+504</option>\n              <option value=\"503\">+503</option>\n              <option value=\"507\">+507</option>\n              <option value=\"505\">+505</option>\n            </select>\n            <input\n              type=\"tel\"\n              value={formData.telefono_numero}\n              onChange={e =>\n                handleInputChange('telefono_numero', e.target.value)\n              }\n              className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"88888888\"\n            />\n          </div>\n          {errors.telefono_numero && (\n            <p className=\"text-red-600 text-sm mt-1\">\n              {errors.telefono_numero}\n            </p>\n          )}\n        </div>\n\n        {/* Tel√©fono Secundario */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Tel√©fono Secundario\n          </label>\n          <input\n            type=\"tel\"\n            value={formData.telefono_secundario}\n            onChange={e =>\n              handleInputChange('telefono_secundario', e.target.value)\n            }\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n            placeholder=\"22222222\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStep4 = () => (\n    <div className=\"space-y-6\">\n      {formData.tipo_persona !== 'extranjero' ? (\n        <>\n          {/* Direccion Nacional */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n            {/* Provincia */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Provincia *\n              </label>\n              <select\n                value={formData.provincia_id || ''}\n                onChange={e =>\n                  handleInputChange(\n                    'provincia_id',\n                    e.target.value ? parseInt(e.target.value) : undefined,\n                  )\n                }\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              >\n                <option value=\"\">Seleccionar provincia</option>\n                {provincias.map(provincia => (\n                  <option key={provincia.id} value={provincia.id}>\n                    {provincia.nombre}\n                  </option>\n                ))}\n              </select>\n              {errors.provincia_id && (\n                <p className=\"text-red-600 text-sm mt-1\">\n                  {errors.provincia_id}\n                </p>\n              )}\n            </div>\n\n            {/* Cant√≥n */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cant√≥n *\n              </label>\n              <select\n                value={formData.canton_id || ''}\n                onChange={e =>\n                  handleInputChange(\n                    'canton_id',\n                    e.target.value ? parseInt(e.target.value) : undefined,\n                  )\n                }\n                disabled={!formData.provincia_id || cantones.length === 0}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\n              >\n                <option value=\"\">\n                  {!formData.provincia_id \n                    ? 'Primero seleccione una provincia' \n                    : cantones.length === 0 \n                    ? 'Cargando cantones...' \n                    : 'Seleccionar cant√≥n'\n                  }\n                </option>\n                {cantones.map(canton => (\n                  <option key={canton.id} value={canton.id}>\n                    {canton.nombre}\n                  </option>\n                ))}\n              </select>\n              {errors.canton_id && (\n                <p className=\"text-red-600 text-sm mt-1\">{errors.canton_id}</p>\n              )}\n            </div>\n\n            {/* Distrito */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Distrito {distritos.length > 0 ? '*' : ''}\n              </label>\n              <div className=\"relative\">\n                <select\n                  value={formData.distrito_id || ''}\n                  onChange={e =>\n                    handleInputChange(\n                      'distrito_id',\n                      e.target.value ? parseInt(e.target.value) : undefined,\n                    )\n                  }\n                  disabled={!formData.canton_id || loadingDistritos}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed pr-10\"\n                >\n                  <option value=\"\">\n                    {!formData.canton_id \n                      ? 'Primero seleccione un cant√≥n' \n                      : loadingDistritos \n                      ? 'Cargando distritos...' \n                      : distritos.length === 0\n                      ? 'Sin distritos (opcional)'\n                      : 'Seleccionar distrito'\n                    }\n                  </option>\n                  {distritos.map(distrito => (\n                    <option key={distrito.id} value={distrito.id}>\n                      {distrito.nombre}\n                    </option>\n                  ))}\n                </select>\n                {loadingDistritos && (\n                  <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                    <i className=\"ri-loader-4-line animate-spin text-teal-600\"></i>\n                  </div>\n                )}\n              </div>\n              {errors.distrito_id && (\n                <p className=\"text-red-600 text-sm mt-1\">{errors.distrito_id}</p>\n              )}\n              {!loadingDistritos && formData.canton_id && distritos.length === 0 && (\n                <p className=\"text-blue-600 text-xs mt-1 flex items-center\">\n                  <i className=\"ri-information-line mr-1\"></i>\n                  Este cant√≥n no tiene distritos registrados. Puede continuar sin seleccionar distrito.\n                </p>\n              )}\n            </div>\n          </div>\n\n          {/* Barrio y C√≥digo Postal */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            {/* Barrio */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Barrio\n              </label>\n              <input\n                type=\"text\"\n                value={formData.barrio}\n                onChange={e => handleInputChange('barrio', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                placeholder=\"Nombre del barrio\"\n              />\n            </div>\n\n            {/* C√≥digo Postal */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                C√≥digo Postal\n              </label>\n              <input\n                type=\"text\"\n                value={formData.codigo_postal}\n                onChange={e => handleInputChange('codigo_postal', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                placeholder=\"10101\"\n              />\n            </div>\n          </div>\n\n          {/* Otras Se√±as */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Otras Se√±as\n            </label>\n            <textarea\n              value={formData.otras_senas}\n              onChange={e => handleInputChange('otras_senas', e.target.value)}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"Descripci√≥n detallada de la direcci√≥n\"\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          {/* Direcci√≥n Extranjera */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Pa√≠s *\n            </label>\n            <select\n              value={formData.pais_iso || ''}\n              onChange={e => handleInputChange('pais_iso', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n            >\n              <option value=\"\">Seleccionar pa√≠s</option>\n              {paises.map(pais => (\n                <option key={pais.codigo_iso} value={pais.codigo_iso}>\n                  {pais.nombre}\n                </option>\n              ))}\n            </select>\n            {errors.pais_iso && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.pais_iso}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Direcci√≥n L√≠nea 1 *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.direccion_extranjero_line1}\n              onChange={e =>\n                handleInputChange('direccion_extranjero_line1', e.target.value)\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"Direcci√≥n principal\"\n            />\n            {errors.direccion_extranjero_line1 && (\n              <p className=\"text-red-600 text-sm mt-1\">\n                {errors.direccion_extranjero_line1}\n              </p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Direcci√≥n L√≠nea 2\n            </label>\n            <input\n              type=\"text\"\n              value={formData.direccion_extranjero_line2}\n              onChange={e =>\n                handleInputChange('direccion_extranjero_line2', e.target.value)\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"Informaci√≥n adicional de direcci√≥n\"\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n\n  const renderStep5 = () => (\n    <div className=\"space-y-6\">\n      {/* C√≥digo de Actividad Econ√≥mica */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          C√≥digo de Actividad Econ√≥mica *\n        </label>\n        <select\n          value={formData.codigo_actividad_economica}\n          onChange={e =>\n            handleInputChange('codigo_actividad_economica', e.target.value)\n          }\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n        >\n          <option value=\"\">Seleccionar actividad econ√≥mica</option>\n          {actividadesEconomicas.map(actividad => (\n            <option key={actividad.codigo} value={actividad.codigo}>\n              {actividad.codigo} - {actividad.descripcion}\n            </option>\n          ))}\n        </select>\n        {errors.codigo_actividad_economica && (\n          <p className=\"text-red-600 text-sm mt-1\">\n            {errors.codigo_actividad_economica}\n          </p>\n        )}\n      </div>\n\n      {/* R√©gimen Tributario */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          R√©gimen Tributario\n        </label>\n        <select\n          value={formData.regimen_tributario}\n          onChange={e => handleInputChange('regimen_tributario', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n        >\n          <option value=\"general\">General</option>\n          <option value=\"simplificado\">Simplificado</option>\n          <option value=\"exento\">Exento</option>\n          <option value=\"otro\">Otro</option>\n        </select>\n      </div>\n\n      {/* Exoneraci√≥n */}\n      <div className=\"border-t border-gray-200 pt-6\">\n        <h4 className=\"text-lg font-medium text-gray-900 mb-4\">\n          Informaci√≥n de Exoneraci√≥n\n        </h4>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          {/* N√∫mero de Exoneraci√≥n */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              N√∫mero de Exoneraci√≥n\n            </label>\n            <input\n              type=\"text\"\n              value={formData.exoneracion_numero}\n              onChange={e =>\n                handleInputChange('exoneracion_numero', e.target.value)\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"N√∫mero de exoneraci√≥n\"\n            />\n          </div>\n\n          {/* Instituci√≥n que Exonera */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Instituci√≥n que Exonera\n            </label>\n            <input\n              type=\"text\"\n              value={formData.exoneracion_institucion}\n              onChange={e =>\n                handleInputChange('exoneracion_institucion', e.target.value)\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              placeholder=\"Nombre de la instituci√≥n\"\n            />\n          </div>\n\n          {/* Porcentaje */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Porcentaje de Exoneraci√≥n (%)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"100\"\n              step=\"0.01\"\n              value={formData.exoneracion_porcentaje}\n              onChange={e =>\n                handleInputChange(\n                  'exoneracion_porcentaje',\n                  parseFloat(e.target.value) || 0,\n                )\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-5\n              focus:border-transparent\"\n              placeholder=\"0.00\"\n            />\n            {errors.exoneracion_porcentaje && (\n              <p className=\"text-red-600 text-sm mt-1\">\n                {errors.exoneracion_porcentaje}\n              </p>\n            )}\n          </div>\n\n          {/* Fecha Vencimiento */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Fecha de Vencimiento\n            </label>\n            <input\n              type=\"date\"\n              value={formData.exoneracion_vencimiento}\n              onChange={e =>\n                handleInputChange('exoneracion_vencimiento', e.target.value)\n              }\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-5\n              focus:border-transparent\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStep6 = () => (\n    <div className=\"space-y-4\">\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n        {/* Moneda Preferida */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Moneda Preferida\n          </label>\n          <select\n            value={formData.moneda_preferida}\n            onChange={e => handleInputChange('moneda_preferida', e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n          >\n            <option value=\"CRC\">Colones (‚Ç°)</option>\n            <option value=\"USD\">D√≥lares ($)</option>\n            <option value=\"EUR\">Euros (‚Ç¨)</option>\n          </select>\n        </div>\n\n        {/* Condici√≥n de Venta */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Condici√≥n de Venta\n          </label>\n          <select\n            value={formData.condicion_venta_preferida}\n            onChange={e =>\n              handleInputChange('condicion_venta_preferida', e.target.value)\n            }\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n          >\n            <option value=\"contado\">Contado</option>\n            <option value=\"credito\">Cr√©dito</option>\n            <option value=\"mixto\">Mixto</option>\n          </select>\n        </div>\n\n        {/* D√≠as de Cr√©dito */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            D√≠as de Cr√©dito\n          </label>\n          <input\n            type=\"number\"\n            min=\"0\"\n            value={formData.dias_credito}\n            onChange={e =>\n              handleInputChange('dias_credito', parseInt(e.target.value) || 0)\n            }\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            placeholder=\"0\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            D√≠as de cr√©dito otorgados al cliente\n          </p>\n        </div>\n\n        {/* L√≠mite de Cr√©dito */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            L√≠mite de Cr√©dito (‚Ç°)\n          </label>\n          <input\n            type=\"number\"\n            min=\"0\"\n            step=\"0.01\"\n            value={formData.limite_credito}\n            onChange={e =>\n              handleInputChange('limite_credito', parseFloat(e.target.value) || 0)\n            }\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            placeholder=\"0.00\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Monto m√°ximo de cr√©dito permitido\n          </p>\n        </div>\n      </div>\n\n      {/* Activo */}\n      <div className=\"flex items-center pt-2 border-t border-gray-200\">\n        <input\n          type=\"checkbox\"\n          id=\"activo\"\n          checked={formData.activo}\n          onChange={e => handleInputChange('activo', e.target.checked)}\n          className=\"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded cursor-pointer\"\n        />\n        <label htmlFor=\"activo\" className=\"ml-2 block text-sm text-gray-900 cursor-pointer\">\n          Cliente activo\n        </label>\n      </div>\n\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n        <div className=\"flex items-start\">\n          <i className=\"ri-information-line text-blue-600 text-lg mr-2 mt-0.5\"></i>\n          <div className=\"text-sm text-blue-800\">\n            <p className=\"font-medium mb-1\">Informaci√≥n de Preferencias</p>\n            <p className=\"text-xs\">\n              Estas preferencias se aplicar√°n por defecto al crear cotizaciones y pedidos para este cliente.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderCurrentStep = () => {\n    switch (currentStep) {\n      case 1:\n        return renderStep1();\n      case 2:\n        return renderStep2();\n      case 3:\n        return renderStep3();\n      case 4:\n        return renderStep4();\n      case 5:\n        return renderStep5();\n      case 6:\n        return renderStep6();\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\">\n        {/* Notificaci√≥n */}\n        {notification && (\n          <div className={`absolute top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${\n            notification.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n          }`}>\n            <div className=\"font-medium\">{notification.title}</div>\n            <div className=\"text-sm\">{notification.message}</div>\n          </div>\n        )}\n\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {cliente ? 'Editar Cliente' : 'Nuevo Cliente'}\n          </h2>\n          <button\n            onClick={onCancel}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer\"\n          >\n            <i className=\"ri-close-line text-2xl\"></i>\n          </button>\n        </div>\n\n        {/* Steps progress bar */}\n        <div className=\"px-6 py-4 border-b border-gray-200 flex-shrink-0\">\n          <div className=\"flex items-center justify-between gap-2\">\n            {steps.map((step, index) => (\n              <div key={step.number} className=\"flex items-center\">\n                <div\n                  className={`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${\n                    currentStep === step.number\n                      ? 'bg-teal-600 text-white flex-1'\n                      : currentStep > step.number\n                      ? 'bg-teal-100 text-teal-700'\n                      : 'bg-gray-100 text-gray-500'\n                  }`}\n                >\n                  <span className=\"font-medium\">{step.number}</span>\n                  {currentStep === step.number && (\n                    <span className=\"text-sm font-medium whitespace-nowrap\">{step.title}</span>\n                  )}\n                </div>\n                {index < steps.length - 1 && (\n                  <div className={`w-8 h-0.5 mx-1 ${\n                    currentStep > step.number ? 'bg-teal-600' : 'bg-gray-200'\n                  }`} />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Form content - Ajustado para mejor scroll */}\n        <form onSubmit={handleSubmit} className=\"flex-1 flex flex-col min-h-0\">\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-6\">\n              <div className=\"flex items-center mb-4\">\n                <i\n                  className={`${steps[currentStep - 1].icon} text-2xl text-teal-600 mr-3`}\n                ></i>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {steps[currentStep - 1].title}\n                </h3>\n              </div>\n\n              {renderCurrentStep()}\n            </div>\n          </div>\n\n          {/* Footer buttons */}\n          <div className=\"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={handlePrevStep}\n              disabled={currentStep === 1}\n              className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap\"\n            >\n              <i className=\"ri-arrow-left-line mr-2\"></i>\n              Anterior\n            </button>\n\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm text-gray-600\">\n                Paso {currentStep} de {steps.length}\n              </span>\n              \n              <button\n                type=\"button\"\n                onClick={onCancel}\n                className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n              >\n                Cancelar\n              </button>\n\n              {currentStep === steps.length ? (\n                <button\n                  type=\"button\"\n                  onClick={handleSubmit}\n                  disabled={loading}\n                  className=\"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center whitespace-nowrap\"\n                >\n                  {loading ? (\n                    <>\n                      <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                      Guardando...\n                    </>\n                  ) : (\n                    <>\n                      <i className=\"ri-save-line mr-2\"></i>\n                      {cliente ? 'Actualizar' : 'Crear'} Cliente\n                    </>\n                  )}\n                </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={handleNextStep}\n                  className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n                >\n                  Siguiente\n                  <i className=\"ri-arrow-right-line ml-2\"></i>\n                </button>\n              )}\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","\nimport { useState } from 'react';\nimport { ClienteFilters } from '../../../types/cliente';\n\ninterface ClientesFiltersProps {\n  filters: ClienteFilters;\n  onFiltersChange: (filters: ClienteFilters) => void;\n}\n\nexport function ClientesFilters({ filters, onFiltersChange }: ClientesFiltersProps) {\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  const handleFilterChange = (key: keyof ClienteFilters, value: any) => {\n    onFiltersChange({\n      ...filters,\n      [key]: value || undefined\n    });\n  };\n\n  const clearFilters = () => {\n    onFiltersChange({});\n    setShowAdvanced(false);\n  };\n\n  return (\n    <div className=\"bg-white p-4 rounded-lg border border-gray-200 space-y-4\">\n      {/* B√∫squeda principal */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"flex-1\">\n          <div className=\"relative\">\n            <i className=\"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n            <input\n              type=\"text\"\n              placeholder=\"Buscar por nombre, identificaci√≥n o correo...\"\n              value={filters.search || ''}\n              onChange={(e) => handleFilterChange('search', e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowAdvanced(!showAdvanced)}\n            className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center whitespace-nowrap\"\n          >\n            <i className=\"ri-filter-line mr-2\"></i>\n            Filtros\n            <i className={`ri-arrow-${showAdvanced ? 'up' : 'down'}-s-line ml-1`}></i>\n          </button>\n          \n          {(filters.search || filters.tipo_persona || filters.hacienda_estado_validacion) && (\n            <button\n              onClick={clearFilters}\n              className=\"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors flex items-center whitespace-nowrap\"\n            >\n              <i className=\"ri-close-line mr-2\"></i>\n              Limpiar\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Filtros avanzados */}\n      {showAdvanced && (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Tipo de Persona\n            </label>\n            <select\n              value={filters.tipo_persona || ''}\n              onChange={(e) => handleFilterChange('tipo_persona', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            >\n              <option value=\"\">Todos</option>\n              <option value=\"fisica\">F√≠sica</option>\n              <option value=\"juridica\">Jur√≠dica</option>\n              <option value=\"extranjero\">Extranjero</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Estado Hacienda\n            </label>\n            <select\n              value={filters.hacienda_estado_validacion || ''}\n              onChange={(e) => handleFilterChange('hacienda_estado_validacion', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            >\n              <option value=\"\">Todos</option>\n              <option value=\"pendiente\">Pendiente</option>\n              <option value=\"valido\">V√°lido</option>\n              <option value=\"no_valido\">No V√°lido</option>\n              <option value=\"error\">Error</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Estado\n            </label>\n            <select\n              value={filters.activo !== undefined ? (filters.activo ? 'true' : 'false') : ''}\n              onChange={(e) => handleFilterChange('activo', e.target.value === '' ? undefined : e.target.value === 'true')}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n            >\n              <option value=\"\">Todos</option>\n              <option value=\"true\">Activo</option>\n              <option value=\"false\">Inactivo</option>\n            </select>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useRef } from 'react';\nimport { Cliente } from '../../../types/cliente';\nimport { ClienteService } from '../../../services/clienteService';\nimport NotificationPopup from '../../../components/base/NotificationPopup';\n\ninterface ImportarClientesProps {\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\ninterface ClienteImport {\n  fila: number;\n  datos: Partial<Cliente>;\n  errores: string[];\n  advertencias: string[];\n}\n\nexport function ImportarClientes({ onSuccess, onCancel }: ImportarClientesProps) {\n  const [archivo, setArchivo] = useState<File | null>(null);\n  const [cargando, setCargando] = useState(false);\n  const [procesando, setProcesando] = useState(false);\n  const [clientesImport, setClientesImport] = useState<ClienteImport[]>([]);\n  const [mostrarVista, setMostrarVista] = useState(false);\n  const [resultadoImport, setResultadoImport] = useState<{\n    exitosos: number;\n    errores: number;\n    detalles: string[];\n  } | null>(null);\n  \n  // Notification state\n  const [notification, setNotification] = useState<{\n    isOpen: boolean;\n    type: 'success' | 'error' | 'warning' | 'info';\n    message: string;\n  }>({\n    isOpen: false,\n    type: 'info',\n    message: ''\n  });\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const showNotification = (type: 'success' | 'error' | 'warning' | 'info', message: string) => {\n    setNotification({ isOpen: true, type, message });\n  };\n\n  const hideNotification = () => {\n    setNotification(prev => ({ ...prev, isOpen: false }));\n  };\n\n  const descargarPlantilla = () => {\n    const plantillaCSV = `Tipo Persona,Tipo Identificaci√≥n,Identificaci√≥n,Nombre/Raz√≥n Social,Nombre Comercial,Correo Principal,Correos Adicionales,Pa√≠s Tel√©fono,Tel√©fono,Tel√©fono Secundario,Provincia,Cant√≥n,Distrito,Barrio,Otras Se√±as,C√≥digo Postal,Pa√≠s ISO,Direcci√≥n Extranjero 1,Direcci√≥n Extranjero 2,C√≥digo Actividad Econ√≥mica,R√©gimen Tributario,N√∫mero Exoneraci√≥n,Instituci√≥n Exoneraci√≥n,Porcentaje Exoneraci√≥n,Vencimiento Exoneraci√≥n,Moneda Preferida,Condici√≥n Venta,D√≠as Cr√©dito,L√≠mite Cr√©dito,Activo\nfisica,cedula_fisica,123456789,Juan P√©rez Rodr√≠guez,,juan.perez@email.com,juan.trabajo@email.com,506,88888888,22222222,San Jos√©,San Jos√©,Carmen,Centro,Casa blanca con port√≥n negro,10101,CR,,,620200,general,,,0,,CRC,contado,0,0,true\njuridica,cedula_juridica,3101234567,Empresa Ejemplo S.A.,Empresa Ejemplo,info@empresa.com,ventas@empresa.com;contabilidad@empresa.com,506,25551234,25551235,Alajuela,Alajuela,Alajuela,Centro,Edificio azul segundo piso,20101,CR,,,471100,general,,,0,,CRC,credito,30,1000000,true`;\n\n    const blob = new Blob([plantillaCSV], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'plantilla_clientes.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const manejarArchivoSeleccionado = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'text/csv' && !file.name.endsWith('.csv')) {\n        showNotification('error', 'Por favor seleccione un archivo CSV');\n        return;\n      }\n      \n      setArchivo(file);\n      setClientesImport([]);\n      setMostrarVista(false);\n      setResultadoImport(null);\n    }\n  };\n\n  const procesarArchivo = async () => {\n    if (!archivo) return;\n\n    try {\n      setCargando(true);\n      \n      const text = await archivo.text();\n      const lines = text.split('\\n').filter(line => line.trim());\n      \n      if (lines.length < 2) {\n        showNotification('error', 'El archivo debe contener al menos una fila de encabezados y una fila de datos');\n        return;\n      }\n      \n      const headers = lines[0].split(',').map(h => h.trim().replace(/\"/g, ''));\n      const rows = lines.slice(1);\n      \n      const clientesProcesados: ClienteImport[] = [];\n      \n      for (let i = 0; i < rows.length; i++) {\n        const row = rows[i].split(',').map(cell => cell.trim().replace(/\"/g, ''));\n        const fila = i + 2;\n        \n        if (row.every(cell => !cell)) continue;\n        \n        const clienteData: Partial<Cliente> = {};\n        const errores: string[] = [];\n        const advertencias: string[] = [];\n        \n        headers.forEach((header, index) => {\n          const valor = row[index];\n          if (!valor) return;\n          \n          switch (header.toLowerCase()) {\n            case 'tipo persona':\n              if (['fisica', 'juridica', 'extranjero'].includes(valor)) {\n                clienteData.tipo_persona = valor as any;\n              } else {\n                errores.push(`Tipo persona inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'tipo identificaci√≥n':\n              if (['cedula_fisica', 'cedula_juridica', 'dimex', 'nite', 'pasaporte'].includes(valor)) {\n                clienteData.tipo_identificacion = valor as any;\n              } else {\n                errores.push(`Tipo identificaci√≥n inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'identificaci√≥n':\n              clienteData.identificacion = valor;\n              break;\n              \n            case 'nombre/raz√≥n social':\n              clienteData.nombre_razon_social = valor;\n              break;\n              \n            case 'nombre comercial':\n              clienteData.nombre_comercial = valor;\n              break;\n              \n            case 'correo principal':\n              if (ClienteService.validarEmail(valor)) {\n                clienteData.correo_principal = valor;\n              } else {\n                errores.push(`Email inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'correos adicionales':\n              const emails = valor.split(';').map(e => e.trim()).filter(e => e);\n              const emailsValidos = emails.filter(e => ClienteService.validarEmail(e));\n              if (emailsValidos.length !== emails.length) {\n                advertencias.push('Algunos correos adicionales son inv√°lidos');\n              }\n              clienteData.correos_adicionales = emailsValidos;\n              break;\n              \n            case 'pa√≠s tel√©fono':\n              clienteData.telefono_pais = valor;\n              break;\n              \n            case 'tel√©fono':\n              if (ClienteService.validarTelefono(valor)) {\n                clienteData.telefono_numero = valor;\n              } else {\n                advertencias.push(`Tel√©fono inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'tel√©fono secundario':\n              clienteData.telefono_secundario = valor;\n              break;\n              \n            case 'c√≥digo actividad econ√≥mica':\n              clienteData.codigo_actividad_economica = valor;\n              break;\n              \n            case 'r√©gimen tributario':\n              if (['general', 'simplificado', 'exento', 'otro'].includes(valor)) {\n                clienteData.regimen_tributario = valor as any;\n              } else {\n                advertencias.push(`R√©gimen tributario inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'moneda preferida':\n              clienteData.moneda_preferida = valor;\n              break;\n              \n            case 'd√≠as cr√©dito':\n              const dias = parseInt(valor);\n              if (!isNaN(dias) && dias >= 0) {\n                clienteData.dias_credito = dias;\n              } else {\n                advertencias.push(`D√≠as cr√©dito inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'l√≠mite cr√©dito':\n              const limite = parseFloat(valor);\n              if (!isNaN(limite) && limite >= 0) {\n                clienteData.limite_credito = limite;\n              } else {\n                advertencias.push(`L√≠mite cr√©dito inv√°lido: ${valor}`);\n              }\n              break;\n              \n            case 'activo':\n              clienteData.activo = valor.toLowerCase() === 'true';\n              break;\n          }\n        });\n        \n        // Validaciones obligatorias\n        if (!clienteData.tipo_persona) errores.push('Tipo persona es obligatorio');\n        if (!clienteData.tipo_identificacion) errores.push('Tipo identificaci√≥n es obligatorio');\n        if (!clienteData.identificacion) errores.push('Identificaci√≥n es obligatoria');\n        if (!clienteData.nombre_razon_social) errores.push('Nombre/Raz√≥n social es obligatorio');\n        if (!clienteData.correo_principal) errores.push('Correo principal es obligatorio');\n        \n        // Validar formato de identificaci√≥n\n        if (clienteData.identificacion && clienteData.tipo_identificacion) {\n          if (!ClienteService.validarIdentificacion(clienteData.tipo_identificacion, clienteData.identificacion)) {\n            errores.push('Formato de identificaci√≥n inv√°lido');\n          }\n        }\n        \n        // Establecer valores por defecto\n        clienteData.telefono_pais = clienteData.telefono_pais || '506';\n        clienteData.moneda_preferida = clienteData.moneda_preferida || 'CRC';\n        clienteData.dias_credito = clienteData.dias_credito || 0;\n        clienteData.limite_credito = clienteData.limite_credito || 0;\n        clienteData.activo = clienteData.activo !== false;\n        clienteData.hacienda_estado_validacion = 'pendiente';\n        \n        clientesProcesados.push({\n          fila,\n          datos: clienteData,\n          errores,\n          advertencias\n        });\n      }\n      \n      setClientesImport(clientesProcesados);\n      setMostrarVista(true);\n      \n    } catch (error) {\n      console.error('Error procesando archivo:', error);\n      showNotification('error', 'Error al procesar el archivo. Verifique el formato.');\n    } finally {\n      setCargando(false);\n    }\n  };\n\n  const ejecutarImportacion = async () => {\n    try {\n      setProcesando(true);\n      \n      const clientesValidos = clientesImport.filter(c => c.errores.length === 0);\n      \n      if (clientesValidos.length === 0) {\n        showNotification('warning', 'No hay clientes v√°lidos para importar');\n        return;\n      }\n      \n      let exitosos = 0;\n      let errores = 0;\n      const detalles: string[] = [];\n      \n      for (const clienteImport of clientesValidos) {\n        try {\n          await ClienteService.crearCliente(clienteImport.datos as Cliente);\n          exitosos++;\n        } catch (error: any) {\n          errores++;\n          detalles.push(`Fila ${clienteImport.fila}: ${error.message}`);\n        }\n      }\n      \n      setResultadoImport({ exitosos, errores, detalles });\n      \n      if (exitosos > 0) {\n        setTimeout(() => {\n          onSuccess();\n        }, 2000);\n      }\n      \n    } catch (error) {\n      console.error('Error en importaci√≥n:', error);\n      showNotification('error', 'Error durante la importaci√≥n');\n    } finally {\n      setProcesando(false);\n    }\n  };\n\n  const clientesConErrores = clientesImport.filter(c => c.errores.length > 0);\n  const clientesValidos = clientesImport.filter(c => c.errores.length === 0);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      {/* Notification Popup */}\n      <NotificationPopup\n        isOpen={notification.isOpen}\n        type={notification.type}\n        message={notification.message}\n        onClose={hideNotification}\n      />\n\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Importar Clientes\n          </h2>\n          <button\n            onClick={onCancel}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <i className=\"ri-close-line text-2xl\"></i>\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {!mostrarVista && !resultadoImport && (\n            <div className=\"space-y-6\">\n              {/* Instrucciones */}\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start\">\n                  <i className=\"ri-information-line text-blue-600 text-xl mr-3 mt-0.5\"></i>\n                  <div>\n                    <h3 className=\"text-lg font-medium text-blue-900 mb-2\">\n                      Instrucciones de Importaci√≥n\n                    </h3>\n                    <ul className=\"text-sm text-blue-800 space-y-1\">\n                      <li>‚Ä¢ Descargue la plantilla CSV para ver el formato correcto</li>\n                      <li>‚Ä¢ Complete los datos siguiendo las instrucciones de la plantilla</li>\n                      <li>‚Ä¢ Los campos obligatorios son: Tipo Persona, Tipo Identificaci√≥n, Identificaci√≥n, Nombre/Raz√≥n Social, Correo Principal</li>\n                      <li>‚Ä¢ El sistema validar√° duplicados por identificaci√≥n</li>\n                      <li>‚Ä¢ Se pueden actualizar clientes existentes</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n\n              {/* Descargar plantilla */}\n              <div className=\"text-center\">\n                <button\n                  onClick={descargarPlantilla}\n                  className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center mx-auto\"\n                >\n                  <i className=\"ri-download-line mr-2\"></i>\n                  Descargar Plantilla CSV\n                </button>\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  Incluye ejemplos e instrucciones detalladas\n                </p>\n              </div>\n\n              {/* Seleccionar archivo */}\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                <i className=\"ri-file-text-line text-4xl text-gray-400 mb-4\"></i>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  Seleccionar Archivo\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Seleccione un archivo CSV con los datos de clientes\n                </p>\n                \n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".csv\"\n                  onChange={manejarArchivoSeleccionado}\n                  className=\"hidden\"\n                />\n                \n                <button\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors\"\n                >\n                  <i className=\"ri-folder-open-line mr-2\"></i>\n                  Seleccionar Archivo\n                </button>\n                \n                {archivo && (\n                  <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center justify-center\">\n                      <i className=\"ri-file-line text-gray-600 mr-2\"></i>\n                      <span className=\"text-sm text-gray-700\">{archivo.name}</span>\n                    </div>\n                    \n                    <button\n                      onClick={procesarArchivo}\n                      disabled={cargando}\n                      className=\"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\n                    >\n                      {cargando ? (\n                        <>\n                          <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                          Procesando...\n                        </>\n                      ) : (\n                        <>\n                          <i className=\"ri-play-line mr-2\"></i>\n                          Procesar Archivo\n                        </>\n                      )}\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Vista previa */}\n          {mostrarVista && !resultadoImport && (\n            <div className=\"space-y-6\">\n              {/* Resumen */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                  <div className=\"flex items-center\">\n                    <i className=\"ri-check-line text-green-600 text-xl mr-2\"></i>\n                    <div>\n                      <p className=\"text-sm font-medium text-green-800\">V√°lidos</p>\n                      <p className=\"text-2xl font-bold text-green-900\">{clientesValidos.length}</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                  <div className=\"flex items-center\">\n                    <i className=\"ri-close-line text-red-600 text-xl mr-2\"></i>\n                    <div>\n                      <p className=\"text-sm font-medium text-red-800\">Con Errores</p>\n                      <p className=\"text-2xl font-bold text-red-900\">{clientesConErrores.length}</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                  <div className=\"flex items-center\">\n                    <i className=\"ri-file-list-line text-blue-600 text-xl mr-2\"></i>\n                    <div>\n                      <p className=\"text-sm font-medium text-blue-800\">Total</p>\n                      <p className=\"text-2xl font-bold text-blue-900\">{clientesImport.length}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Lista de clientes */}\n              <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n                <div className=\"px-4 py-3 bg-gray-50 border-b border-gray-200\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Vista Previa de Importaci√≥n</h3>\n                  <p className=\"text-sm text-gray-600\">Primeras 50 filas</p>\n                </div>\n                \n                <div className=\"max-h-96 overflow-y-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50 sticky top-0\">\n                      <tr>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Fila</th>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Estado</th>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Identificaci√≥n</th>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Nombre</th>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Correo</th>\n                        <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Observaciones</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                      {clientesImport.slice(0, 50).map((cliente, index) => (\n                        <tr key={index} className={cliente.errores.length > 0 ? 'bg-red-50' : 'bg-white'}>\n                          <td className=\"px-4 py-2 text-sm text-gray-900\">{cliente.fila}</td>\n                          <td className=\"px-4 py-2\">\n                            {cliente.errores.length > 0 ? (\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\n                                <i className=\"ri-close-line mr-1\"></i>\n                                Error\n                              </span>\n                            ) : (\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                                <i className=\"ri-check-line mr-1\"></i>\n                                V√°lido\n                              </span>\n                            )}\n                          </td>\n                          <td className=\"px-4 py-2 text-sm text-gray-900\">{cliente.datos.identificacion}</td>\n                          <td className=\"px-4 py-2 text-sm text-gray-900\">{cliente.datos.nombre_razon_social}</td>\n                          <td className=\"px-4 py-2 text-sm text-gray-900\">{cliente.datos.correo_principal}</td>\n                          <td className=\"px-4 py-2 text-sm\">\n                            {cliente.errores.length > 0 && (\n                              <div className=\"text-red-600\">\n                                {cliente.errores.map((error, i) => (\n                                  <div key={i} className=\"text-xs\">‚Ä¢ {error}</div>\n                                ))}\n                              </div>\n                            )}\n                            {cliente.advertencias.length > 0 && (\n                              <div className=\"text-yellow-600\">\n                                {cliente.advertencias.map((advertencia, i) => (\n                                  <div key={i} className=\"text-xs\">‚ö† {advertencia}</div>\n                                ))}\n                              </div>\n                            )}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n\n              {/* Botones de acci√≥n */}\n              <div className=\"flex justify-between\">\n                <button\n                  onClick={() => setMostrarVista(false)}\n                  className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  <i className=\"ri-arrow-left-line mr-2\"></i>\n                  Volver\n                </button>\n                \n                <button\n                  onClick={ejecutarImportacion}\n                  disabled={procesando || clientesValidos.length === 0}\n                  className=\"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 transition-colors\"\n                >\n                  {procesando ? (\n                    <>\n                      <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                      Importando...\n                    </>\n                  ) : (\n                    <>\n                      <i className=\"ri-upload-line mr-2\"></i>\n                      Importar {clientesValidos.length} Clientes\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Resultado */}\n          {resultadoImport && (\n            <div className=\"space-y-6\">\n              <div className=\"text-center\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4\">\n                  <i className=\"ri-check-line text-3xl text-green-600\"></i>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                  Importaci√≥n Completada\n                </h3>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 text-center\">\n                  <i className=\"ri-check-line text-green-600 text-2xl mb-2\"></i>\n                  <p className=\"text-sm font-medium text-green-800\">Clientes Importados</p>\n                  <p className=\"text-3xl font-bold text-green-900\">{resultadoImport.exitosos}</p>\n                </div>\n                \n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-center\">\n                  <i className=\"ri-close-line text-red-600 text-2xl mb-2\"></i>\n                  <p className=\"text-sm font-medium text-red-800\">Errores</p>\n                  <p className=\"text-3xl font-bold text-red-900\">{resultadoImport.errores}</p>\n                </div>\n              </div>\n\n              {resultadoImport.detalles.length > 0 && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-red-900 mb-2\">Detalles de Errores:</h4>\n                  <div className=\"space-y-1\">\n                    {resultadoImport.detalles.map((detalle, index) => (\n                      <p key={index} className=\"text-sm text-red-800\">‚Ä¢ {detalle}</p>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"text-center\">\n                <button\n                  onClick={onSuccess}\n                  className=\"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors\"\n                >\n                  <i className=\"ri-check-line mr-2\"></i>\n                  Finalizar\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { ClientesLayout } from './components/ClientesLayout';\nimport { ClientesTable } from './components/ClientesTable';\nimport { ClienteForm } from './components/ClienteForm';\nimport { ClientesFilters } from './components/ClientesFilters';\nimport { ImportarClientes } from './components/ImportarClientes';\nimport { BuscarClienteModal } from './components/BuscarClienteModal';\nimport { Cliente, ClienteFilters } from '../../types/cliente';\nimport { ClienteService } from '../../services/clienteService';\nimport { PermissionButton } from '../../components/base/PermissionButton';\nimport { useAuth } from '../../hooks/useAuth';\nimport NotificationPopup from '../../components/base/NotificationPopup';\nimport ConfirmationDialog from '../../components/base/ConfirmationDialog';\n\nexport default function ClientesPage() {\n  const { currentStore } = useAuth();\n  const [clientes, setClientes] = useState<Cliente[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [showImport, setShowImport] = useState(false);\n  const [showBuscar, setShowBuscar] = useState(false);\n  const [editingCliente, setEditingCliente] = useState<Cliente | null>(null);\n  const [filters, setFilters] = useState<ClienteFilters>({});\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n\n  // Notification state\n  const [notification, setNotification] = useState<{\n    isOpen: boolean;\n    type: 'success' | 'error' | 'warning' | 'info';\n    message: string;\n  }>({\n    isOpen: false,\n    type: 'info',\n    message: ''\n  });\n\n  // Confirmation dialog state\n  const [confirmation, setConfirmation] = useState<{\n    isOpen: boolean;\n    title: string;\n    message: string;\n    onConfirm: () => void;\n  }>({\n    isOpen: false,\n    title: '',\n    message: '',\n    onConfirm: () => {}\n  });\n\n  const showNotification = (type: 'success' | 'error' | 'warning' | 'info', message: string) => {\n    setNotification({ isOpen: true, type, message });\n  };\n\n  const hideNotification = () => {\n    setNotification(prev => ({ ...prev, isOpen: false }));\n  };\n\n  const cargarClientes = useCallback(async () => {\n    if (!currentStore) {\n      setClientes([]);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const data = await ClienteService.obtenerClientes(filters);\n      setClientes(data);\n    } catch (error) {\n      console.error('Error cargando clientes:', error);\n      setClientes([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters, currentStore]);\n\n  useEffect(() => {\n    cargarClientes();\n  }, [cargarClientes, refreshTrigger]);\n\n  const handleCrearCliente = () => {\n    setEditingCliente(null);\n    setShowForm(true);\n  };\n\n  const handleEditarCliente = (cliente: Cliente) => {\n    setEditingCliente(cliente);\n    setShowForm(true);\n  };\n\n  const handleEliminarCliente = async (id: number) => {\n    setConfirmation({\n      isOpen: true,\n      title: 'Eliminar Cliente',\n      message: '¬øEst√° seguro de que desea eliminar este cliente?',\n      onConfirm: async () => {\n        try {\n          await ClienteService.eliminarCliente(id);\n          setRefreshTrigger(prev => prev + 1);\n          showNotification('success', 'Cliente eliminado exitosamente');\n        } catch (error) {\n          console.error('Error eliminando cliente:', error);\n          showNotification('error', 'Error al eliminar el cliente');\n        }\n      }\n    });\n  };\n\n  const handleFormSubmit = async (clienteData: any) => {\n    try {\n      if (editingCliente) {\n        await ClienteService.actualizarCliente(editingCliente.id!, clienteData);\n        showNotification('success', 'Cliente actualizado exitosamente');\n      } else {\n        await ClienteService.crearCliente(clienteData);\n        showNotification('success', 'Cliente creado exitosamente');\n      }\n      setShowForm(false);\n      setEditingCliente(null);\n      setRefreshTrigger(prev => prev + 1);\n    } catch (error: any) {\n      console.error('Error guardando cliente:', error);\n      showNotification('error', error.message || 'Error al guardar el cliente');\n    }\n  };\n\n  const handleImportSuccess = () => {\n    setShowImport(false);\n    setRefreshTrigger(prev => prev + 1);\n  };\n\n  // Mostrar mensaje si no hay tienda seleccionada\n  if (!currentStore) {\n    return (\n      <ClientesLayout>\n        <div className=\"bg-white rounded-lg shadow-sm border p-8 text-center\">\n          <div className=\"text-gray-500\">\n            <i className=\"ri-store-line text-4xl mb-4\"></i>\n            <p>No hay tienda seleccionada. Por favor, seleccione una tienda para continuar.</p>\n          </div>\n        </div>\n      </ClientesLayout>\n    );\n  }\n\n  return (\n    <ClientesLayout>\n      {/* Notification Popup */}\n      <NotificationPopup\n        isOpen={notification.isOpen}\n        type={notification.type}\n        message={notification.message}\n        onClose={hideNotification}\n      />\n\n      {/* Confirmation Dialog */}\n      <ConfirmationDialog\n        isOpen={confirmation.isOpen}\n        type=\"danger\"\n        title={confirmation.title}\n        message={confirmation.message}\n        onConfirm={() => {\n          confirmation.onConfirm();\n          setConfirmation(prev => ({ ...prev, isOpen: false }));\n        }}\n        onCancel={() => setConfirmation(prev => ({ ...prev, isOpen: false }))}\n      />\n\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Gesti√≥n de Clientes</h1>\n            <p className=\"text-gray-600 mt-1\">\n              Administra tu cartera de clientes con validaci√≥n de Hacienda\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-2\">\n            <PermissionButton\n              permission=\"clientes:view\"\n              variant=\"primary\"\n              onClick={() => setShowBuscar(true)}\n            >\n              <i className=\"ri-search-line mr-2\"></i>\n              Buscar Cliente\n            </PermissionButton>\n            \n            <PermissionButton\n              permission=\"clientes:create\"\n              variant=\"success\"\n              onClick={() => setShowImport(true)}\n            >\n              <i className=\"ri-file-excel-line mr-2\"></i>\n              Importar\n            </PermissionButton>\n            \n            <PermissionButton\n              permission=\"clientes:create\"\n              variant=\"primary\"\n              onClick={handleCrearCliente}\n              className=\"bg-teal-600 hover:bg-teal-700\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              Nuevo Cliente\n            </PermissionButton>\n          </div>\n        </div>\n\n        {/* Filtros */}\n        <ClientesFilters filters={filters} onFiltersChange={setFilters} />\n\n        {/* Estad√≠sticas r√°pidas */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-blue-100 rounded-lg\">\n                <i className=\"ri-user-line text-blue-600 text-xl\"></i>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm font-medium text-gray-600\">Total Clientes</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{clientes.length}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-green-100 rounded-lg\">\n                <i className=\"ri-shield-check-line text-green-600 text-xl\"></i>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm font-medium text-gray-600\">Validados</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {clientes.filter(c => c.hacienda_estado_validacion === 'valido').length}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-yellow-100 rounded-lg\">\n                <i className=\"ri-time-line text-yellow-600 text-xl\"></i>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm font-medium text-gray-600\">Pendientes</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {clientes.filter(c => c.hacienda_estado_validacion === 'pendiente').length}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-purple-100 rounded-lg\">\n                <i className=\"ri-building-line text-purple-600 text-xl\"></i>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm font-medium text-gray-600\">Jur√≠dicos</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {clientes.filter(c => c.tipo_persona === 'juridica').length}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Tabla de clientes */}\n        <ClientesTable\n          clientes={clientes}\n          loading={loading}\n          onEdit={handleEditarCliente}\n          onDelete={handleEliminarCliente}\n        />\n      </div>\n\n      {/* Modales */}\n      {showForm && (\n        <ClienteForm\n          cliente={editingCliente}\n          onSubmit={handleFormSubmit}\n          onCancel={() => {\n            setShowForm(false);\n            setEditingCliente(null);\n          }}\n        />\n      )}\n\n      {showImport && (\n        <ImportarClientes onSuccess={handleImportSuccess} onCancel={() => setShowImport(false)} />\n      )}\n\n      {showBuscar && (\n        <BuscarClienteModal\n          onSelect={cliente => {\n            setShowBuscar(false);\n            handleEditarCliente(cliente);\n          }}\n          onCancel={() => setShowBuscar(false)}\n        />\n      )}\n    </ClientesLayout>\n  );\n}\n"],"names":["ClientesLayout","children","sidebarOpen","setSidebarOpen","useState","jsxs","jsx","Sidebar","TopBar","MobileNav","ClientesTable","clientes","loading","onEdit","onDelete","currentStore","useAuth","notification","hideNotification","confirmation","showConfirmation","useNotification","getEstadoHaciendaColor","estado","getEstadoHaciendaTexto","getTipoPersonaTexto","tipo","Fragment","cliente","formatCurrency","PermissionButton","cotizacionCheck","pedidoCheck","error","prev","NotificationPopup","ConfirmationDialog","ClienteForm","onSubmit","onCancel","currentStep","setCurrentStep","setLoading","validandoHacienda","setValidandoHacienda","setNotification","loadingCatalogos","setLoadingCatalogos","loadingDistritos","setLoadingDistritos","provincias","setProvincias","cantones","setCantones","distritos","setDistritos","paises","setPaises","actividadesEconomicas","setActividadesEconomicas","formData","setFormData","errors","setErrors","correoAdicional","setCorreoAdicional","steps","useEffect","cargarCatalogos","cantonesData","ClienteService","distritosData","showError","provinciasData","paisesData","actividadesData","handleInputChange","field","value","validarPaso","paso","newErrors","handleNextStep","handlePrevStep","showSuccess","title","message","validarConHacienda","resultado","HaciendaService","agregarCorreoAdicional","eliminarCorreoAdicional","index","_","i","handleSubmit","e","dataToSubmit","renderStep1","renderStep2","renderStep3","correo","renderStep4","provincia","canton","distrito","pais","renderStep5","actividad","renderStep6","renderCurrentStep","step","ClientesFilters","filters","onFiltersChange","showAdvanced","setShowAdvanced","handleFilterChange","key","clearFilters","ImportarClientes","onSuccess","archivo","setArchivo","cargando","setCargando","procesando","setProcesando","clientesImport","setClientesImport","mostrarVista","setMostrarVista","resultadoImport","setResultadoImport","fileInputRef","useRef","showNotification","type","descargarPlantilla","plantillaCSV","blob","link","url","manejarArchivoSeleccionado","event","file","procesarArchivo","lines","line","headers","h","rows","clientesProcesados","row","cell","fila","clienteData","errores","advertencias","header","valor","emails","emailsValidos","dias","limite","ejecutarImportacion","clientesValidos","c","exitosos","detalles","clienteImport","clientesConErrores","advertencia","detalle","ClientesPage","setClientes","showForm","setShowForm","showImport","setShowImport","showBuscar","setShowBuscar","editingCliente","setEditingCliente","setFilters","refreshTrigger","setRefreshTrigger","setConfirmation","cargarClientes","useCallback","data","handleCrearCliente","handleEditarCliente","handleEliminarCliente","id","handleFormSubmit","handleImportSuccess","BuscarClienteModal"],"mappings":"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"}